/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{"030ed":function(e,t,n){"use strict";var r,o=n("1d967"),l=n.n(o),c=n("279f1"),f=n.n(c),filter=n("5eb4e"),d=n("a71f0"),h=n("11ebe"),v=n("d68e9"),y=n("77d77"),m=n("7e944"),O=n("3e908"),w=n.n(O),k=function(){return(k=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};!function(e){e.ENABLED="Снять все",e.DISABLED="Выбрать все"}(r||(r={}));var S={mixins:[y.a,m.a],props:{values:{required:!0,type:Array},hasMoreValues:{type:Boolean,default:!1},visible:{type:Number,default:0},minSearchCount:{type:Number,default:10},filterBlock:{type:Object,default:function(){return{}}},externalShowAll:{type:Boolean,default:!1},hasLetters:{type:Boolean,default:!0},urlBase:{type:String,default:""},urlQueryParamName:{type:String,default:""},showAsLinks:{type:Boolean,default:!1},showInvertedMode:{type:Boolean,default:!1},invertedModeEnabled:{type:Boolean,default:!1}},inject:{isMobile:{default:!1}},data:function(){return{localShowAll:void 0,searchInput:"",isFound:!0,originalValues:w()(this.values,[function(e){return!e.isActive},function(e){return e.originalIndex}])}},mounted:function(){var e=this;this.afterRouteEnter((function(){e.originalValues=w()(e.values,[function(e){return!e.isActive},function(e){return e.originalIndex}])}))},watch:{externalShowAll:function(){this.localShowAll=void 0}},computed:{showAll:{get:function(){return void 0!==this.localShowAll?this.localShowAll:this.externalShowAll},set:function(e){this.localShowAll=e}},visibleCount:function(){return this.visible||(this.isMobile?10:5)},items:function(){var e=this.urlQueryParamName,base=this.urlBase;return-1===base.search(/\?/)?base+="?":base+="&",(this.showAll?this.values:this.originalValues).map((function(t){return t.isLetter?t:k(k({},t),{href:""+base+e+"="+t.urlValue})}))},isSearchShow:function(){return this.values.length>=this.minSearchCount&&this.showAll},foundValues:function(){var e=this;return this.values.filter((function(t){return e.getItemValue(t).includes(e.searchInput.toLowerCase())}))},itemHeight:function(){return this.isMobile?50:24},isShowButton:function(){return!this.showAll&&(this.hasMoreValues||this.values.length>this.visibleCount)},selectAllButtonText:function(){return this.invertedModeEnabled?r.ENABLED:r.DISABLED}},methods:{onCheckboxClick:function(e,t){this.$emit("change",{key:t.key,isActive:this.invertedModeEnabled?!e:e})},isVisible:function(e,t){return!e.isLetter&&(this.showAll||t<this.visibleCount||e.isActive)},show:function(){this.showAll||(this.showAll=!0,this.$emit("show",this.filterBlock.key),this.hasMoreValues&&this.$emit("load"))},hide:function(){this.searchInput="",this.showAll=!1,this.$emit("hide",this.filterBlock.key),this.originalValues=w()(this.values,[function(e){return!e.isActive},function(e){return e.originalIndex}])},submit:function(){var e=this.foundValues.filter((function(e){return!e.isLetter}));if(1!==e.length)this.hide();else{var t=e[0];this.onCheckboxClick(!0,t)}},getItemValue:function(e){return"color"===this.filterBlock.key?e.color.name.toLowerCase():e.value.toLowerCase()},onSelectAllButtonClick:function(){this.$emit("selectAll")}}},C=n("a09a9"),T=n.n(C),E={name:"MultiFilterItem",functional:!0,props:{item:{type:Object,default:function(){return{}}},type:{type:String,default:""},showAsLinks:{type:Boolean,default:!1},invertedModeEnabled:{type:Boolean,default:!1}},render:function(e,t){var n,r=t.props,o=t.$style,l=t._v,data=t.data,c=t.listeners,d=r.item,h=r.showAsLinks,y=r.invertedModeEnabled,m=h?"a":"span";return d.isLetter?e("div",T()([{class:[o.title,data.class]},{directives:data.directives}]),[l(d.value)]):e(m,{attrs:{href:d.href},class:[o.wrapperLink,(n={},f()(n,o.link,h),f()(n,o.disabled,d.isDisabled),n)]},[e(v.OzCheckbox,T()([{attrs:{checked:y?!d.isActive:d.isActive,"label-vertical-align":"start",disabled:d.isDisabled},class:[o.checkbox,data.class]},{on:{change:function(e){return c.change(e,d)}}},{},{directives:data.directives}]),[e("span",{class:o.itemTitle},[l(d.value||d.key),d.count?e("span",T()([{class:[o.count,"f-tsCaption"]},{directives:[{name:"qa",value:{id:"counter"}}]}]),[" ",l(d.count)]):l("")])])])}},A=n("ce3f0"),_=n("b429c");var I=Object(_.a)(E,void 0,void 0,!1,(function(e){this.$style=A.default.locals||A.default}),null,null).exports,x=n("4066f"),B=n.n(x),P="ffffff",j="fffdfa",R={name:"MultiFilterColorItem",functional:!0,props:{item:{type:Object,default:function(){return{}}}},render:function(e,t){var n,r=t.props,o=t.$style,l=t._v,data=t.data,c=t.listeners,d=r.item;if(!d.color)return l("");var h=d.color.hex,y=[].concat(B()(data.directives),[{name:"qa",value:{id:"filter-block-color-item-".concat(d.key)}}]),m=[o.checkbox,f()({},o.active,d.isActive)],O=[o.color,(n={},f()(n,o.white,h===P),f()(n,o.transparent,h===j),n)],w={"background-color":"#".concat(h)};return e(v.OzCheckbox,T()([{class:[m,data.class],attrs:{checked:d.isActive,disabled:d.isDisabled}},{on:{change:function(e){c.change(e,d)}}},{},{directives:y}]),[e("div",{class:o.labelContainer},[e("div",{class:O,style:w}),e("div",{class:o.labelText},[l(d.color.name),d.count?e("span",T()([{class:[o.count,"f-tsCaption"]},{directives:[{name:"qa",value:{id:"counter"}}]}]),[" ",l(d.count)]):l("")])])])}},L=n("44730");var $=Object(_.a)(R,void 0,void 0,!1,(function(e){this.$style=L.default.locals||L.default}),null,null).exports,N=new Map,V={name:"Multi",components:{OzInput:v.OzInput,OzButton:v.OzButton,MultiFilterItem:I},extends:S,computed:{component:function(){return"color"===this.filterBlock.key?$:I}},watch:{values:function(){this.scrollList()}},mounted:function(){this.scrollList()},methods:{scrollList:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:n=e.$refs.scrollContainer,r=N.get(e.filterBlock.key),n&&r&&(n.scrollTop=r.count===e.values.length?r.scrollTop:0,e.autoScroll=!0);case 5:case"end":return t.stop()}}),t)})))()},handleScroll:function(e){e&&e.target&&!this.autoScroll&&N.set(this.filterBlock.key,{scrollTop:e.target.scrollTop,count:this.values.length}),this.autoScroll=!1},getQAObj:function(e,t){return{id:"filter-block-".concat(e.key,"-item-").concat(t.key),name:t.value||t.key,node:e.key}}}},M=n("faa8e");var D=Object(_.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.multiFilter},[e.isSearchShow?n("div",{class:e.$style.upperBarContainer},[n("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:"searchInput",expression:"'searchInput'",arg:"id"}],class:e.$style.searchInput,attrs:{placeholder:"Найти"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),e.showInvertedMode?n("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"selectAll",expression:"'selectAll'",arg:"id"}],attrs:{text:e.selectAllButtonText,theme:"inline"},on:{click:e.onSelectAllButtonClick}}):e._e()],1):e._e(),e._v(" "),e.isSearchShow?n("div",{class:e.$style.searchShow},[e.foundValues.length?e._e():n("span",{class:e.$style.none},[e._v("Ничего не нашлось")]),e._v(" "),n("div",{ref:"scrollContainer",class:e.$style.searchShowContainer,on:{"&scroll":function(t){return e.handleScroll(t)}}},e._l(e.foundValues,(function(t){return n(e.component,{directives:[{name:"qa",rawName:"v-qa",value:e.getQAObj(e.filterBlock,t),expression:"getQAObj(filterBlock, item)"}],key:t.key,tag:"component",class:e.$style.label,attrs:{item:t,type:e.filterBlock.key,"show-as-links":e.showAsLinks,"inverted-mode-enabled":e.invertedModeEnabled},on:{change:e.onCheckboxClick}})})),1)]):n("div",{class:e.$style.items},[e._l(e.items,(function(t,r){return[e.isVisible(t,r)?n(e.component,{directives:[{name:"qa",rawName:"v-qa",value:e.getQAObj(e.filterBlock,t),expression:"getQAObj(filterBlock, item)"}],key:t.key,tag:"component",class:e.$style.label,attrs:{item:t,type:e.filterBlock.key,"show-as-links":e.showAsLinks,"inverted-mode-enabled":e.invertedModeEnabled},on:{change:e.onCheckboxClick}}):e._e()]}))],2),e._v(" "),n("span",{staticClass:"show"},[e.isShowButton?n("span",{directives:[{name:"qa",rawName:"v-qa:id",value:"filter-block-"+e.filterBlock.key+"-show-all",expression:"`filter-block-${filterBlock.key}-show-all`",arg:"id"}],class:e.$style.showText,on:{click:e.show}},[e._v("\n      Посмотреть все\n    ")]):e._e(),e._v(" "),e.showAll&&!e.invertedModeEnabled?n("span",{class:e.$style.showText,on:{click:e.hide}},[e._v("Свернуть")]):e._e()])])}),[],!1,(function(e){this.$style=M.default.locals||M.default}),null,null).exports,F=n("89e08"),Y=n("66ca4"),z=n.n(Y),U=n("62f0b"),G=n.n(U),Q={name:"BoolBlock",components:{BoolFilter:F.a,IconCross:G.a,IconInfo:z.a,OzPopover:v.OzPopover},inject:{isMobile:{default:!1}},props:{filterBlock:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{isDescriptionVisible:!1}},computed:{hasDescription:function(){return this.filterBlock.shortDesc.length>0&&!this.isMobile},count:function(){return this.filterBlock.values[0].count||""}},methods:{onChange:function(e){this.$emit("change",{isActive:e})},onToggle:function(e){this.isDescriptionVisible=e},onClick:function(e){e.target.closest(".".concat(this.$style.popover))&&e.preventDefault()}}},W=n("b25aa");var K=Object(_.a)(Q,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.boolBlockContainer,(e={},e[t.$style.mobile]=t.isMobile,e)]},[r("BoolFilter",{class:t.$style.boolBlock,attrs:{filter:t.filterBlock},on:{change:t.onChange}},[r("div",{class:t.$style.labelContainer},[r("span",{class:t.$style.labelText},[t._v("\n        "+t._s(t.filterBlock.name)),r("span",{class:t.$style.nowrap},[t.hasDescription?r("OzPopover",{class:t.$style.popover,attrs:{trigger:"click"},on:{toggle:t.onToggle},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onClick(e)}}},[t.isDescriptionVisible?r("icon-cross",{class:[t.$style.titleIcon,t.$style.close],attrs:{viewBox:"0 0 16 16",width:"12",height:"12"}}):r("icon-info",{class:t.$style.titleIcon}),t._v(" "),r("template",{slot:"popover"},[t._v("\n              "+t._s(t.filterBlock.shortDesc)+"\n            ")])],2):t._e(),t._v(" "),t.count?r("span",{directives:[{name:"qa",rawName:"v-qa:id",value:"counter",expression:"'counter'",arg:"id"}],class:[t.$style.count,"f-tsCaption"]},[t._v(t._s(t.count))]):t._e()],1)])])])],1)}),[],!1,(function(e){this.$style=W.default.locals||W.default}),null,null).exports,H=n("ad4a3"),J=n("edf48");function X(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?X(Object(source),!0).forEach((function(t){f()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):X(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var ee={name:"RadioFilter",functional:!0,props:{values:{required:!0,type:Array},filterBlock:{type:Object,required:!0},icon:{type:String,default:""},iconTintColor:{type:String,default:""}},render:function(e,t){var data=t.data,n=t.props,r=t.listeners,o=t._v,l=t.$style,c=n.values,f=n.filterBlock,d={value:"Неважно",key:"-1"},h=c.find((function(e){return e.isActive}))||d,y=String(h.key),m=[{name:"qa",value:{id:"counter"}}];return e("div",T()([{class:l.container},{directives:data.directives}]),B()([d].concat(B()(c)).map((function(t){return function(t){var n=t.icon,c=t.iconTintColor,d=H.b[n],h={};return c&&(h.color=Object(J.getColorByNameOrHex)(c)),e(v.OzRadio,T()([{class:l.item},{directives:[{name:"qa",value:{id:"".concat(f.key,"Value")}}]},{attrs:{value:String(t.key),name:"radio_filter--".concat(f.key)},props:Z({},{model:y})},{on:{input:function(e){r.change({key:Number(e),isActive:!0})}}}]),[e("div",{class:l.innerContainer},[].concat(B()(n?[e(d,{class:l.icon,style:h})]:[]),[e("span",[o(t.value),t.count?e("span",T()([{class:[l.count,"f-tsCaption"]},{directives:m}]),[" ",o(t.count)]):o("")])]))])}(t)}))))}},te=n("84f07");var ne=Object(_.a)(ee,void 0,void 0,!1,(function(e){this.$style=te.default.locals||te.default}),null,null).exports,re=n("8b404"),ie=n.n(re);function oe(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function ae(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?oe(Object(source),!0).forEach((function(t){f()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):oe(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var se={name:"FilterBlockPure",components:{OzPopover:v.OzPopover,IconInfo16:ie.a,IconCross:G.a},mixins:[m.a],props:{filter:{required:!0,type:Object,validator:function(e){var t=e.ftype,n=e.key,r=e.values;return t&&n&&Array.isArray(r)}},forceHideTitle:{type:Boolean,default:!1},disableViewport:{type:Boolean,default:!1}},inject:{trackingInfo:{default:function(){return{}}}},data:function(){return{shouldSendShowEvent:!0,isDescriptionVisible:!1}},computed:{components:function(){var e;return e={},f()(e,filter.a.TYPES.RANGE,h.a),f()(e,filter.a.TYPES.MULTI,D),f()(e,filter.a.TYPES.BOOL,K),f()(e,filter.a.TYPES.RADIO,ne),f()(e,filter.a.TYPES.RATING,K),f()(e,filter.a.TYPES.COLOR,D),e},isComponentExists:function(){return Boolean(this.components[this.filter.ftype])},filterValues:function(){var e,t={key:this.filter.key,name:this.filter.name,shortDesc:this.filter.shortDesc},n=this.filter.values||[];return e={},f()(e,filter.a.TYPES.RANGE,ae({},n[0]?ae(ae({},n[0].range),{},{isDisabled:n[0].isDisabled}):{})),f()(e,filter.a.TYPES.MULTI,{filterBlock:t,hasMoreValues:this.filter.hasMoreValues,values:this.filter.values,externalShowAll:this.filter.showAll,showAsLinks:"brand"===this.filter.key,urlBase:this.filter.urlBase,urlQueryParamName:this.filter.urlQueryParamName,showInvertedMode:this.filter.showInvertedMode,invertedModeEnabled:this.filter.invertedModeEnabled}),f()(e,filter.a.TYPES.RADIO,{filterBlock:t,icon:this.filter.icon,iconTintColor:this.filter.iconTintColor,values:this.filter.values}),f()(e,filter.a.TYPES.BOOL,{filterBlock:ae(ae({},t),{},{values:this.filter.values||[]}),value:this.filter.name}),f()(e,filter.a.TYPES.RATING,{filterBlock:ae(ae({},t),{},{values:this.filter.values||[]}),value:this.filter.name}),f()(e,filter.a.TYPES.COLOR,{filterBlock:t,hasMoreValues:this.filter.hasMoreValues,values:this.filter.values,externalShowAll:this.filter.showAll,hasLetters:!1}),e},showTitle:function(){return!this.forceHideTitle&&this.filter.name&&!this.isBool&&!this.isRating},isBool:function(){return this.filter.ftype===filter.a.TYPES.BOOL},isRating:function(){return this.filter.ftype===filter.a.TYPES.RATING},hasDescription:function(){return this.filter.shortDesc.length>0}},mounted:function(){var e=this;this.afterRouteEnter((function(){e.shouldSendShowEvent=!0}))},methods:{show:function(e){this.$emit("show",e),d.a.send(d.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:{type:"filter",index:this.filter.index+1,id:this.filter.key,title:"Свернуть",elementType:"menu"}})},hide:function(e){this.$emit("hide",e),d.a.send(d.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:{type:"filter",index:this.filter.index+1,id:this.filter.key,title:"Посмотреть все",elementType:"menu"}})},onChange:function(e){var t=this;return l()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.$emit("change",{key:t.filter.key,ftype:t.filter.ftype,value:e}),n.next=3,t.$nextTick();case 3:t.sendAnalyticsClick(e);case 4:case"end":return n.stop()}}),n)})))()},onLoad:function(){this.$emit("load",this.filter)},onViewport:function(){this.shouldSendShowEvent&&!this.disableViewport&&(d.a.send(d.b.VIEW_ACTION,{widget:this.trackingInfo||{},cell:this.filter.cellTrackingInfo}),this.shouldSendShowEvent=!1)},sendAnalyticsClick:function(e){var t=this.filter.ftype,n=null,r=null;if(t===filter.a.TYPES.RANGE){var o=e.from,l=e.to,c=this.filterValues[t],f=c.min,h=c.max;r="".concat(o||f,":").concat(l||h),n=d.b.SET_ACTION}([filter.a.TYPES.BOOL,filter.a.TYPES.RATING].includes(t)&&(r=String(e.isActive),n=e.isActive?d.b.SET_ACTION:d.b.UNSET_ACTION),[filter.a.TYPES.COLOR,filter.a.TYPES.MULTI].includes(t))&&(r=this.filterValues[t].values.filter((function(e){return e.isActive})).map((function(e){return e.key})).join(","),n=this.filter.invertedModeEnabled?e.isActive?d.b.UNSET_ACTION:d.b.SET_ACTION:e.isActive?d.b.SET_ACTION:d.b.UNSET_ACTION);[filter.a.TYPES.RADIO].includes(t)&&(r=-1===e.key?"all":e.key,n=-1===e.key?d.b.UNSET_ACTION:d.b.SET_ACTION),d.a.send(n,{widget:this.trackingInfo||{},cell:ae(ae({},this.filter.cellTrackingInfo),{},{filterValue:String(r),index:+this.filter.cellTrackingInfo.index,status:filter.a.ANALYTICS_STATUS_MAP[this.filter.ftype]})})},onToggle:function(e){this.isDescriptionVisible=e,e&&d.a.send(d.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:{type:"filter",index:this.filter.index+1,id:this.filter.key,title:"hint",elementType:"menu"}})},onSelectAll:function(){this.$emit("selectAll",this.filter);var e=this.filter.invertedModeEnabled?d.b.UNSET_ACTION:d.b.SET_ACTION,title=this.filter.invertedModeEnabled?"Снять все":"Выбрать все";d.a.send(e,{widget:this.trackingInfo||{},cell:{type:"filter",index:this.filter.index+1,id:this.filter.key,filterValue:"all",title:title,elementType:"menu"}})}}},le=n("6edf8");var ce=Object(_.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isComponentExists?n("div",{directives:[{name:"qa",rawName:"v-qa:filter-block",value:e.filter.key,expression:"filter.key",arg:"filter-block"}],class:[e.$style.filter,"filter-block"]},[e.showTitle?n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"filter-title-"+e.filter.key,expression:"`filter-title-${filter.key}`",arg:"id"}],class:e.$style.title},[e._v("\n    "+e._s(e.filter.name)+" "),e.hasDescription?n("OzPopover",{class:e.$style.popover,attrs:{trigger:"click"},on:{toggle:e.onToggle}},[e.isDescriptionVisible?n("icon-cross",{class:e.$style.titleIcon}):n("icon-info16",{class:e.$style.titleIcon}),e._v(" "),n("template",{slot:"popover"},[e._v("\n      "+e._s(e.filter.shortDesc)+"\n    ")])],2):e._e()],1):e._e(),e._v(" "),n(e.components[e.filter.ftype],e._b({directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:{once:!0,callback:e.onViewport},expression:"{once: true, callback: onViewport}"}],tag:"component",on:{change:function(t){return e.onChange(t)},hide:e.hide,load:e.onLoad,show:e.show,selectAll:e.onSelectAll}},"component",e.filterValues[e.filter.ftype],!1))],1):e._e()}),[],!1,(function(e){this.$style=le.default.locals||le.default}),null,null);t.a=ce.exports},"0ba6f":function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function r(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}function o(e){var t,n;return!1!==r(e)&&("function"==typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}n.r(t);var dfn=Object.defineProperty,l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(e,t,n){void 0===n&&(n=!1);var r={_vueTypes_name:{value:e},def:{value:function(e){return void 0!==e||this.default?(l(e)?this.default=function(){return[].concat(e)}:o(e)?this.default=function(){return Object.assign({},e)}:this.default=e,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return n&&(r.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},r),t)}var f,d,h=(f={utils:{toType:c,validate:function(){return!0}}},d={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(f,"sensibleDefaults",{enumerable:!1,set:function(e){d=!1===e?{}:!0===e?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:e},get:function(){return d}})),v={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function y(e,t,n,r,o){var l;void 0===r&&(r=!1),void 0===o&&(o=!1);var f=((l={})[r?"get":"value"]=function(){return c(t,n,o).def(r?h.sensibleDefaults[t]:void 0)},l);return dfn(e,t,f)}function m(e,t,n){return function(r){return y(e,r,{type:v[r]||null},t,n)}}["any","func","bool","string","number","array","object","symbol"].forEach(m(h,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(m(h,!1)),y(h,"integer",{type:Number},!0),dfn(h,"shape",{value:function(){return dfn(c("shape",{type:Object}),"loose",{get:function(){return this}})}}),h.extend=function(e){var t=e.name,n=e.validate,r=e.getter,l=void 0!==r&&r,c=e.type,f=void 0===c?null:c,d=o(f)&&f.type?null:f;return y(h,t,{type:d},l,!!n)};t.default=h},"11ebe":function(e,t,n){"use strict";var r=n("d68e9"),o=n("7e944"),l={name:"RangeFilter",components:{OzRange:r.OzRange},mixins:[o.a],props:{min:{required:!0,type:Number},max:{required:!0,type:Number},from:{type:[Number,null],default:null},to:{type:[Number,null],default:null}},inject:{isMobile:{default:!1}},data:function(){return{rangeValue:[this.from||this.min,this.to||this.max]}},computed:{inputSize:function(){if(!this.isMobile)return"s"}},watch:{from:{immediate:!0,handler:function(e){this.rangeValue=[e||this.min,this.to||this.max]}},to:{immediate:!0,handler:function(e){this.rangeValue=[this.from||this.min,e||this.max]}}},mounted:function(){var e=this;this.afterRouteEnter((function(){e.rangeValue=[e.from||e.min,e.to||e.max]}))},methods:{onChange:function(e){var t=this.from||this.min,n=this.to||this.max;t===e[0]&&n===e[1]||this.$emit("change",{from:e[0],to:e[1]})}}},c=n("ba708"),f=n("b429c");var component=Object(f.a)(l,(function(){var e,t=this,n=t.$createElement;return(t._self._c||n)("OzRange",{class:[(e={},e[t.$style.mobileRange]=t.isMobile,e)],attrs:{"inputs-size":t.inputSize,min:t.min,max:t.max},on:{change:t.onChange},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}})}),[],!1,(function(e){this.$style=c.default.locals||c.default}),null,null);t.a=component.exports},"202a7":function(e,t,n){e.exports={boolBlock:"f9m9",boolBlockContainer:"f9n",labelContainer:"f9n0",labelText:"f9n1",small:"f9n2",popover:"f9n3",title:"f9n4",titleIcon:"f9n5",close:"f9n6",nowrap:"f9n7",count:"f9n8",mobile:"f9n9"}},21611:function(e,t,n){e.exports={filter:"f9f7",title:"f9f8",popover:"f9f9",titleIcon:"f9g"}},"2a6f3":function(e,t,n){"use strict";var r=n("d985d"),o=n.n(r);t.default=o.a},"42ca7":function(e,t,n){"use strict";n.r(t);var r=n("279f1"),o=n.n(r),l=n("d3037"),c=n("d68e9"),f=n("a71f0"),d=n("6b183"),h=n("c95ee"),v=n("3ced6");function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){o()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O={name:"CatalogCategoryLogoDesktop",functional:!0,props:{cat:{type:Object,required:!0},hideImage:{type:Boolean,default:!1}},render:function(e,t){var n=t.props,r=t.$style,l=t.listeners,f=t._v,data=t.data,d=n.cat,h=n.hideImage;if(!d)return e("");var y=h?e(""):e("div",{class:r["img-container"]},[e(c.OzImage,{class:r.img,props:{isAdult:d.hideAdult,src:d.image,size:64,noText:!0,useCdn:!0}})]),O=[e("span",{class:[r.title,o()({},r.twoLines,d.parentTitle)],directives:[{name:"qa",value:{id:"category-logo-title"}}]},[f(d.title)])];d.parentTitle&&O.push(e("span",{class:[r.parentTitle,r.twoLines],directives:[{name:"qa",value:{id:"category-logo-subtitle"}}]},[f(d.parentTitle)]));var w=d.action?"div":v.a,k={href:d.action?void 0:!d.hideAdult&&d.link};return e(w,{class:[data.class,r.cat,o()({},r.noImage,h)],props:m({},k),on:{click:l.onClick},directives:[{name:"qa",value:{id:"category-logos-item",categoryId:d.id}}]},[y,e("div",{class:[r.titleContainer,o()({},r.noImage,h)]},O),e("div",{class:r.overlay})])}},w=n("6e707"),k=n("b429c");var S=Object(k.a)(O,void 0,void 0,!1,(function(e){this.$style=w.default.locals||w.default}),null,null).exports;function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){o()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E={BUTTON:h.a,LOGOS:S},A=l.a.extend({name:"CategoryLogos",components:{OzTag:c.OzTag},mixins:[d.a],provide:function(){return{trackingInfo:this.trackingInfo}},props:{hideImage:{type:Boolean,default:!1}},data:function(){return{localSlicedBy:0}},computed:{cats:function(){return(this.widgetState.items||[]).map((function(e){var component=E[e.type]||S;return T(T({},e),{},{component:component})}))},slicedCats:function(){var e=this.cats;return this.hasMore?e.slice(0,this.slicedBy-1):e},hasMore:function(){return this.cats.length>this.slicedBy},isTagsView:function(){return"TAG"===(this.cats[0]||{}).type},slicedBy:{get:function(){return this.localSlicedBy||this.widgetState.slicedBy||(this.isTagsView?8:10)},set:function(e){this.localSlicedBy=e}}},mounted:function(){var e=this;this.slicedCats.forEach((function(t){return e.onViewport(t)})),this.cats.some((function(e){var t=e.action,button=e.button;return button?!button.action:!t}))&&this.$logger.warning({message:{value:"rendered ".concat(this.$options.name," without action"),zone:"categoryLogos"},payload:{categories:this.widgetState.items}})},methods:{showMore:function(){var e=this;this.cats.slice(this.slicedBy-1).forEach((function(t){return e.onViewport(t)})),this.slicedBy=this.cats.length,f.a.send(f.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:this.widgetState.moreCellTrackingInfo})},onAction:function(e,t){var n=e.button?e.button.action:e.action;if(n)return this.onAtomAction(n,{},t);this.composerRouter.push(e.link)},onClick:function(e,t){this.onAction(e,t),f.a.send(f.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:e.cellTrackingInfo})},onViewport:function(e){f.a.send(f.b.VIEW_ACTION,{widget:this.trackingInfo||{},cell:e.cellTrackingInfo})}}}),_=n("7f8f3");var I=Object(k.a)(A,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return t.slicedCats.length?r("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"category-logos",expression:"'category-logos'",arg:"id"}],class:t.$style.wrapper},[t.isTagsView?[t._l(t.slicedCats,(function(e){return r("OzTag",{directives:[{name:"qa",rawName:"v-qa",value:{id:"category-logos-item",categoryId:e.id},expression:"{id: 'category-logos-item', categoryId: cat.id}"}],key:e.id,class:t.$style.tagItem,attrs:{theme:"secondary",text:e.title},on:{click:function(n){return t.onClick(e)}}})})),t._v(" "),t.hasMore?r("OzTag",{directives:[{name:"qa",rawName:"v-qa",value:{id:"more-btn"},expression:"{id: 'more-btn'}"}],class:t.$style.tagItem,attrs:{text:"Ещё",theme:"secondary"},on:{click:t.showMore}}):t._e()]:[t._l(t.slicedCats,(function(e){return r(e.component,{key:e.id,tag:"component",class:[t.$style.item,t.$style[e.type.toLowerCase()]],attrs:{cat:e,"hide-image":t.hideImage},on:{onClick:function(n){return t.onClick(e,n)}}})})),t._v(" "),t.hasMore?r("div",{directives:[{name:"qa",rawName:"v-qa",value:{id:"more-btn"},expression:"{id: 'more-btn'}"}],class:[t.$style.more,(e={},e[t.$style.noImage]=t.hideImage,e)],on:{click:t.showMore}},[t._v("\n      Ещё\n    ")]):t._e()]],2):t._e()}),[],!1,(function(e){this.$style=_.default.locals||_.default}),null,null);t.default=I.exports},44730:function(e,t,n){"use strict";var r=n("9e87e"),o=n.n(r);t.default=o.a},"47afb":function(e,t,n){e.exports={wrapperLink:"gs3",title:"gs4",itemTitle:"gs5",checkbox:"gs6",link:"gs7",disabled:"gs8",count:"gs9"}},"4d47e":function(e,t,n){"use strict";var r=n("64182"),o=n.n(r);t.default=o.a},"5e93a":function(e,t,n){"use strict";var r=n("c2a84"),o=n.n(r);t.default=o.a},"5eb4e":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={TYPES:{BOOL:"RESPONSE_FILTER_TYPE_BOOL",MULTI:"RESPONSE_FILTER_TYPE_MULTI",RANGE:"RESPONSE_FILTER_TYPE_RANGE",COLOR:"RESPONSE_FILTER_TYPE_COLOR",RADIO:"RESPONSE_FILTER_TYPE_RADIO",RATING:"RESPONSE_FILTER_TYPE_RATING",INVALID:"RESPONSE_FILTER_TYPE_INVALID"},TYPE_MAP:{RESPONSE_FILTER_TYPE_BOOL:"bool",RESPONSE_FILTER_TYPE_MULTI:"multi",RESPONSE_FILTER_TYPE_COLOR:"color",RESPONSE_FILTER_TYPE_RATING:"bool",RESPONSE_FILTER_TYPE_RANGE:"range"},URL_PREFIX:"f_",SEPARATORS:{RANGE:";",MULTI:","},ANALYTICS_STATUS_MAP:{RESPONSE_FILTER_TYPE_BOOL:"bool",RESPONSE_FILTER_TYPE_MULTI:"multi",RESPONSE_FILTER_TYPE_RANGE:"range",RESPONSE_FILTER_TYPE_COLOR:"color",RESPONSE_FILTER_TYPE_RADIO:"radio",RESPONSE_FILTER_TYPE_RATING:"bool"}}},64182:function(e,t,n){e.exports={aside:"b6f9",applyButtonBlock:"b6g",foundText:"b6g0",reset:"b6g1",showButton:"b6g2",count:"b6g3"}},"66ca4":function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),a=t.children,l=void 0===a?[]:a,c=s.class,f=s.staticClass,i=s.style,d=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,v=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[c,f],style:[i,d],attrs:Object.assign({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14A6 6 0 118 2a6 6 0 010 12zm0-7a1 1 0 011 1v3a1 1 0 11-2 0V8a1 1 0 011-1zm1-2a1 1 0 10-2 0 1 1 0 002 0z",fill:"currentColor"}}),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14A6 6 0 118 2a6 6 0 010 12zm0-7a1 1 0 011 1v3a1 1 0 11-2 0V8a1 1 0 011-1zm1-2a1 1 0 10-2 0 1 1 0 002 0z",fill:"currentColor"}})]))}}},"6e707":function(e,t,n){"use strict";var r=n("8f6a7"),o=n.n(r);t.default=o.a},"6edf8":function(e,t,n){"use strict";var r=n("21611"),o=n.n(r);t.default=o.a},"77d77":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ff287"),o=n.n(r),l={computed:{siteAbGroup:function(){return o()(this.$store.state,"experiments.abGroup")||-1},siteExperiments:function(){return o()(this.$store.state,"experiments.experiments")||{}},siteABConfig:function(){return o()(this.$store.state,"experiments.config",{})||{}}}}},"7f8f3":function(e,t,n){"use strict";var r=n("d6c5f"),o=n.n(r);t.default=o.a},"84f07":function(e,t,n){"use strict";var r=n("c3768"),o=n.n(r);t.default=o.a},88837:function(e,t,n){e.exports={label:"f9o0",upperBarContainer:"f9o1",searchInput:"f9o2",searchShow:"f9o3",searchShowContainer:"f9o4",searchForm:"f9o5",searchButton:"f9o6",labelText:"f9o7","m-active":"f9o8",":hover":"f9o9",show:"f9p",showText:"f9p0",none:"f9p1",letter:"f9p2",items:"f9p3"}},"89e08":function(e,t,n){"use strict";var r=n("4066f"),o=n.n(r),l=n("a09a9"),c=n.n(l),f=n("ff287"),d=n.n(f),h=n("d68e9"),v={name:"BoolFilterNew",functional:!0,props:{filter:{type:Object,required:!0,default:function(){return{}}}},render:function(e,t){var n=t.props,data=t.data,r=t.listeners,l=t.scopedSlots,filter=n.filter,f=d()(filter,"values[0]",!1),v=(l.default||function(){return[]})();return e(h.OzCheckbox,c()([{attrs:{checked:f.isActive,disabled:f.isDisabled,theme:"toggle","control-position":"right","label-vertical-align":"start"},class:data.class},{on:{change:r.change}},{},{directives:data.directives}]),o()(v))}},y=n("b429c"),component=Object(y.a)(v,void 0,void 0,!1,null,null,null);t.a=component.exports},"8f6a7":function(e,t,n){e.exports={overlay:"gq8",cat:"gq9",":hover":"gr",noImage:"gr0","img-container":"gr1",img:"gr2",titleContainer:"gr3",title:"gr4",parentTitle:"gr5",twoLines:"gr6"}},"97b92":function(e,t,n){e.exports={mobileRange:"f9o"}},"986a7":function(e,t,n){e.exports={categoryFilter:"b9u6",title:"b9u7",container:"b9u8"}},"9e87e":function(e,t,n){e.exports={checkbox:"gt",active:"gt0",labelContainer:"gt1",color:"gt2",white:"gt3",transparent:"gt4",labelText:"gt5",count:"gt6"}},ae521:function(e,t,n){"use strict";var r=n("986a7"),o=n.n(r);t.default=o.a},b25aa:function(e,t,n){"use strict";var r=n("202a7"),o=n.n(r);t.default=o.a},ba708:function(e,t,n){"use strict";var r=n("97b92"),o=n.n(r);t.default=o.a},c2a84:function(e,t,n){e.exports={cat:"f9e6",desktop:"f9e7",":hover":"f9e8",overlay:"f9e9"}},c3768:function(e,t,n){e.exports={container:"f9m4",item:"f9m5",innerContainer:"f9m6",icon:"f9m7",count:"f9m8"}},c95ee:function(e,t,n){"use strict";var r=n("a09a9"),o=n.n(r),l=n("279f1"),c=n.n(l),f=n("dfa20"),d=n("6b183");function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){c()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={name:"CategoryLogoButton",components:{AtomIconButton:f.default},mixins:[d.a],props:{cat:{type:Object,required:!0}},render:function(){var e=arguments[0],t=this.cat,n=this.$style,r=this.onAtomAction,l=this.isMobile;return t?e("div",o()([{class:[n.cat,c()({},n.desktop,!l)]},{on:{click:function(e){return r(t.button.action,void 0,e)}}},{},{directives:[{name:"qa",value:{id:"category-logos-item",type:"button"}}]}]),[e(f.default,{props:v({},v(v({},t.button),{},{size:"xl"}))})]):[]}},m=n("5e93a"),O=n("b429c");var component=Object(O.a)(y,void 0,void 0,!1,(function(e){this.$style=m.default.locals||m.default}),null,null);t.a=component.exports},ce3f0:function(e,t,n){"use strict";var r=n("47afb"),o=n.n(r);t.default=o.a},d6c5f:function(e,t,n){e.exports={wrapper:"f9q5",more:"f9q6",noImage:"f9q7",":hover":"f9q8",tagItem:"f9q9"}},d985d:function(e,t,n){e.exports={categoryBaseContainer:"cv6",categoryContainer:"cv7",disabled:"cv8",icon:"cv9",category:"cw",":hover":"cw0",active:"cw1",children:"cw2",more:"cw3","icon-more":"cw4","m-inverted":"cw5",count:"d9r2"}},eb459:function(e,t,n){"use strict";n.r(t);var r=n("4066f"),o=n.n(r),l=n("1d967"),c=n.n(l),f=n("279f1"),d=n.n(f),h=n("d3037"),v=n("ff287"),y=n.n(v),m=n("f7127"),O=n.n(m),w=n("030ed"),k=n("a71f0"),S=n("668c2"),C=n.n(S),T=n("c7aac"),E={name:"CategoryMenuItemDesktop",components:{ArrowIcon:C.a},inject:{emitSelectCategory:{default:function(){return function(){}}},trackingInfo:{default:function(){return{}}}},props:{cat:{type:Object,required:!0},disableCrumbs:{type:Boolean,default:!1},categoriesToggleButton:{type:Boolean,default:!0},isRoot:{type:Boolean,default:!1},index:{type:Number,default:0}},data:function(){return{isMoreOpen:!1,detectViewportSettings:{once:!0,callback:this.onView}}},computed:{isActive:function(){return this.cat.isActive},isCrumb:function(){return!this.disableCrumbs&&0===this.cat.categories.length&&!this.isActive},showMoreButton:function(){return this.categoriesToggleButton&&this.cat.categories.length>10},showMoreText:function(){var e=this.cat.categories.length-10,t=Object(T.f)(e,["категория","категории","категорий"]);return this.isMoreOpen?"Скрыть":"Ещё ".concat(t)},shownCategories:function(){return this.showMoreButton?this.cat.categories.slice(0,this.isMoreOpen?this.cat.categories.length:10):this.cat.categories},testId:function(){return this.cat.info.urlValue?"category-filter-item":"category-filter-show-all"},QAObj:function(){return{id:this.testId,isActive:this.isActive,categoryId:this.cat.info.id,isCrumb:this.isCrumb}}},methods:{onCatClick:function(e){this.emitSelectCategory(e),this.sendClickEvent(e)},onView:function(){!this.isRoot&&this.sendViewEvent()},toggleShowMore:function(){this.isMoreOpen=!this.isMoreOpen},sendClickEvent:function(e){k.a.send(k.b.CLICK_ACTION,{widget:this.trackingInfo||{},cell:e.cellTrackingInfo})},sendViewEvent:function(){k.a.send(k.b.VIEW_ACTION,{widget:this.trackingInfo||{},cell:this.cat.cellTrackingInfo})}}},A=n("2a6f3"),_=n("b429c");function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){d()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var B={name:"CategoryMenuDesktop",components:{CategoryV2:Object(_.a)(E,(function(){var e,t,n,r=this,o=r.$createElement,l=r._self._c||o;return l("div",{class:r.$style.categoryBaseContainer},[l("div",{class:[r.$style.categoryContainer,(e={},e[r.$style.disabled]=r.cat.isDisabled,e)]},[r.isCrumb?l("ArrowIcon",{class:r.$style.icon}):r._e(),r._v(" "),l("a",{directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:r.detectViewportSettings,expression:"detectViewportSettings"},{name:"qa",rawName:"v-qa",value:r.QAObj,expression:"QAObj"}],class:[r.$style.category,(t={},t[r.$style.active]=r.isActive,t)],attrs:{href:r.cat.href},on:{mouseup:function(e){return"button"in e&&1!==e.button?null:r.sendClickEvent(r.cat)},click:function(e){return e.preventDefault(),r.onCatClick(r.cat)}}},[r._v("\n      "+r._s(r.cat.info.name)),r.cat.count?l("span",{directives:[{name:"qa",rawName:"v-qa:id",value:"counter",expression:"'counter'",arg:"id"}],class:[r.$style.count,"f-tsCaption"]},[r._v(" "+r._s(r.cat.count))]):r._e()])],1),r._v(" "),r.shownCategories.length?l("div",{class:r.$style.children},[r._l(r.shownCategories,(function(e,t){return l("CategoryMenuItemDesktop",{key:e.info.id,attrs:{cat:e,index:t,"categories-toggle-button":!1,"disable-crumbs":!0}})})),r._v(" "),r.showMoreButton?l("div",{class:r.$style.more},[l("ArrowIcon",{class:[r.$style["icon-more"],(n={},n[r.$style["m-inverted"]]=r.isMoreOpen,n)]}),r._v(" "),l("span",{on:{click:r.toggleShowMore}},[r._v(r._s(r.showMoreText))])],1):r._e()],2):r._e()])}),[],!1,(function(e){this.$style=A.default.locals||A.default}),null,null).exports},provide:function(){return{emitSelectCategory:this.emitSelectCategory}},props:{categories:{type:Array,default:function(){return[]}},activeCategory:{type:Object,default:function(){return{}}},categoriesToggleButton:{type:Boolean,default:!0}},computed:{isOnlyTopLevel:function(){return!this.categories.filter((function(e){return e.categories.length})).length},mappedCategories:function(){return this.categories.map((function(e,t){return x(x({},e),{},{index:t})}))}},methods:{emitSelectCategory:function(e){this.$emit("select",e)}}},P=n("ae521");var j=Object(_.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"qa",rawName:"v-qa:id",value:"category-filter",expression:"'category-filter'",arg:"id"}],class:e.$style.categoryFilter},[n("header",{class:e.$style.title},[e._v("\n    Категория\n  ")]),e._v(" "),n("main",{class:e.$style.container},e._l(e.mappedCategories,(function(t,r){return n("CategoryV2",{key:t.info.id,attrs:{cat:t,index:r,"categories-toggle-button":e.categoriesToggleButton,"disable-crumbs":e.isOnlyTopLevel&&!e.activeCategory.id,"is-root":!0}})})),1)])}),[],!1,(function(e){this.$style=P.default.locals||P.default}),null,null).exports,R=n("d68e9"),L=n("3034d"),$=n("77d77"),N=n("3ced6"),V=n("3e908"),M=n.n(V),D=n("5eb4e");function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){d()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var z={},U="",G=!1,Q=h.a.extend({name:"SearchResultsFilters",mixins:[Object(L.a)(),$.a],components:{ComposerLink:N.a,FilterBlockPure:w.a,CategoryFilterV2:j,OzButton:R.OzButton},mounted:function(){var e=this;this.filters.forEach((function(filter){var e=filter.invertedModeEnabled,t=filter.key;e&&(z[t]=!0)})),this.openFilters(),this.endRouteLoading((function(){e.openFilters(),G&&e.filtersExpConfig.newDesktopFiltersYndx&&(G=!1,e.showButton.style.top=U,e.showButton.totalPrefix=Object(T.f)(e.sharedState.totalFound,["Найден","Найдено","Найдено"],!1),e.showButton.totalItems=e.widgetState.totalFound,e.showButton.style.display="flex",setTimeout((function(){e.showButton.style.display="none"}),6e3))}))},data:function(){return{categoryFilterShowAll:!1,isLoading:!1,showButton:{totalItems:"",totalPrefix:"",url:"",style:{display:"none"}}}},provide:function(){return{isCategoryPage:!this.isSearch,trackingInfo:this.trackingInfo,onLoadFilter:this.onLoadFilter}},computed:{sharedState:function(){return y()(this.$store.state,"shared.catalog",{})},filtersExpConfig:function(){var e=this.siteABConfig;return{newDesktopFiltersYndx:e.newDesktopFiltersYndx,newDesktopFiltersDosi:e.newDesktopFiltersDosi}},allFiltersUrl:function(){return this.widgetState.allFiltersUrl||""},categoriesToggleButton:function(){return this.widgetState.categoriesToggleButton},filters:function(){return this.widgetState.filters?this.widgetState.filters.filter((function(e){return!e.isHidden})).map((function(filter,e){var t=z[filter.key];return Y(Y({},filter),{},{showAll:t,index:e,defer:e<4?0:1})})):[]},categories:function(){var e=this;return(this.widgetState.categories||[]).map((function(t){return function e(section){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Y(Y({},section),{},{categories:section.categories.map((function(n){return e(n,t)})),href:section.info.overrideUrl||t&&t.replace("{value}",section.info.urlValue)})}(t,e.urlBaseCategory)}))},activeFilters:function(){return this.filters.map((function(e){var t=e.key,n=e.ftype,r=e.values;return{key:t,ftype:n,name:e.name,values:r.filter((function(e){var t=e.isActive,n=e.range;return t||n&&(n.from||n.to)}))}})).filter((function(e){return e.values.length}))},activeCategory:function(){return this.sharedState.category||{}},activeCategoryName:function(){return this.activeCategory.name},activeCategoryId:function(){if(this.activeCategory.id)return String(this.activeCategory.id)},urlBaseCategory:function(){return this.widgetState.urlBaseCategory||""},urlBase:function(){var e=this.getActiveCategory(this.categories),base=y()(e,"info.overrideUrl","")||this.widgetState.urlBase||"";return-1===base.search(/\?/)?base+="?":base+="&",base},urlCategoryQueryParam:function(){return this.widgetState.urlCategoryQueryParam||""},url:function(){var e=this.widgetState.url||"";this.sharedState.currentPage>1&&(-1===e.search(/\?/)?e+="?":e+="&",e+="page=".concat(this.sharedState.currentPage||1));var t=e.split("?"),n=t[0].replace(/\/$/,""),r=t[1];return"".concat(n,"/").concat(r?"?".concat(r):"")},isSearch:function(){return this.urlBase.search(/^\/search/)>-1}},methods:{hideShowButton:function(){this.showButton.style.display="none",this.showButton.url=""},showButtonClick:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k.a.send(k.b.CLICK_ACTION,{widget:this.trackingInfo,cell:{type:"ui",title:"Показать",elementType:e?"button":"tooltip"}}),e&&this.composerRouter.push(this.showButton.url,{scroll:!1}),this.hideShowButton()},setClickCoordinates:function(e){e.target.closest(".filter-block")&&(G=!0,U="".concat(e.pageY-this.$el.offsetTop-20,"px"),this.showButton.style.top=U)},openFilters:function(){var e=this,t=function(t){var filter=e.filters.find((function(e){return e.key===t}));z[t]&&filter&&filter.hasMoreValues&&e.onLoadFilter(filter)};for(var n in z)t(n)},onSelectCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.resetFiltersLocalState(),this.composerRouter.push(e.href)},apply:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){var n,r,o,l,f,d,h,v,m,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filtersExpConfig,r=n.newDesktopFiltersDosi,o=n.newDesktopFiltersYndx,l=e.getActiveCategory(e.categories),f=function(){var t=c()(regeneratorRuntime.mark((function t(){var n,r,o,c,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>0&&void 0!==f[0]&&f[0],t.prev=1,r=y()(l,"info.id",""),o={applyFilters:[],skipTotalItems:n},r&&(o.applyCategory=r),e.filters.forEach((function(filter){var t=e.getFilterUrlValue(filter);(t.length||filter.invertedModeEnabled)&&o.applyFilters.push({key:filter.key,type:filter.ftype,modeNot:filter.invertedModeEnabled,values:t})})),t.next=8,e.$api.composer.action.post({name:"applySearchFilters",data:o});case 8:return c=t.sent,t.abrupt("return",c||{});case 12:return t.prev=12,t.t0=t.catch(1),e.$logger.error({exception:t.t0}),t.abrupt("return",{});case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),!o){t.next=8;break}return clearTimeout(e.applyTimeout),e.$store.dispatch("composer/CANCEL_PROMISE"),e.applyTimeout=setTimeout(c()(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return n=t.sent,r=n.url,t.abrupt("return",e.composerRouter.push(r,{scroll:!1}));case 5:case"end":return t.stop()}}),t)}))),700),t.abrupt("return");case 8:if(!r){t.next=19;break}return t.next=11,f();case 11:return d=t.sent,h=d.url,v=d.totalItems,e.showButton.url=h,e.showButton.totalPrefix=Object(T.f)(v,["найден","найдено","найдено"],!1),e.showButton.totalItems=Object(T.f)(v,["товар.","товара.","товаров."]),e.showButton.style.display="flex",t.abrupt("return");case 19:return t.next=21,f(!0);case 21:return m=t.sent,O=m.url,t.abrupt("return",O&&e.composerRouter.push(O,{scroll:!1}));case 24:case"end":return t.stop()}}),t)})))()},onChange:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.updateFilterValue(e),n.next=3,t.apply();case 3:case"end":return n.stop()}}),n)})))()},onLoadFilter:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){var r,o,data,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.key,o=t.filters.findIndex((function(filter){return filter.key===r})),n.prev=2,n.next=5,t.$api.composer.action.post({name:"getSearchFilterValues",data:{key:r,freeze:!0}});case 5:data=n.sent,l=t.filters[o].values.reduce((function(e,t){return t.isLetter||(e[t.key]=t),e}),{}),c=(data.values||[]).map((function(e){return Y(Y({},e),{},{isActive:l[e.key]?l[e.key].isActive:e.isActive})})),t.setWidgetStateValue("filters[".concat(o,"].values"),t.sortMoreFilterValues(c,r)),t.setWidgetStateValue("filters[".concat(o,"].hasMoreValues"),!1),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),t.$logger.error({exception:n.t0});case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},sortMoreFilterValues:function(data,e){var t={},n=[],r=function(t){return"color"===e?t.color.name.toLowerCase():t.value.toLowerCase()};return data.forEach((function(n,o){var l=Y(Y({},n),{},{originalIndex:o,value:"color"===e?n.color:n.value.trim()}),c="brand"===e?r(l).charAt(0).toUpperCase():0;t[c]||(t[c]=[]),t[c].push(l)})),Object.keys(t).sort().forEach((function(l){t[l]=M()(t[l],[function(e){return!e.isActive},function(e){return r(e)}]),"brand"===e&&n.push({value:l,key:l,isLetter:!0}),n.push.apply(n,o()(t[l]))})),n},updateFilterValue:function(e){var t=this.filters.findIndex((function(t){return t.key===e.key})),filter=this.filters[t]||{},n=1===filter.values.length?0:filter.values.findIndex((function(t){return t.key===e.value.key})),r=filter.values[n]||{};return filter.ftype===D.a.TYPES.RANGE?this.setWidgetStateValue("filters[".concat(t,"].values[").concat(n,"].range"),Y(Y(Y({},r.range),e.value),{},{isActive:!0})):filter.ftype===D.a.TYPES.RADIO?this.setWidgetStateValue("filters[".concat(t,"].values"),filter.values.map((function(t){return Y(Y({},t),{},{isActive:t.key===e.value.key})}))):void this.setWidgetStateValue("filters[".concat(t,"].values[").concat(n,"].isActive"),e.value.isActive)},getFilterUrlValue:function(filter){var e=[];return filter.values.filter((function(e){var t=e.isActive,n=e.range;return t||n})).forEach((function(t){if(t.range){var n=t.range,r=n.from,o=n.max,l=n.to,c=n.min;(r&&r>c||l&&l<o)&&(e.push(String(r||c)),e.push(String(l||o)))}else t.isActive&&e.push(t.urlValue)})),e},resetFiltersLocalState:function(){Object.keys(z).forEach((function(e){z[e]=!1}))},getActiveCategory:function(e){for(var i=0,t=e.length;i<t;i++){var n=e[i];if(n.isActive)return n;var r=n.categories&&Array.isArray(n.categories)&&this.getActiveCategory(n.categories);if(r)return r}},onOpenedFiltersChange:function(e,t){z[e]=t;var n=this.filters.findIndex((function(filter){return filter.key===e})),r=this.filters[n].values||[],o=[];o=t?this.sortMoreFilterValues(r,e):M()(r.filter((function(e){return!e.isLetter})),[function(e){return!e.isActive}]),this.setWidgetStateValue("filters[".concat(n,"].values"),o)},openAllFilters:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:e.isLoading=!0,k.a.send(k.b.CLICK_ACTION,{widget:e.trackingInfo,cell:{type:"ui",elementType:"button",title:"Все фильтры"}}),e.$store.commit("setLayoutModalOptions",{options:{theme:"fullScreen"}}),e.composerRouter.push(e.allFiltersUrl),e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},asyncSharedMapper:function(e){return{catalog:Y(Y({},this.sharedState),O()(e.catalog,(function(e){return!e})))}},onSelectAll:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.filters.findIndex((function(t){return t.key===e.key})),n.next=3,t.setWidgetStateValue("filters[".concat(r,"].invertedModeEnabled"),!e.invertedModeEnabled);case 3:return n.next=5,t.resetIsActiveValuesOfFilter(e);case 5:return n.next=7,t.apply();case 7:case"end":return n.stop()}}),n)})))()},resetIsActiveValuesOfFilter:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){var r,filter,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.filters.findIndex((function(t){return t.key===e.key})),filter=t.filters[r]||{},o=filter.values.map((function(e){return Y(Y({},e),{},{isActive:!1})})),n.next=5,t.setWidgetStateValue("filters[".concat(r,"].values"),o);case 5:case"end":return n.stop()}}),n)})))()}}}),W=n("4d47e");var K=Object(_.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{class:e.$style.aside,on:{click:e.setClickCoordinates}},[e.categories.length?n("CategoryFilterV2",{attrs:{"active-category":e.activeCategory,categories:e.categories,"categories-toggle-button":e.categoriesToggleButton},on:{select:e.onSelectCategory}}):e._e(),e._v(" "),e._l(e.filters,(function(filter,t){return[e.defer(filter.defer)?n("FilterBlockPure",{key:t,attrs:{filter:filter},on:{change:e.onChange,hide:function(t){return e.onOpenedFiltersChange(t,!1)},load:e.onLoadFilter,show:function(t){return e.onOpenedFiltersChange(t,!0)},selectAll:e.onSelectAll}}):e._e()]})),e._v(" "),n("div",{class:e.$style.showButton,style:e.showButton.style},[n("span",{class:e.$style.count},[e._v(e._s(e.showButton.totalPrefix)+" "+e._s(e.showButton.totalItems))]),e._v(" "),e.showButton.url?n("ComposerLink",{attrs:{href:e.showButton.url,scroll:!1},on:{click:function(t){return e.showButtonClick(!1)}}},[e._v("\n      Показать\n    ")]):e._e()],1),e._v(" "),e.allFiltersUrl&&e.defer(1)?n("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"allFiltersOpenButton",expression:"'allFiltersOpenButton'",arg:"id"}],attrs:{loading:e.isLoading,size:"l",fill:"",theme:"secondary",text:"Все фильтры"},on:{click:e.openAllFilters}}):e._e(),e._v(" "),e.showButton.url?n("div",{class:e.$style.applyButtonBlock},[n("span",{class:e.$style.foundText},[e._v("\n      Мы нашли "+e._s(e.showButton.totalItems)+"\n    ")]),e._v(" "),n("OzButton",{attrs:{size:"l",fill:"",theme:"primary",text:"Показать"},on:{click:function(t){return e.showButtonClick(!0)}}}),e._v(" "),n("ComposerLink",{class:e.$style.reset,attrs:{href:e.urlBase},on:{click:e.hideShowButton}},[e._v("\n      Сбросить фильтры\n    ")])],1):e._e()],2)}),[],!1,(function(e){this.$style=W.default.locals||W.default}),null,null);t.default=K.exports},faa8e:function(e,t,n){"use strict";var r=n("88837"),o=n.n(r);t.default=o.a}}]);