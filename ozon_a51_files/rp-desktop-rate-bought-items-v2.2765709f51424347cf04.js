/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[636],{"04a38":function(t,e,n){t.exports={dragAndDropArea:"e2u5",pageDropZone:"e2u6",infoMessage:"e2u7",icon:"e2u8",active:"e2u9"}},"08c19":function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++)for(var s in a=arguments[e])Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e};t.exports={functional:!0,render:function(t,a){var e=a._c,r=(a._v,a.data),s=a.children,l=void 0===s?[]:s,c=r.class,i=r.staticClass,d=r.style,f=r.staticStyle,h=r.attrs,p=void 0===h?{}:h,v=o(r,["class","staticClass","style","staticStyle","attrs"]);return e("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p)},v),l.concat([e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3v-.334l2.676.888a1 1 0 001.315-.949v-9.21a1 1 0 00-1.326-.945L18 7.37V7a3 3 0 00-3-3H5zm10 2a1 1 0 011 1v10a1 1 0 01-1 1H5a1 1 0 01-1-1V7a1 1 0 011-1h10zm3.1 8.592v-5.14l1.89-.652v6.42l-1.89-.628zm-6.97-3.753l-.89-1.692a.269.269 0 00-.48 0l-.89 1.692-1.639.258a.27.27 0 00-.141.068.284.284 0 00-.02.394l1.142 1.298-.255 1.824a.285.285 0 00.03.172.27.27 0 00.369.114L10 14.06l1.644.906c.051.028.11.039.168.03a.278.278 0 00.23-.316l-.254-1.824 1.142-1.298a.282.282 0 00-.161-.462l-1.639-.258z",fill:"currentColor"}})]))}}},"0ba6f":function(t,e,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function o(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var e}function r(t){var e,n;return!1!==o(t)&&("function"==typeof(e=t.constructor)&&(!1!==o(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}n.r(e);var dfn=Object.defineProperty,l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function c(t,e,n){void 0===n&&(n=!1);var o={_vueTypes_name:{value:t},def:{value:function(t){return void 0!==t||this.default?(l(t)?this.default=function(){return[].concat(t)}:r(t)?this.default=function(){return Object.assign({},t)}:this.default=t,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return n&&(o.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},o),e)}var d,f,h=(d={utils:{toType:c,validate:function(){return!0}}},f={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(d,"sensibleDefaults",{enumerable:!1,set:function(t){f=!1===t?{}:!0===t?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:t},get:function(){return f}})),v={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function m(t,e,n,o,r){var l;void 0===o&&(o=!1),void 0===r&&(r=!1);var d=((l={})[o?"get":"value"]=function(){return c(e,n,r).def(o?h.sensibleDefaults[e]:void 0)},l);return dfn(t,e,d)}function y(t,e,n){return function(o){return m(t,o,{type:v[o]||null},e,n)}}["any","func","bool","string","number","array","object","symbol"].forEach(y(h,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(y(h,!1)),m(h,"integer",{type:Number},!0),dfn(h,"shape",{value:function(){return dfn(c("shape",{type:Object}),"loose",{get:function(){return this}})}}),h.extend=function(t){var e=t.name,n=t.validate,o=t.getter,l=void 0!==o&&o,c=t.type,d=void 0===c?null:c,f=r(d)&&d.type?null:d;return m(h,e,{type:f},l,!!n)};e.default=h},"0d00a":function(t,e,n){"use strict";var o=n("e9cbb"),r=n.n(o);e.default=r.a},"16e80":function(t,e,n){"use strict";var o=n("6ef88"),r=n.n(o);e.default=r.a},"1818f":function(t,e,n){"use strict";var o=n("5e08c"),r=n.n(o);e.default=r.a},"1bb91":function(t,e,n){"use strict";var o=n("fa77a"),r=n.n(o);e.default=r.a},"1e4d8":function(t,e,n){"use strict";var o=n("9eb7c"),r=n.n(o);e.default=r.a},"1ffde":function(t,e,n){"use strict";var o=n("ff287"),r=n.n(o),l=n("6876d"),c=n("0ba6f"),d=n("a71f0"),f=n("aa9c1"),h=n("39fac"),v=n("6b668"),m=function(){return(m=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},y=function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function c(t){try{f(o.next(t))}catch(t){l(t)}}function d(t){try{f(o.throw(t))}catch(t){l(t)}}function f(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}f((o=o.apply(t,e||[])).next())}))},x=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=body.call(t,r)}catch(t){l=[6,t],n=0}finally{e=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},w=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l},_=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(w(arguments[i]));return t};e.a={mixins:[v.a],props:{slidesCount:c.default.number.def(f.a)},data:function(){return{rawProducts:[],processingIndex:-1,notRateErrorIndex:-1,activeChoice:null}},computed:m(m({},Object(l.e)("userInfo",{showAdult:"showAdult"})),{user:function(){return r()(this.widgetState,"author.fio")||null},publishingPolicy:function(){return r()(this.widgetState,"publishingPolicy")||null},allProducts:function(){return this.rawProducts},totalProductCount:function(){return this.allProducts.length},adultProducts:function(){return this.allProducts.filter((function(t){return t.isAdultContent}))},adultProductsCount:function(){return this.adultProducts.length},simpleProducts:function(){return this.allProducts.filter((function(t){return!t.isAdultContent}))},simpleProductsCount:function(){return this.simpleProducts.length},products:function(){return this.showAdult?_(this.simpleProducts,this.adultProducts):this.adultProductsCount?_(this.simpleProducts,[this.adultProducts[0]]):this.simpleProducts},showNotRateError:function(){var t=r()(this,"activeChoice.product.id")||0,e=this.getIndex(t);return-1!==this.notRateErrorIndex&&this.notRateErrorIndex===e},cellTrackingInfo:function(){return r()(this.widgetState,"cellTrackingInfo")||{}},cellTrackingInfoPopup:function(){return r()(this.cellTrackingInfo,"cellTrackingInfoPopup")||{}}}),created:function(){this.rawProducts=_(r()(this,"widgetState.products")||[])},methods:m(m({},Object(l.b)("userInfo",{setAdultCookie:"SET_ADULT_COOKIE"})),{trackerInfo:function(t){return{widget:this.trackingInfo,slice:this.sliceTrackingInfo||{},cell:t}},doSetShowAdult:function(){this.setAdultCookie(!0)},setRating:function(data){if(data){var t={rating:r()(data,"rating")||0};d.a.send(d.b.CLICK_ACTION,m({custom:t},this.trackerInfo(r()(this.cellTrackingInfo,"stars")||{})))}this.activeChoice=data},notRateCarousel:function(t,e){d.a.send(d.b.CLICK_ACTION,this.trackerInfo(r()(this.cellTrackingInfo,"buttonWithoutReview")||{})),this.notRate(t,e)},notRatePopup:function(t,e){d.a.send(d.b.CLICK_ACTION,this.trackerInfo(r()(this.cellTrackingInfoPopup,"buttonWithoutReview")||{})),this.notRate(t,e)},notRate:function(t,e){return y(this,void 0,void 0,(function(){var n,o,r;return x(this,(function(l){switch(l.label){case 0:n=this.getIndex(t),o=this.getIndexInAllProduct(t),l.label=1;case 1:return l.trys.push([1,3,,4]),this.processingIndex=n,[4,this.$api.composer.action.post({name:h.a,data:{itemId:t}})];case 2:return l.sent(),[3,4];case 3:return l.sent(),this.notRateErrorIndex=this.processingIndex,this.processingIndex=-1,[2];case 4:return this.notRateErrorIndex=-1,this.processingIndex=-1,e&&(r=this.getNextProduct(n),this.changeActiveProduct(r)),this.updateProducts(o),[2]}}))}))},reviewCreated:function(t,e,n){var o=this.getIndex(t),l=this.getIndexInAllProduct(t),c=this.getNextProduct(o),f={id:e,rating:n};d.a.send(d.b.ADD_ACTION,m({custom:f},this.trackerInfo(r()(this.cellTrackingInfoPopup,"reviewAdd["+t+"]")||{}))),this.isMobile&&this.scrollToTop(),c?this.changeActiveProduct(c):this.activeChoice=null,this.updateProducts(l)},scrollToTop:function(){var t=document.querySelector(".rate-bought-items-popup"),e=t&&t.querySelector(".modal-container");e&&(e.scrollTop=0)},updateProducts:function(t){this.rawProducts.splice(t,1)},getIndex:function(t){return this.products.findIndex((function(e){return e.id===t}))},getIndexInAllProduct:function(t){return this.allProducts.findIndex((function(e){return e.id===t}))},getNextProduct:function(t){var e=this.products.length;return 1===e?null:t===e-1?this.products[0]:this.products[t+1]},changeActiveProduct:function(t,e){this.activeChoice={product:t},d.a.send(d.b.CLICK_ACTION,this.trackerInfo(r()(this.cellTrackingInfoPopup,"productsClick.["+e+"]")||{}))},changeAnonymous:function(t){t?d.a.send(d.b.SET_ACTION,this.trackerInfo(r()(this.widgetState,"cellTrackingInfo.toggleSet")||{})):d.a.send(d.b.UNSET_ACTION,this.trackerInfo(r()(this.widgetState,"cellTrackingInfo.toggleSet")||{}))}})}},"23f72":function(t,e,n){"use strict";var o={components:{OzTextarea:n("d68e9").OzTextarea},props:{partsOfComment:{type:Array,default:function(){return[{title:"Достоинства",placeholder:"Что вам понравилось?",dataTestId:"ProductMeritsField",ref:"positive"},{title:"Недостатки",placeholder:"Что не оправдало ваших ожиданий?",dataTestId:"ProductDisadvantagesField",ref:"negative"},{title:"Комментарии",placeholder:"Другие впечатления о товаре?",dataTestId:"CommentField",ref:"comment"}]}},displayType:{type:String,default:"combined"},value:{type:Object,default:function(){return{positive:"",negative:"",comment:""}}},errorMessage:{type:String,default:""},error:{type:Boolean,default:!1},maxHeight:{type:Number,default:350},autosize:{type:Boolean,default:!0},maxLength:{type:Number,default:3e3},showNotice:{type:Boolean,default:!1},showNoticeOffset:{type:Number,default:500}},methods:{onBlur:function(){this.$emit("blur")},onFocus:function(){this.$emit("focus")},isNoticeVisible:function(t){return this.showNotice&&this.value[t]&&this.value[t].length>=this.maxLength-this.showNoticeOffset}}},r=n("78bf0"),l=n("b429c");var component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.multitext,t.$style[t.displayType]]},[t._l(t.partsOfComment,(function(e,o){var r;return[e.title?n("div",{key:e.title,class:t.$style.multitextTitle},[t._v("\n      "+t._s(e.title)+"\n    ")]):t._e(),t._v(" "),n("div",{key:e.ref,class:[t.$style.multitextTextarea,(r={},r[t.$style.last]=o===t.partsOfComment.length-1,r)]},[n("OzTextarea",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-text-"+e.ref,expression:"`review-text-${part.ref}`",arg:"id"}],ref:e.ref,refInFor:!0,attrs:{placeholder:e.placeholder,"max-length":""+t.maxLength,"max-height":t.maxHeight+"px","auto-height-by-rows":t.autosize,"has-error":t.error},on:{blur:t.onBlur,focus:t.onFocus,keydown:function(t){t.stopPropagation()}},model:{value:t.value[e.ref],callback:function(n){t.$set(t.value,e.ref,n)},expression:"value[part.ref]"}}),t._v(" "),t.isNoticeVisible(e.ref)?n("div",{class:t.$style.notice},[t._v("\n        Символов: "+t._s(t.value[e.ref].length)+"/"+t._s(t.maxLength)+"\n      ")]):t._e()],1)]})),t._v(" "),t.error?n("div",{class:t.$style.error},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e()],2)}),[],!1,(function(t){this.$style=r.default.locals||r.default}),null,null);e.a=component.exports},"2436e":function(t,e,n){t.exports={creating:"a4y",loader:"a4y0"}},"2c013":function(t,e,n){t.exports={name:"g0l4",block:"g0l5",row:"g0l6"}},"30da9":function(t,e,n){"use strict";var o=n("bcfb2"),r=n.n(o);e.default=r.a},"34bf8":function(t,e,n){t.exports={rateBoughtItemsWrapper:"gq3",container:"gq4",containerNarrow:"gq5",title:"gq6",description:"gq7"}},"367ea":function(t,e,n){"use strict";var o=n("bc13c"),r=n.n(o);e.default=r.a},"36f2c":function(t,e,n){"use strict";var o=n("0ba6f"),r=n("a1cf5"),l=n.n(r),c=n("ff287"),d=n.n(c),f={mixins:[n("6b668").a],props:{value:o.default.shape({answers:o.default.arrayOf(o.default.integer)}).def((function(){return{answers:[]}})),id:o.default.integer.required,title:o.default.string.def(""),type:o.default.shape({id:o.default.integer,value:o.default.string}).loose.required,variants:o.default.arrayOf(o.default.shape({id:o.default.integer,caption:o.default.string,captionShort:o.default.string}).loose).required,required:o.default.bool.def(!1)},data:function(){return{hoveredVariant:null,activeVariant:null,draggingVariant:null,avatarX:0}},computed:{variantsLength:function(){return this.variants.length},previewVariant:function(){return this.hoveredVariant||this.activeVariant||null},isPreviewVariantActive:function(){return this.activeVariant&&(!this.hoveredVariant||this.activeVariant.id===this.hoveredVariant.id)}},watch:{value:function(t){this.updateActiveVariant(t)}},created:function(){this.updateActiveVariant(this.value)},methods:{isCaptionVisible:function(t,e){return t<5&&!this.isMobile||(0===e||e===t-1||5===t&&2===e)},isActiveVariant:function(t){return!this.draggingVariant&&(!!this.activeVariant&&this.activeVariant.id===t.id)},onVariantMouseEnter:function(t){this.isMobile||(this.hoveredVariant=t)},onVariantMouseLeave:function(){this.hoveredVariant=null},onVariantClick:function(t){this.setActiveVariant(t),this.$emit("variantClick")},onVariantMouseDown:function(t,e){this.activeVariant&&this.activeVariant.id===e.id&&(this.avatarX=this.calculateAvatarPosition(t),this.draggingVariant=e,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))},onMouseUp:function(t){var e=this.calculateAvatarPosition(t),n=this.chooseActiveVariant(e);n&&this.setActiveVariant(n),this.draggingVariant=null,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onLineClick:function(t){var e=this.calculateAvatarPosition(t),n=this.chooseActiveVariant(e);n&&this.setActiveVariant(n)},onMouseMove:function(t){this.draggingVariant&&(this.avatarX=this.calculateAvatarPosition(t))},calculateAvatarPosition:function(t){var e=this.$refs.root;if(e){var n=e.offsetWidth,o=e.getBoundingClientRect().left||0,r=t.pageX-o;return r<4&&(r=4),r>n-4&&(r=n-4),r}return 0},chooseActiveVariant:function(t){var e=this,n=this.$refs.root.offsetWidth/(this.variantsLength-1),o=0,r=!1,l=null;return this.variants.forEach((function(c,d){var f=0===d,h=d===e.variantsLength-1;(o+=f||h?n/2:n)>t&&!r&&(r=!0,l=c)})),l},setActiveVariant:function(t){this.activeVariant=t,this.$emit("input",{answers:[t.id]})},updateActiveVariant:function(t){var e=d()(t,"answers")||null;if(l()(e))this.activeVariant=null;else if(Array.isArray(e)){var n=e[0],o=this.variants.find((function(t){return t.id===n}));o&&(this.activeVariant=o)}}}},h=n("c15f5"),v=n("b429c");var component=Object(v.a)(f,(function(){var t,e,n,o=this,r=o.$createElement,l=o._self._c||r;return l("div",{ref:"root",class:[o.$style.contextualQuestion,(t={},t[o.$style.mobile]=o.isMobile,t)]},[l("div",{class:o.$style.header},[o.title?l("div",{class:o.$style.title},[o._v("\n      "+o._s(o.title)+":\n    ")]):o._e(),o._v(" "),l("div",{class:o.$style.previewWrapper},[o.isMobile&&!o.previewVariant?l("div",{class:o.$style.previewInfo},[o._v("\n        выберите подходящий вариант\n      ")]):o._e(),o._v(" "),o.previewVariant?l("div",{class:[o.$style.previewVariant,(e={},e[o.$style.previewVariantActive]=o.isPreviewVariantActive,e)]},[o._v("\n        "+o._s(o.previewVariant.caption)+"\n      ")]):o._e()])]),o._v(" "),l("div",{class:o.$style.line},[l("div",{class:o.$style.interactiveLineZone,on:{click:function(t){return o.onLineClick(t)}}}),o._v(" "),l("div",{class:o.$style.variants},o._l(o.variants,(function(t,e){var n,r;return l("div",{key:t.id,class:o.$style.variant},[l("div",{class:[o.$style.interactiveZone,(n={},n[o.$style.interactiveZoneHover]=o.hoveredVariant&&o.hoveredVariant.id===t.id,n)],on:{click:function(e){return o.onVariantClick(t)},mousedown:function(e){return o.onVariantMouseDown(e,t)},mouseenter:function(e){return o.onVariantMouseEnter(t)},mouseleave:function(e){return o.onVariantMouseLeave(t)}}},[l("input",{directives:[{name:"model",rawName:"v-model",value:o.activeVariant,expression:"activeVariant"}],class:o.$style.input,attrs:{name:"contextualQuestion"+o.id,type:"radio"},domProps:{value:t,checked:o._q(o.activeVariant,t)},on:{change:function(e){o.activeVariant=t}}}),o._v(" "),l("div",{class:[o.$style.circle,(r={},r[o.$style.circleActive]=o.isActiveVariant(t),r)]}),o._v(" "),o.isCaptionVisible(o.variantsLength,e)?l("div",{class:o.$style.caption},[o._v("\n            "+o._s(o.isMobile?t.captionShort:t.caption)+"\n          ")]):o._e()])])})),0),o._v(" "),l("div",{class:[o.$style.circle,o.$style.circleActive,o.$style.circleAvatar,(n={},n[o.$style.circleAvatarActive]=o.draggingVariant,n)],style:{left:o.avatarX+"px"}})])])}),[],!1,(function(t){this.$style=h.default.locals||h.default}),null,null);e.a=component.exports},"38d66":function(t,e,n){"use strict";n.r(e);var o=n("d68e9"),r=n("d3037"),l=n("1ffde"),c=n("58164"),d=n("0ba6f"),f=n("5bedd"),h=n("cfe3a"),v=n("44320"),m=n("aa9c1"),y=n("b175e"),x={name:"RateBoughtItemsWidgetCarousel",components:{OzCarousel:o.OzCarousel,OzCarouselItem:o.OzCarouselItem,ItemCard:h.a,AdultCard:v.a,Processing:f.a},props:{products:d.default.arrayOf(y.a).isRequired,showAdult:d.default.bool.def(!1),adultProductsCount:d.default.number.def(0),simpleProductsCount:d.default.number.def(0),processingIndex:d.default.number.def(-1),notRateErrorIndex:d.default.number.def(-1),activeIndex:d.default.number.def(0),currentRating:d.default.number.def(0),inPopup:d.default.bool.def(!1),ratingError:d.default.string.def(""),slidesCount:d.default.number.def(m.a),isMobile:d.default.bool.def(!1)},data:function(){return{slideIndex:0,transition:0}},mounted:function(){this.slideIndex=this.activeIndex},methods:{notRate:function(t,e){this.$emit("notRate",t,e)},setRating:function(t){this.$emit("setRating",t)},setShowAdult:function(){this.$emit("setShowAdult"),this.swiperSlideTo(this.simpleProductsCount)},slideRight:function(){this.transition=300,this.slideIndex>0&&(this.slideIndex=this.slideIndex-1,this.$emit("onSlideChange",this.slideIndex))},slideLeft:function(){this.transition=300,this.slideIndex<this.products.length-1&&(this.slideIndex=this.slideIndex+1,this.$emit("onSlideChange",this.slideIndex))}}},w=n("53b16"),_=n("b429c");var I=Object(_.a)(x,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return e.products?o("OzCarousel",{directives:[{name:"touch",rawName:"v-touch:swipe.right",value:e.slideRight,expression:"slideRight",arg:"swipe",modifiers:{right:!0}},{name:"touch",rawName:"v-touch:swipe.left",value:e.slideLeft,expression:"slideLeft",arg:"swipe",modifiers:{left:!0}}],class:[e.$style.rateBoughtItemsCarousel,e.$style.customOverflow,(t={},t[e.$style.inPopup]=e.inPopup,t)],attrs:{"slide-index":e.slideIndex,navigation:!1,transition:e.transition}},e._l(e.products,(function(t,n){return o("OzCarouselItem",{key:"rate-bought-item-card-"+n,class:e.$style.slide},[t.isAdultContent&&!e.showAdult?[o("AdultCard",{attrs:{count:e.adultProductsCount,"image-size":120,"in-popup":e.inPopup,"is-lazy-image":n>e.slidesCount-1,"is-mobile":e.isMobile,product:t},on:{show:e.setShowAdult}})]:[o("ItemCard",{attrs:{"current-rating":e.currentRating,"image-size":120,"is-lazy-image":n>e.slidesCount-1,"not-rate-error":n===e.notRateErrorIndex,"in-popup":e.inPopup,product:t,"rating-error":e.ratingError,"is-mobile":e.isMobile},on:{notRate:function(t){return e.notRate(t,!1)},setRating:e.setRating}}),e._v(" "),n===e.processingIndex?o("Processing",{class:e.$style.processing}):e._e()]],2)})),1):e._e()}),[],!1,(function(t){this.$style=w.default.locals||w.default}),null,null).exports,O=n("23f72"),C=n("ed000"),$=n("36f2c"),P=n("90699"),A=n("edffb"),z=n("9a072"),S={name:"RateBoughtItemsMobileCreate",components:{Carousel:I,MultiTextarea:O.a,UploadImages:C.a,Processing:f.a,OzTransition:o.OzTransition,OzNotification:o.OzNotification,ContextualQuestion:$.a,FormFooter:P.a},mixins:[c.a,A.a,z.a],props:{simpleProductsCount:d.default.number.def(0),processingIndex:d.default.number.def(-1),notRateErrorIndex:d.default.number.def(-1),notRateError:d.default.bool.def(!1),isMobile:d.default.bool.def(!1)},computed:{showContentWrapper:function(){return!this.activeProduct.isAdultContent||this.activeProduct.isAdultContent&&this.showAdult}},methods:{setShowAdult:function(){this.$emit("setShowAdult")},onSlideChange:function(t){var e=t||0,n=this.products[e];this.changeActiveProduct(n,e)},setRating:function(data){data?(this.rating=data.rating,this.errors.comment=""):this.rating=0}}},E=n("955fc");var k=Object(_.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",class:t.$style.container,attrs:{novalidate:"",tabindex:"-1"},on:{submit:function(e){return e.preventDefault(),t.createReview(e)}}},[n("div",{staticClass:"content"},[n("div",{class:t.$style.title},[t._v("\n      Напишите отзыв о товаре\n    ")]),t._v(" "),n("div",{class:t.$style.description},[t._v("\n      "+t._s(t.countProductText)+" "+t._s(t.countProductAdditionalText)+" вашей оценки\n    ")]),t._v(" "),t.additionalNotification?n("OzNotification",{class:t.$style.notification,attrs:{icon:t.InfoIcon}},[t._v("\n      "+t._s(t.additionalNotification)+"\n    ")]):t._e(),t._v(" "),n("Carousel",{attrs:{products:t.products,"show-adult":t.showAdult,"active-index":t.activeProductIndex,"adult-products-count":t.adultProductsCount,"simple-products-count":t.simpleProductsCount,"processing-index":t.processingIndex,"not-rate-error-index":t.notRateErrorIndex,"rating-error":t.errors.rating,"current-rating":t.rating,"in-popup":!0,"is-mobile":t.isMobile},on:{setShowAdult:t.setShowAdult,setRating:t.setRating,notRate:t.notRate,onSlideChange:t.onSlideChange}}),t._v(" "),n("OzTransition",[t.showContentWrapper?n("div",{class:t.$style.contentWrapper},[n("MultiTextarea",{class:t.$style.commentField,attrs:{"error-message":t.errors.comment,"display-type":"separated","parts-of-comment":t.partsOfComment,error:Boolean(t.errors.comment),"min-height":32,"max-height":250,autosize:!0,"show-notice":!0},on:{focus:t.onFocus},model:{value:t.commentModel,callback:function(e){t.commentModel=e},expression:"commentModel"}}),t._v(" "),n("UploadImages",{class:t.$style.photos,attrs:{"display-type":"narrow"},on:{loading:function(e){t.isPhotosLoading=e}},model:{value:t.photos,callback:function(e){t.photos=e},expression:"photos"}}),t._v(" "),t.videoSettings?n("UploadVideos",t._b({class:t.$style.videos,attrs:{"is-mobile":!0},on:{loading:function(e){t.isVideosLoading=e}},model:{value:t.videos,callback:function(e){t.videos=e},expression:"videos"}},"UploadVideos",t.videoSettings,!1)):t._e(),t._v(" "),t.contextQuestions.length?n("div",{class:t.$style.contextQuestions},t._l(t.contextQuestions,(function(e){return n("ContextualQuestion",t._b({key:e.id,class:t.$style.contextualQuestion,model:{value:t.ctxAnswers[e.id],callback:function(n){t.$set(t.ctxAnswers,e.id,n)},expression:"ctxAnswers[question.id]"}},"ContextualQuestion",e,!1))})),1):t._e(),t._v(" "),n("FormFooter",{class:t.$style.footer,attrs:{"display-type":"narrow",user:t.author,"is-anonymous":t.isAnonymous,"is-created":t.created,"is-creating":t.creating,"is-photos-loading":t.isPhotosLoading,"has-error":t.serverError,"publishing-policy":t.publishingPolicy},on:{changeAnonymous:function(e){return t.changeAnonymous(e)}}})],1):t._e()])],1),t._v(" "),t.processing||t.creating?n("Processing"):t._e()],1)}),[],!1,(function(t){this.$style=E.default.locals||E.default}),null,null).exports,R=r.a.extend({name:"RateBoughtItemsMobileWidget",components:{Carousel:I,Create:k,OzModal:o.OzModal},mixins:[l.a,c.a],methods:{onModalClose:function(){this.activeChoice=null}}}),T=n("1e4d8");var V=Object(_.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalProductCount?n("section",{directives:[{name:"qa",rawName:"v-qa:id",value:"rateBoughtItems",expression:"'rateBoughtItems'",arg:"id"}],class:[t.$style.rateBoughtItemsWrapper]},[n("div",{class:t.$style.container},[n("h1",{class:t.$style.title},[t._v("\n      "+t._s(t.countProductText)+" "+t._s(t.countProductAdditionalText)+" оценки\n    ")]),t._v(" "),n("p",{class:t.$style.description},[t._v("\n      Оставьте отзыв, чтобы помочь другим покупателям сделать выбор\n    ")]),t._v(" "),n("Carousel",{attrs:{products:t.products,"show-adult":t.showAdult,"adult-products-count":t.adultProductsCount,"simple-products-count":t.simpleProductsCount,"processing-index":t.processingIndex,"not-rate-error-index":t.notRateErrorIndex,"slides-count":t.slidesCount,"is-mobile":t.isMobile},on:{setShowAdult:t.doSetShowAdult,setRating:t.setRating,notRate:t.notRateCarousel}}),t._v(" "),t.activeChoice?n("OzModal",{attrs:{theme:"empty","auto-focus":!1,"is-mobile-theme":!0},on:{close:t.onModalClose}},[n("Create",{attrs:{"active-choice":t.activeChoice,products:t.products,"adult-products-count":t.adultProductsCount,"simple-products-count":t.simpleProductsCount,processing:-1!==t.processingIndex,"processing-index":t.processingIndex,"not-rate-error-index":t.notRateErrorIndex,"not-rate-error":t.showNotRateError,"show-adult":t.showAdult,"total-product-count":t.totalProductCount,user:t.user,"publishing-policy":t.publishingPolicy,"create-action":t.widgetState.createReviewAction,"fields-settings":t.widgetState.validationRulesByRating,"additional-notification":t.widgetState.additionalNotification,"is-mobile":t.isMobile,"video-settings":t.widgetState.videoSettings},on:{changeActiveProduct:t.changeActiveProduct,notRate:function(e){return t.notRatePopup(e,!0)},showAdult:function(e){return t.setShowAdult(!0)},created:t.reviewCreated,setShowAdult:function(e){return t.setShowAdult(!0)},changeAnonymous:function(e){return t.changeAnonymous(e)}}})],1):t._e()],1)]):t._e()}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null);e.default=V.exports},"39fac":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"m",(function(){return r})),n.d(e,"t",(function(){return l})),n.d(e,"j",(function(){return c})),n.d(e,"r",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"a",(function(){return h})),n.d(e,"u",(function(){return v})),n.d(e,"v",(function(){return m})),n.d(e,"i",(function(){return y})),n.d(e,"g",(function(){return x})),n.d(e,"f",(function(){return w})),n.d(e,"s",(function(){return _})),n.d(e,"o",(function(){return I})),n.d(e,"q",(function(){return O})),n.d(e,"d",(function(){return C})),n.d(e,"b",(function(){return $})),n.d(e,"c",(function(){return P})),n.d(e,"n",(function(){return A})),n.d(e,"p",(function(){return z})),n.d(e,"l",(function(){return S})),n.d(e,"h",(function(){return E}));var o="createComment",r="rpReportAbuse",l="rpSetOpinionUsefulness",c="rpDeleteMyReview",d="rpImageUpload",f="rpGetCommentsByReviewId",h="rpIgnoreItem",v="UNUSEFUL",m="USEFUL",y="usefulness_desc",x="Пользователь OZON",w="П",_="rdImageUpload",I="reviewsSubscribeV1",O="reviewsUnsubscribeV1",C="reviews/CHANGE_SORTING_REVIEWS",$="reviews/CHANGE_FILTERS_REVIEWS",P="reviews/CHANGE_REVIEW_VARIANT_MODE",A="createReviewForm",z="3000",S="Этот пользователь может предоставлять разъяснения, официальную информацию и консультировать по вопросам, касающимся товаров.",E="Оцените покупку"},"3af50":function(t,e,n){t.exports={imageWrapper:"e2v7",delete:"e2v8",icon:"e2v9",image:"e2w",imageCdn:"e2w0",overlay:"e2w1",loader:"e2w2",error:"e2w3",mobile:"e2w4"}},"3bb8b":function(t,e,n){"use strict";var o=n("74916"),r=n.n(o);e.default=r.a},"3fe1b":function(t,e,n){t.exports={label:"g0n5",active:"g0n6",row:"g0n7",rating:"g0n8",column:"g0n9"}},"40f1a":function(t,e,n){"use strict";var o=n("4066f"),r=n.n(o),l=n("279f1"),c=n.n(l),d=n("0ba6f"),f=n("d68e9"),h=n("34271"),v=n("39fac"),m=["none","row","column"],y={name:"Rating",functional:!0,props:{rating:d.default.number.def(0),ratingError:d.default.string.def(""),themeLabel:d.default.oneOf(m).def(m[0]),size:d.default.string.def("m")},render:function(t,e){var n=e.props,o=e.$style,l=e.listeners,data=e.data,d=e._v,m=n.rating,y=n.ratingError,x=n.themeLabel,w=n.size,_=y&&!m?[y]:[],label=m?h.b[m-1]:v.h;return t("div",{class:[data.class||"",o[x]]},[t(f.OzField,{attrs:{errors:_,"prevent-default-click":!0},class:o.rating},[t(f.OzRating,{attrs:{"qa-id":"ratingReviewStar",value:m,size:w},on:{input:l.input}})])].concat(r()("row"===x||"column"===x&&m?[t("span",{class:[o.label,c()({},o.active,m)]},[d(label)])]:[])))}},x=n("dd64d"),w=n("b429c");var component=Object(w.a)(y,void 0,void 0,!1,(function(t){this.$style=x.default.locals||x.default}),null,null);e.a=component.exports},44320:function(t,e,n){"use strict";var o=n("0ba6f"),r=n("c7aac"),l=n("d68e9"),c=n("755d8"),d=n("b175e"),f={components:{AdultImage:c.a,OzButton:l.OzButton},props:{product:d.a,displayType:o.default.string.def("displayCard"),imageSize:o.default.number.def(80),count:o.default.number.def(1),isLazyImage:o.default.bool.def(!0),inPopup:o.default.bool.def(!1),isMobile:o.default.bool.def(!1)},computed:{productText:function(){return Object(r.f)(this.count,["товар","товара","товаров"])},buttonText:function(){return"Показать "+(this.count>1?"товары":"товар")},displayCardButtonVisible:function(){return"displayCard"===this.displayType&&!this.inPopup},imageType:function(){return"displayCard"===this.displayType?"normal":"large"}},methods:{show:function(){this.$emit("show")}}},h=n("f42ee"),v=n("30da9"),m=n("b429c");var component=Object(m.a)(f,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.displayType,e.$style[e.displayType],e.commonStyle[e.displayType],(t={"in-popup":e.inPopup},t[e.commonStyle.inPopup]=e.inPopup,t[e.$style.inPopup]=e.inPopup,t[e.commonStyle.mobile]=e.isMobile,t)]},[o("div",{class:[e.$style.content,e.commonStyle.content]},[o("AdultImage",{class:[e.commonStyle.imageWrapper,e.$style.adultImage],attrs:{"is-lazy-image":e.isLazyImage,size:e.imageSize,"image-type":e.imageType,src:e.product.image.url}}),e._v(" "),o("div",{class:[e.$style.text,e.commonStyle.text]},[e._v("\n      Среди ваших покупок есть "+e._s(e.productText)+" из категории «18+»\n      "),e.displayCardButtonVisible?e._e():o("span",{class:e.$style.notice},[e._v("\n        Отзыв на товар вы можете оставить анонимно\n      ")])])],1),e._v(" "),o("div",{class:[e.commonStyle.actions,e.$style.actions]},[e.displayCardButtonVisible?o("OzButton",{class:[e.$style.action,e.commonStyle.action],attrs:{theme:"inline",text:e.buttonText},on:{click:e.show}}):o("OzButton",{class:[e.$style.action,e.commonStyle.action],attrs:{size:"xl",text:e.buttonText},on:{click:e.show}})],1)])}),[],!1,(function(t){this.commonStyle=h.default.locals||h.default,this.$style=v.default.locals||v.default}),null,null);e.a=component.exports},"53b16":function(t,e,n){"use strict";var o=n("5f8d4"),r=n.n(o);e.default=r.a},"54bb5":function(t,e,n){"use strict";var o=n("2c013"),r=n.n(o);e.default=r.a},56527:function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]])}return n};t.exports={functional:!0,render:function(t,e){var r=e._c,s=(e._v,e.data),a=e.children,l=void 0===a?[]:a,c=s.class,i=s.staticClass,d=s.style,f=s.staticStyle,h=s.attrs,v=void 0===h?{}:h,p=o(s,["class","staticClass","style","staticStyle","attrs"]);return r("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v)},p),l.concat([r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 17V4h13v3a1 1 0 102 0V2H2v17h5a1 1 0 100-2H4zm8 1a1 1 0 10-2 0v4h4a1 1 0 100-2h-2v-2zm9-1a1 1 0 00-1 1v2h-2a1 1 0 100 2h4v-4a1 1 0 00-1-1zm-1-5v2a1 1 0 102 0v-4h-4a1 1 0 100 2h2zm-8 2v-2h2a1 1 0 100-2h-4v4a1 1 0 102 0z",fill:"currentColor"}})]))}}},58164:function(t,e,n){"use strict";var o=n("c7aac");e.a={computed:{countProductText:function(){return Object(o.f)(this.totalProductCount,["товар","товара","товаров"])},countProductAdditionalText:function(){return Object(o.f)(this.totalProductCount,["ожидает","ожидают","ожидают"],!1)}}}},"5bedd":function(t,e,n){"use strict";var o=n("f24c5"),r={components:{Loader:n.n(o).a}},l=n("d75c5"),c=n("b429c");var component=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.$style.creating},[e("Loader",{class:this.$style.loader})],1)}),[],!1,(function(t){this.$style=l.default.locals||l.default}),null,null);e.a=component.exports},"5e08c":function(t,e,n){t.exports={control:"g0l1",block:"g0l2",row:"g0l3"}},"5f8d4":function(t,e,n){t.exports={rateBoughtItemsCarousel:"g0a",customOverflow:"g0a0",inPopup:"g0a1",processing:"g0a2",slide:"g0a3"}},"66ca4":function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]])}return n};t.exports={functional:!0,render:function(t,e){var r=e._c,s=(e._v,e.data),a=e.children,l=void 0===a?[]:a,c=s.class,d=s.staticClass,i=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,v=o(s,["class","staticClass","style","staticStyle","attrs"]);return r("svg",n({class:[c,d],style:[i,f],attrs:Object.assign({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14A6 6 0 118 2a6 6 0 010 12zm0-7a1 1 0 011 1v3a1 1 0 11-2 0V8a1 1 0 011-1zm1-2a1 1 0 10-2 0 1 1 0 002 0z",fill:"currentColor"}}),r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14A6 6 0 118 2a6 6 0 010 12zm0-7a1 1 0 011 1v3a1 1 0 11-2 0V8a1 1 0 011-1zm1-2a1 1 0 10-2 0 1 1 0 002 0z",fill:"currentColor"}})]))}}},"67c9b":function(t,e,n){"use strict";var o=n("8fa0d"),r=n.n(o);e.default=r.a},68470:function(t,e,n){t.exports={multitext:"g0j8",error:"g0j9",separated:"g0k",multitextTitle:"g0k0",multitextTextarea:"g0k1",last:"g0k2",combined:"g0k3",notice:"g0k4"}},"6b668":function(t,e,n){"use strict";e.a={inject:{isMobile:{default:!1}}}},"6ef88":function(t,e,n){t.exports={success:"e2w9",error:"e2x"}},"717ea":function(t,e,n){"use strict";var o=n("0ba6f"),r=["block","row"],l={name:"AnonymousToggle",components:{OzCheckbox:n("d68e9").OzCheckbox},props:{value:o.default.bool.def(!1),toggleLabel:o.default.string.def("Скрыть мои данные в отзыве"),type:o.default.oneOf(r).def(r[0])}},c=n("1818f"),d=n("b429c");var component=Object(d.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("OzCheckbox",{directives:[{name:"qa",rawName:"v-qa:id",value:"toggler",expression:"'toggler'",arg:"id"}],class:[t.$style.control,t.$style[t.type]],attrs:{theme:"toggle","control-position":"right",checked:t.value},on:{change:function(e){return t.$emit("input",!t.value)}}},[t._v("\n  "+t._s(t.toggleLabel)+"\n")])}),[],!1,(function(t){this.$style=c.default.locals||c.default}),null,null);e.a=component.exports},74916:function(t,e,n){t.exports={displayCard:"g0g8",promo:"g0g9",content:"g0h",mobile:"g0h0"}},"755d8":function(t,e,n){"use strict";var o=n("0ba6f"),r=n("aa218"),l=n.n(r),c={components:{OzImage:n("d68e9").OzImage,AdultIcon:l.a},props:{imageType:o.default.string.def("normal"),src:o.default.string.isRequired,isLazyImage:o.default.bool.def(!0),size:o.default.number.def(80)}},d=n("f86f6"),f=n("b429c");var component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.imageWrapper},[n("OzImage",{class:[t.$style.image,t.$style[t.imageType]],attrs:{size:t.size,lazy:t.isLazyImage,src:t.src,"use-cdn":!0}}),t._v(" "),n("div",{class:t.$style.overlay}),t._v(" "),n("div",{class:t.$style.icon},[n("AdultIcon")],1)],1)}),[],!1,(function(t){this.$style=d.default.locals||d.default}),null,null);e.a=component.exports},"78bf0":function(t,e,n){"use strict";var o=n("68470"),r=n.n(o);e.default=r.a},79735:function(t,e,n){"use strict";var o=n("ff287"),r=n.n(o),l=n("3ced6"),c=n("d68e9"),d=n("66ca4"),f=n.n(d),h=n("b175e"),v={components:{ComposerLink:l.a,Icon:f.a,OzPopover:c.OzPopover},props:{promo:h.b.def(null)},computed:{badgeText:function(){return r()(this,"promo.badge.text")||""},text:function(){return r()(this,"promo.text")||""},link:function(){return r()(this,"promo.link")||null},badgeBackgroundColor:function(){return r()(this,"promo.badge.backgroundColor")||""},badgeStyles:function(){return{backgroundColor:this.badgeBackgroundColor||this.$style.exBackgroundColor}},component:function(){return"_self"===(r()(this,"link.target")||"_blank")?"ComposerLink":"a"}}},m=n("e6c07"),y=n("b429c");var component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.promo},[t.badgeText?n("div",{class:t.$style.badge},[n("span",{class:t.$style.badgeText,style:t.badgeStyles},[t._v(t._s(t.badgeText))]),t._v(" "),n("OzPopover",{attrs:{trigger:"click"}},[n("Icon",{class:t.$style.badgeIcon}),t._v(" "),n("template",{slot:"popover"},[n("div",{class:t.$style.popoverText},[t._v(t._s(t.text))]),t._v(" "),t.link?n(t.component,{tag:"component",class:t.$style.popoverLink,attrs:{target:t.link.target,href:t.link.url}},[t._v("\n          "+t._s(t.link.text)+"\n        ")]):t._e()],1)],2)],1):t._e()])}),[],!1,(function(t){this.$style=m.default.locals||m.default}),null,null);e.a=component.exports},"7c91a":function(t,e,n){"use strict";var o=n("dbc34"),r=n.n(o);e.default=r.a},"80c83":function(t,e,n){t.exports={uploadImages:"e2m",title:"e2m0",count:"e2m1",container:"e2m2",containerHasImage:"e2m3",info:"e2m4",text:"e2m5",note:"e2m6",buttonHasImage:"e2m7",uploadImage:"e2m8",error:"e2m9",narrow:"e2n",mobile:"e2n0"}},"835ab":function(t,e,n){"use strict";var o=n("34bf8"),r=n.n(o);e.default=r.a},"889e0":function(t,e,n){"use strict";var o=n("04a38"),r=n.n(o);e.default=r.a},"8bbbb":function(t,e,n){"use strict";var o,r,l=n("0ba6f"),c=n("b2560"),d=n.n(c),f=n("08c19"),h=n.n(f),v=n("6b668");!function(t){t.IMAGE="image",t.VIDEO="video"}(r||(r={}));var m=((o={})[r.IMAGE]="PhotoIcon",o[r.VIDEO]="VideoIcon",o),y={name:"UploadPhotos",components:{PhotoIcon:d.a,VideoIcon:h.a},mixins:[v.a],props:{uploadType:l.default.oneOf(Object.values(r)).def(r.IMAGE),acceptTypes:l.default.string.def(".jpg, .jpeg, .png")},data:function(){return{ICON_MAP:m}},methods:{onChange:function(t){var e=t.target.files;this.$emit("upload",e),this.$refs.uploadInput.value=""}}},x=n("ffa91"),w=n("b429c");var component=Object(w.a)(y,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.$style.button,(t={},t[e.$style.mobile]=e.isMobile,t)]},[o("input",{directives:[{name:"qa",rawName:"v-qa:id",value:"uploaded-"+e.uploadType,expression:"`uploaded-${uploadType}`",arg:"id"}],ref:"uploadInput",class:e.$style.input,attrs:{accept:e.acceptTypes,multiple:"",type:"file"},on:{change:e.onChange}}),e._v(" "),o("span",{class:e.$style.icon},[o(e.ICON_MAP[e.uploadType],{tag:"component"})],1)])}),[],!1,(function(t){this.$style=x.default.locals||x.default}),null,null);e.a=component.exports},"8d0b0":function(t,e,n){"use strict";var o=n("0ba6f"),r=n("cba5f"),l=n("d0f58"),c=n("8bbbb"),d=n("6b74f"),f=n.n(d),h=n("bcb05"),v=n.n(h),m=n("d68e9"),y={name:"CircleLoader",props:{isLoading:o.default.bool.def(!1),percents:o.default.number.def(0)}},x=n("ae217"),w=n("b429c");var _=Object(w.a)(y,(function(){var t,e,n=this,o=n.$createElement,r=n._self._c||o;return r("div",{class:n.$style.loader},[r("svg",{class:n.$style.circleLoader,attrs:{viewBox:"25 25 50 50"}},[r("circle",{class:[n.$style.loaderPath,(t={},t[n.$style.loading]=n.isLoading,t),(e={},e[n.$style.percents]=n.percents,e)],style:n.percents?{"stroke-dashoffset":125-125*n.percents/100}:{},attrs:{cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":"2"}})])])}),[],!1,(function(t){this.$style=x.default.locals||x.default}),null,null).exports,I=n("ececd"),O={name:"VideoPreview",components:{CrossIcon:f.a,RotateIcon:v.a,OzButton:m.OzButton,CircleLoader:_},props:{isMobile:o.default.bool.def(!1),loading:o.default.bool.def(!1),reload:o.default.bool.def(!1),finished:o.default.bool.def(!1),percentLoaded:o.default.number.def(0),uploadId:o.default.string.def(""),previewUrl:o.default.string.def(""),src:o.default.string.def("")},data:function(){return{preview:""}},watch:{previewUrl:{handler:function(t){this.preview=t||I.a},immediate:!0}},methods:{handlePreviewError:function(){this.preview=I.a}}},C=n("0d00a");var $=Object(w.a)(O,(function(){var t,e,n=this,o=n.$createElement,r=n._self._c||o;return r("div",{class:[n.$style.videoWrapper,(t={},t[n.$style.mobile]=n.isMobile,t),(e={},e[n.$style.loading]=!n.finished,e)]},[r("video",n._b({class:n.$style.video,on:{error:n.handlePreviewError}},"video",n.previewUrl?{poster:n.preview}:null,!1),[r("source",{attrs:{src:n.src,type:"video/mp4"}}),n._v(" "),r("source",{attrs:{src:n.src,type:"video/ogg"}}),n._v(" "),r("source",{attrs:{src:n.src,type:"video/webm"}}),n._v("\n    Ваш браузер не поддерживает HTML5 тэг видео\n  ")]),n._v(" "),n.finished?r("OzButton",{class:n.$style.delete,attrs:{theme:"empty","aria-label":"Удалить видео"},on:{click:function(t){return n.$emit("delete")}}},[r("template",{slot:"content"},[r("CrossIcon")],1)],2):r("OzButton",{class:n.$style.reloadBtn,attrs:{theme:"empty","aria-label":(n.loading?"Удалить":"Перезагрузить")+" видео"},on:{click:function(t){return n.$emit(n.loading?"delete":"reload")}}},[r("div",{class:n.$style.reload,attrs:{slot:"content"},slot:"content"},[n.reload?r("RotateIcon",{class:n.$style.icon}):r("div",[r("CircleLoader",{attrs:{"is-loading":!n.uploadId,percents:n.percentLoaded}}),n._v(" "),r("CrossIcon",{class:n.$style.crossIcon})],1)],1)])],1)}),[],!1,(function(t){this.$style=C.default.locals||C.default}),null,null).exports,P=function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function c(t){try{f(o.next(t))}catch(t){l(t)}}function d(t){try{f(o.throw(t))}catch(t){l(t)}}function f(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}f((o=o.apply(t,e||[])).next())}))},A=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=body.call(t,r)}catch(t){l=[6,t],n=0}finally{e=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},z=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l},S=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(z(arguments[i]));return t},E=20,k=[],R={name:"UploadVideos",components:{DragAndDrop:l.a,UploadButton:c.a,Notification:r.a,VideoPreview:$},model:{prop:"videos",event:"change"},props:{videos:o.default.array.def([]),isMobile:o.default.bool.def(!1),title:o.default.string.def("Нажмите на кнопку или перетащите видео в эту область"),subtitle:o.default.string.def("до 3 видео длительностью не более 5 минут"),maxVideosCount:o.default.number.def(3)},data:function(){return{preparedFiles:[],hasError:!1,errorMessage:{type:"error",text:""}}},watch:{videos:{handler:function(t){t&&t.length?this.preparedFiles=S(t):this.preparedFiles=[]},immediate:!0}},mounted:function(){window.addEventListener("offline",this.onOffline)},beforeDestroy:function(){clearTimeout(this.errorTimer),clearTimeout(this.offlineTimer),clearTimeout(this.restartSocketTimer),window.removeEventListener("offline",this.onOffline)},methods:{onUpload:function(t){var e=this;if(t&&!(this.preparedFiles&&this.preparedFiles.length>=this.maxVideosCount)){var n=Array.from(t).slice(0,this.maxVideosCount-this.preparedFiles.length).filter((function(t){return!e.preparedFiles.find((function(e){return e.name+e.size===t.name+t.size}))}));n&&n.length&&(this.$emit("loading",!0),n=n.map((function(t){return new I.b(t,e.$api)})),this.preparedFiles=S(this.preparedFiles,n),this.$emit("change",this.preparedFiles),n.forEach((function(t){e.checkIsFileLoading(t.name+t.size,!0),e.processVideoUpload(t)})))}},processVideoUpload:function(t){return P(this,void 0,void 0,(function(){var e,n,o=this;return A(this,(function(r){switch(r.label){case 0:return[4,t.checkServerValidation()];case 1:if(!(e=r.sent()))return[2];if(void 0===e.valid){if(k.indexOf(t.name+t.size)<0)return e.socket.close(),[2];if(e.restartCount>0)return e.restartCount-=1,this.restartSocketTimer=setTimeout((function(){e.socket.close(),o.processVideoUpload(e)}),300),[2];t.valid=!1,t.loading=!1,t.reload=!0,t.socket.close()}return e.valid?[3,2]:(this.setFileError(e,this.errorMessage.text.concat(t.name+": "+t.error+" ")),n=this.preparedFiles.findIndex((function(e){return e.name+e.size===t.name+t.size})),this.deleteVideo(t,n),[3,5]);case 2:return[4,this.getVideoWithUploadId(e)];case 3:return e=r.sent(),[4,this.uploadVideo(e)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},getVideoWithUploadId:function(t){return P(this,void 0,void 0,(function(){var e,n,o;return A(this,(function(r){switch(r.label){case 0:return[4,t.getVideoWithUploadId()];case 1:return e=r.sent(),n=e.file,(o=e.error)&&this.setFileError(t,this.errorMessage.text.concat(o+" ")),[2,n]}}))}))},uploadVideo:function(t){return P(this,void 0,void 0,(function(){var e,n,o,r;return A(this,(function(l){switch(l.label){case 0:return t&&t.uploadId?(this.checkIsFileLoading(t.name+t.size,!0),[4,t.uploadVideoToServer()]):[2];case 1:return e=l.sent(),n=e.error,o=e.file,r=e.position,n?this.processFileError(o,n,r):this.checkIsFileLoading(o.name+o.size),[2]}}))}))},deleteVideo:function(t,e){void 0===e&&(e=-1),e>-1&&(this.preparedFiles.splice(e,1),this.checkIsFileLoading(t.name+t.size)),this.$emit("change",this.preparedFiles)},setFileError:function(t,e){t.reload=!0,t.loading=!1,this.errorMessage.text=e,this.hasError=!0,this.resetError(),this.checkIsFileLoading(t.name+t.size)},processFileError:function(t,e,n){var o=this.preparedFiles.find((function(e){return e.uploadId===t.uploadId}));o&&(e&&(this.errorMessage.text=e,this.hasError=!0,this.resetError()),o.restartCount>0?(n>=0&&(t.pos=n),o.restartCount-=1,this.uploadVideo(t)):(o.reload=!0,o.loading=!1,this.checkIsFileLoading(t.name+t.size)))},resetError:function(){var t=this;this.errorTimer=setTimeout((function(){t.hasError=!1,t.errorMessage.text=""}),5e3)},onOffline:function(){var t=this;E<=0&&(!this.preparedFiles||this.preparedFiles.length)||(this.offlineTimer=this.setTimeout((function(){navigator.onLine?t.preparedFiles.forEach((function(e){!e.finished&&e.uploadId&&e.pos>=0&&t.retryVideo(e)})):(E-=1,t.onOffline())}),200))},checkIsFileLoading:function(t,e){void 0===e&&(e=!1);var n=k.indexOf(t);e&&n<0?k.push(t):!e&&n>=0&&k.splice(n,1),(!k||!k.length)&&this.$emit("loading",!1)},retryVideo:function(t){t.restartCount=20,t.loading=!0,t.reload=!1,t.error="",t.uploadId?this.uploadVideo(t):(this.checkIsFileLoading(t.name+t.size,!0),this.processVideoUpload(t))}}},T=n("67c9b");var V=Object(w.a)(R,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("DragAndDrop",{class:[e.$style.videoUploader,(t={},t[e.$style.mobile]=e.isMobile,t)],attrs:{message:"Перетащите видео сюда","drag-zone-type":"block"},on:{drop:e.onUpload}},[o("div",{class:e.$style.title},[e._v("\n    "+e._s(e.videos&&e.videos.length?"Загружены видео":"Добавьте видео")+"\n    "),e.videos&&e.videos.length?o("span",{class:e.$style.count},[e._v("\n      "+e._s(e.videos.length)+"/"+e._s(e.maxVideosCount)+"\n    ")]):e._e()]),e._v(" "),o("div",{class:e.$style.container},[e._l(e.videos,(function(video,t){return o("VideoPreview",{key:video.name+"-"+video.uploadId+"-"+t,attrs:{loading:video.loading,reload:video.reload,finished:video.finished,"percent-loaded":video.percentLoaded,"upload-id":video.uploadId,"preview-url":video.previewUrl,src:video.src,"is-mobile":e.isMobile},on:{delete:function(n){return e.deleteVideo(video,t)},reload:function(t){return e.retryVideo(video)}}})})),e._v(" "),e.videos&&e.videos.length<e.maxVideosCount?o("UploadButton",{attrs:{"upload-type":"video","accept-types":"video/*"},on:{upload:e.onUpload}}):e._e(),e._v(" "),e.videos&&!e.videos.length?o("div",{class:e.$style.info},[e.isMobile?e._e():o("div",{class:e.$style.text},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),o("div",{class:e.$style.note},[e._v("\n        "+e._s(e.subtitle)+"\n      ")])]):e._e()],2),e._v(" "),o("Notification",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],class:e.$style.error,attrs:{notification:e.errorMessage}})],1)}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null);e.a=V.exports},"8fa0d":function(t,e,n){t.exports={videoUploader:"g0q4",title:"g0q5",count:"g0q6",container:"g0q7",info:"g0q8",text:"g0q9",note:"g0r",error:"g0r0",mobile:"g0r1"}},90699:function(t,e,n){"use strict";var o=n("0ba6f"),r=n("ff287"),l=n.n(r),c=n("d68e9"),d=n("717ea"),f=n("d6fd6"),h=n("cba5f"),v=n("6b668"),m=["default","narrow"],y={name:"CreateReviewFormFooter",components:{OzButton:c.OzButton,ToggleAnonymous:d.a,UserAnonymous:f.a,Notification:h.a},mixins:[v.a],props:{displayType:o.default.oneOf(m).def(m[0]),user:o.default.string.def(""),isAnonymous:o.default.bool.def(!1),isCreated:o.default.bool.def(!1),isCreating:o.default.bool.def(!1),isPhotosLoading:o.default.bool.def(!1),hasError:o.default.bool.def(!1),publishingPolicy:o.default.shape({text:o.default.string,links:o.default.arrayOf(o.default.shape({text:o.default.string,url:o.default.string}))}).def(null)},data:function(){return{notificationError:{type:"error",text:"Произошла ошибка при отправке отзыва, попробуйте снова"},notificationSuccess:{type:"success",text:"Спасибо! Отзыв отправлен на проверку и скоро будет опубликован"}}},computed:{publishingPolicyText:function(){return l()(this,"publishingPolicy.text")||""},publishingPolicyLinks:function(){return l()(this,"publishingPolicy.links")||[]},publishingPolicyLinksLength:function(){return this.publishingPolicyLinks.length},linksString:function(){return this.publishingPolicyLinks.map((function(link){return'<a href="'+link.url+'" target="_blank">'+link.text+"</a>"})).join(", ")}}},x=n("b813f"),w=n("b429c");var component=Object(w.a)(y,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.$style.footer,e.$style[e.displayType],(t={},t[e.$style.mobile]=e.isMobile,t)]},[o("UserAnonymous",{class:e.$style.user,attrs:{"user-name":e.user,"is-anonymous":e.isAnonymous}}),e._v(" "),o("div",{class:e.$style.column},[o("div",{class:e.$style.controlsWrapper},[e.isCreated?o("Notification",{directives:[{name:"qa",rawName:"v-qa:id",value:"thanks-for-review",expression:"'thanks-for-review'",arg:"id"}],attrs:{notification:e.notificationSuccess}}):o("div",{class:e.$style.controls},[o("ToggleAnonymous",{class:e.$style.toggle,attrs:{value:e.isAnonymous},on:{input:function(t){return e.$emit("changeAnonymous",t)}}}),e._v(" "),o("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"submit-button",expression:"'submit-button'",arg:"id"}],class:e.$style.submitButton,attrs:{type:"submit",size:"xl",text:"Отправить отзыв",fill:e.isMobile,disabled:e.isPhotosLoading,loading:e.isCreating}})],1),e._v(" "),e.hasError?o("Notification",{class:e.$style.serverError,attrs:{notification:e.notificationError}}):e._e()],1),e._v(" "),e.publishingPolicy?o("div",{class:e.$style.note},[e._v("\n      "+e._s(e.publishingPolicyText)+"\n      "),e.publishingPolicyLinksLength?o("span",{domProps:{innerHTML:e._s(e.linksString)}}):e._e(),e._v(".\n    ")]):o("div",{class:e.$style.note},[e._v("\n      Перед отправкой отзыва, пожалуйста, ознакомьтесь с "),o("a",{attrs:{href:"https://docs.ozon.ru/common/pravila-prodayoi-i-rekvizity/pravila-publikatsii-otzyvov",target:"_blank"}},[e._v("правилами публикации.")])])])],1)}),[],!1,(function(t){this.$style=x.default.locals||x.default}),null,null);e.a=component.exports},"955fc":function(t,e,n){"use strict";var o=n("d087b"),r=n.n(o);e.default=r.a},"9a072":function(t,e,n){"use strict";var o=n("a1cf5"),r=n.n(o),l=n("370d9"),c=n("39fac");e.a={methods:{setModelToSessionStorage:function(t){l.a.setItem(c.n+"_"+t,{rating:this.rating,isAnonymous:this.isAnonymous,commentModel:this.commentModel,ctxAnswers:this.ctxAnswers,photos:this.photos})},getModelFromSessionStorage:function(t){return l.a.getItem(c.n+"_"+t)},resetModelContent:function(){this.rating=0,this.commentModel={positive:"",negative:"",comment:""},this.photos=[],this.videos=[],this.isAnonymous=!1,this.ctxAnswers={}},restoreModel:function(t){var e=this,n=["rating","isAnonymous","commentModel","ctxAnswers","photos","videos"];Object.keys(t).forEach((function(o){n.includes(o)&&t[o]&&(e[o]=t[o])}))},removeModelFromSessionStorage:function(t){l.a.removeItem(c.n+"_"+t)},needSetModelToSessionStorage:function(t){var e=Object.values(this.commentModel).filter(Boolean);!this.rating&&!this.isAnonymous&&r()(this.photos)&&r()(e)&&r()(Object.values(this.ctxAnswers))||this.setModelToSessionStorage(t)}}}},"9eb7c":function(t,e,n){t.exports={rateBoughtItemsWrapper:"gq",container:"gq0",title:"gq1",description:"gq2"}},aa9c1:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=3},ae217:function(t,e,n){"use strict";var o=n("c8dca"),r=n.n(o);e.default=r.a},b1404:function(t,e,n){t.exports={imageWrapper:"g0s3",image:"g0s4",large:"g0s5",overlay:"g0s6",icon:"g0s7"}},b175e:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f}));var o=n("0ba6f"),image=o.default.shape({url:o.default.string.def("")}).loose,r=o.default.shape({name:o.default.string,value:o.default.string}).loose,l=o.default.shape({id:o.default.number.isRequired,caption:o.default.string.def(""),captionShort:o.default.string.def("")}).loose,c=o.default.shape({id:o.default.number.isRequired,title:o.default.string.def(""),type:o.default.shape({id:o.default.number.isRequired,value:o.default.string.def("")}).loose,variants:o.default.arrayOf(l),required:o.default.bool.def(!1)}).loose,d=o.default.shape({badge:o.default.shape({text:o.default.string,backgroundColor:o.default.string}).loose,text:o.default.string,link:o.default.shape({text:o.default.string,url:o.default.string,target:o.default.string})}).loose,f=o.default.shape({id:o.default.number.isRequired,image:image,name:o.default.string.def(""),isAdultContent:o.default.bool.def(!1),variants:o.default.oneOfType([o.default.arrayOf(r),{validator:function(t){return void 0===t}},{validator:function(t){return null===t}}]).def([]),ctxAnswers:o.default.oneOfType([o.default.arrayOf(c),{validator:function(t){return void 0===t}},{validator:function(t){return null===t}}]).def(null),promo:o.default.oneOfType([d,o.default.shape({}),{validator:function(t){return void 0===t}},{validator:function(t){return null===t}}]).def(null)}).loose},b2560:function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]])}return n};t.exports={functional:!0,render:function(t,e){var r=e._c,s=(e._v,e.data),a=e.children,l=void 0===a?[]:a,c=s.class,i=s.staticClass,d=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,v=o(s,["class","staticClass","style","staticStyle","attrs"]);return r("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 6H7v14H1V7a3 3 0 013-3h16a3 3 0 013 3v10a3 3 0 01-3 3H10a1 1 0 110-2h10a1 1 0 001-1V7a1 1 0 00-1-1zm0 6a5 5 0 11-10 0 5 5 0 0110 0zm-5 3a3 3 0 110-6 3 3 0 010 6zM3 18h2V6H4a1 1 0 00-1 1v11z",fill:"currentColor"}})]))}}},b813f:function(t,e,n){"use strict";var o=n("c2325"),r=n.n(o);e.default=r.a},b89b9:function(t,e,n){"use strict";var o=n("0ba6f"),r=n("ff287"),l=n.n(r),c=n("d68e9"),d=n("6b668"),f=["large","small","middle"],h=["default","card"],v={name:"CreateReviewProduct",components:{OzImage:c.OzImage},mixins:[d.a],props:{size:o.default.oneOf(f).def(f[1]),displayType:o.default.oneOf(h).def(h[1]),product:o.default.shape({itemId:o.default.integer,name:o.default.string,coverImage:o.default.string,image:o.default.shape({url:o.default.string}),variants:o.default.oneOfType([o.default.arrayOf(o.default.shape({name:o.default.string,value:o.default.string}).loose),{validator:function(t){return void 0===t}},{validator:function(t){return null===t}}]).def([])}).loose.isRequired,showImage:o.default.bool.def(!0),isActive:o.default.bool.def(!1),isLazyImage:o.default.bool.def(!1)},computed:{name:function(){return l()(this.product,"name")||""},imageUrl:function(){return l()(this.product,"image.url")||null},coverImage:function(){return l()(this.product,"coverImage")||this.imageUrl||null},hasVariants:function(){return l()(this.product,"variants")||""},variantString:function(){return this.product.variants.map((function(t){return t.name+": "+t.value})).join(", ")}}},m=n("f145f"),y=n("b429c");var component=Object(y.a)(v,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.$style.product,e.$style[e.size],e.$style[e.displayType],(t={},t[e.$style.mobile]=e.isMobile,t)]},[e.showImage&&e.coverImage?o("div",{class:e.$style.imageWrapper},[o("OzImage",{class:e.$style.image,attrs:{size:96,src:e.coverImage,"use-cdn":!0,lazy:e.isLazyImage}})],1):e._e(),e._v(" "),o("div",{class:e.$style.info},[o("div",{class:e.$style.title},[e._v("\n      "+e._s(e.name)+"\n    ")]),e._v(" "),e.hasVariants?o("div",{class:e.$style.variant},[e._v("\n      "+e._s(e.variantString)+"\n    ")]):e._e()]),e._v(" "),e.isActive?o("div",{class:e.$style.active}):e._e()])}),[],!1,(function(t){this.$style=m.default.locals||m.default}),null,null);e.a=component.exports},bc13c:function(t,e,n){t.exports={imageWrapper:"g0k5",slide:"g0k6",active:"g0k7"}},bcb05:function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,s){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]])}return e};t.exports={functional:!0,render:function(t,s){var e=s._c,r=(s._v,s.data),a=s.children,l=void 0===a?[]:a,c=r.class,i=r.staticClass,d=r.style,f=r.staticStyle,p=r.attrs,h=void 0===p?{}:p,v=o(r,["class","staticClass","style","staticStyle","attrs"]);return e("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([e("path",{attrs:{d:"M14.21 1.387l.083-.094a1 1 0 011.32-.083l.094.083L19.414 5l-3.707 3.707a1 1 0 01-1.497-1.32l.083-.094L15.585 6H12a7 7 0 00-6.996 6.76L5 13a7 7 0 1014 0 1 1 0 112 0 9 9 0 11-9.265-8.996L12 4h3.585l-1.292-1.293a1 1 0 01-.083-1.32l.083-.094-.083.094z",fill:"currentColor"}})]))}}},bcfb2:function(t,e,n){t.exports={displayCard:"g0g0",actions:"g0g1",displayColumn:"g0g2",adultImage:"g0g3",text:"g0g4",notice:"g0g5",action:"g0g6",inPopup:"g0g7"}},c15f5:function(t,e,n){"use strict";var o=n("f50e5"),r=n.n(o);e.default=r.a},c1f8f:function(t,e,n){"use strict";var o=n("3af50"),r=n.n(o);e.default=r.a},c2325:function(t,e,n){t.exports={footer:"g0a4",user:"g0a5",column:"g0a6",controls:"g0a7",controlsWrapper:"g0a8",serverError:"g0a9",submitButton:"g0b",note:"g0b0",narrow:"g0b1",toggle:"g0b2",mobile:"g0b3"}},c8dca:function(t,e,n){t.exports={loader:"g1r9",circleLoader:"g1s",rotate:"g1s0",loaderPath:"g1s1",loading:"g1s2",dash:"g1s3",percents:"g1s4"}},cba5f:function(t,e,n){"use strict";var o,r=n("a09a9"),l=n.n(r),c=n("4066f"),d=n.n(c),f=n("279f1"),h=n.n(f),v=n("0ba6f"),m=n("d68e9"),y=n("fca9b"),x=n.n(y),w=n("bd98f"),_=n.n(w),I=(o={},h()(o,"success",x.a),h()(o,"error",_.a),o),O={name:"Notification",functional:!0,props:{notification:v.default.shape({type:v.default.oneOf(["success","error"]).isRequired,text:v.default.string.isRequired,action:v.default.string}).loose},render:function(t,e){var n=e.$style,o=e.props,r=e._v,data=e.data,c=Array.isArray(data.class)?data.class:[data.class||""],f=o.notification,h=f.type,text=f.text;return t(m.OzNotification,l()([{attrs:{icon:I[h]||x.a,iconColor:"error"===h?"ozAccentAlert":"ozGreenUi"},class:[].concat(d()(c),[n[h]])},{directives:data.directives}]),[r(text)])}},C=n("16e80"),$=n("b429c");var component=Object($.a)(O,void 0,void 0,!1,(function(t){this.$style=C.default.locals||C.default}),null,null);e.a=component.exports},cfe3a:function(t,e,n){"use strict";var o=n("0ba6f"),r=n("ff287"),l=n.n(r),c=n("3ced6"),d=n("d68e9"),f=n("40f1a"),h=n("79735"),v=n("b175e"),m={components:{OzImage:d.OzImage,Rating:f.a,ComposerLink:c.a,Promo:h.a,OzButton:d.OzButton},props:{product:v.a,imageSize:o.default.number.def(80),notRateError:o.default.bool.def(!1),isLazyImage:o.default.bool.def(!0),currentRating:o.default.number.def(0),inPopup:o.default.bool.def(!1),ratingError:o.default.string.def(""),isMobile:o.default.bool.def(!1)},data:function(){return{rating:this.currentRating}},computed:{id:function(){return l()(this.product,"id")||""},component:function(){return!this.inPopup&&this.id?"ComposerLink":"div"},href:function(){return!this.inPopup&&this.id?"/context/detail/id/"+this.id+"/":null},promo:function(){return(l()(this,"product.promo.badge")||null)&&l()(this,"product.promo")}},watch:{currentRating:function(t){this.rating=t}},methods:{setRating:function(t){var e=this;this.rating=t,t&&(this.$emit("setRating",{rating:t,product:this.product}),this.inPopup||setTimeout((function(){e.rating=0}),0))},notRate:function(){this.$emit("notRate",this.product.id)}}},y=n("f42ee"),x=n("3bb8b"),w=n("b429c");var component=Object(w.a)(m,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.commonStyle.displayCard,e.$style.displayCard,(t={"in-popup":e.inPopup},t[e.commonStyle.inPopup]=e.inPopup,t[e.$style.mobile]=e.isMobile,t[e.commonStyle.mobile]=e.isMobile,t)]},[e.promo?o("Promo",{class:e.$style.promo,attrs:{promo:e.promo}}):e._e(),e._v(" "),o(e.component,{tag:"component",class:[e.commonStyle.content,e.$style.content],attrs:{href:e.href}},[o("div",{class:e.commonStyle.imageWrapper},[o("OzImage",{class:e.commonStyle.image,attrs:{src:e.product.image.url,lazy:e.isLazyImage,size:e.imageSize,"use-cdn":!0}})],1),e._v(" "),o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"rateItemCardText",expression:"'rateItemCardText'",arg:"id"}],class:e.commonStyle.text},[e._v("\n      "+e._s(e.product.name)+"\n    ")])]),e._v(" "),e.notRateError?o("div",{class:[e.commonStyle.actions,e.commonStyle.actionsError]},[o("div",{class:e.commonStyle.infoText},[e._v("\n      Ваш отказ не был учтен\n    ")]),e._v(" "),o("OzButton",{class:e.commonStyle.action,attrs:{text:"Повторить",theme:"inline"},on:{click:e.notRate}})],1):o("div",{class:e.commonStyle.actions},[o("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"dontRateItem",expression:"'dontRateItem'",arg:"id"}],class:e.commonStyle.action,attrs:{text:"Не оценивать",theme:"inline"},on:{click:e.notRate}}),e._v(" "),o("Rating",{attrs:{rating:e.rating,"rating-error":e.ratingError,size:e.isMobile?"xl":"l","theme-label":e.inPopup?"column":"none"},on:{input:e.setRating}})],1)],1)}),[],!1,(function(t){this.commonStyle=y.default.locals||y.default,this.$style=x.default.locals||x.default}),null,null);e.a=component.exports},d087b:function(t,e,n){t.exports={container:"gy4",title:"gy5",description:"gy6",contentWrapper:"gy7",adultContentContainer:"gy8",commentField:"gy9",photos:"gz",videos:"gz0",contextQuestions:"gz1",contextualQuestion:"gz2",notification:"gz3",footer:"gz4"}},d0f58:function(t,e,n){"use strict";var o,r=n("0ba6f"),l=n("56527"),c=n.n(l);!function(t){t.PAGE="page",t.BLOCK="block"}(o||(o={}));var d={name:"DragAndDropArea",components:{DropIcon:c.a},props:{dragZoneType:r.default.oneOf(Object.values(o)).def(o.PAGE),message:r.default.string.def("Перетащите фото сюда")},data:function(){return{isDragging:!1,DRAG_ZONE_TYPES:o}},mounted:function(){if(this.dragZoneType===o.PAGE){var t=this.$refs.pageDropZone;t&&(window.addEventListener("dragenter",this.onDragEnter),t.addEventListener("dragleave",this.onDragLeave))}else{var e=this.$refs.dragEnterArea,n=this.$refs.dragLeaveArea;e&&e.addEventListener("dragenter",this.onDragEnter),n&&n.addEventListener("dragleave",this.onDragLeave)}},beforeDestroy:function(){if(this.dragZoneType===o.PAGE){var t=this.$refs.pageDropZone;t&&(window.removeEventListener("dragenter",this.onDragEnter),t.removeEventListener("dragleave",this.onDragLeave))}else{var e=this.$refs.dragEnterArea,n=this.$refs.dragLeaveArea;e&&e.removeEventListener("dragenter",this.onDragEnter),n&&n.removeEventListener("dragleave",this.onDragLeave)}},methods:{onDragEnter:function(){this.isDragging=!0},onDragLeave:function(){this.isDragging=!1},onDrop:function(t){var e=t.dataTransfer.files||t.target.files;this.$emit("drop",e),this.isDragging=!1}}},f=n("889e0"),h=n("b429c");var component=Object(h.a)(d,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{ref:"dragEnterArea",class:e.$style.dragAndDropArea},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging&&e.dragZoneType===e.DRAG_ZONE_TYPES.PAGE,expression:"isDragging && dragZoneType === DRAG_ZONE_TYPES.PAGE"}],ref:"pageDropZone",class:e.$style.pageDropZone,on:{dragover:function(t){t.preventDefault()},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop(t)}}}),e._v(" "),o("div",{ref:"dragLeaveArea",class:[e.$style.infoMessage,(t={},t[e.$style.active]=e.isDragging,t)],on:{dragover:function(t){t.preventDefault()},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop(t)}}},[o("DropIcon",{class:e.$style.icon}),e._v("\n    "+e._s(e.message)+"\n  ")],1),e._v(" "),e._t("default")],2)}),[],!1,(function(t){this.$style=f.default.locals||f.default}),null,null);e.a=component.exports},d1a8c:function(t,e,n){"use strict";n.r(e);var o=n("d68e9"),r=n("d3037"),l=n("0ba6f"),c=n("5bedd"),d=n("cfe3a"),f=n("44320"),h=n("aa9c1"),v=n("b175e"),m={name:"RateBoughtItemsWidgetDesktopCarousel",components:{OzCarousel:o.OzCarousel,OzCarouselItem:o.OzCarouselItem,ItemCard:d.a,AdultCard:f.a,Processing:c.a},props:{products:l.default.arrayOf(v.a).isRequired,showAdult:l.default.bool.def(!1),adultProductsCount:l.default.number.def(0),simpleProductsCount:l.default.number.def(0),processingIndex:l.default.number.def(-1),notRateErrorIndex:l.default.number.def(-1),activeIndex:l.default.number.def(0),currentRating:l.default.number.def(0),slidesCount:l.default.number.def(h.a)},methods:{notRate:function(t,e){this.$emit("notRate",t,e)},setRating:function(t){this.$emit("setRating",t)},setShowAdult:function(){this.$emit("setShowAdult")}}},y=n("7c91a"),x=n("b429c");var w=Object(x.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("OzCarousel",{class:[t.$style.rateBoughtItemsCarousel,t.$style["rateBoughtItems"+t.slidesCount]],attrs:{theme:"material"}},t._l(t.products,(function(e,o){return n("OzCarouselItem",{key:"rate-bought-item-card-"+o,class:t.$style.slide},[e.isAdultContent&&!t.showAdult?[n("AdultCard",{attrs:{count:t.adultProductsCount,"image-size":80,"is-lazy-image":o>t.slidesCount-1,product:e},on:{show:t.setShowAdult}})]:[n("ItemCard",{attrs:{"current-rating":t.currentRating,"image-size":80,"is-lazy-image":o>t.slidesCount-1,"not-rate-error":o===t.notRateErrorIndex,product:e},on:{notRate:function(e){return t.notRate(e,!1)},setRating:t.setRating}}),t._v(" "),o===t.processingIndex?n("Processing",{class:t.$style.processing}):t._e()]],2)})),1)}),[],!1,(function(t){this.$style=y.default.locals||y.default}),null,null).exports,_=n("e5e21"),I=n.n(_),O=n("23f72"),C=n("ed000"),$=n("36f2c"),P=n("b89b9"),A=n("90699"),z=n("79735"),S=n("40f1a"),E=n("755d8"),k={name:"RateBoughtItemsWidgetPreviewCarousel",components:{OzCarousel:o.OzCarousel,OzCarouselItem:o.OzCarouselItem,OzImage:o.OzImage,AdultImage:E.a},props:{products:l.default.arrayOf(v.a).isRequired,showAdult:l.default.bool.def(!1),activeProductIndex:l.default.number.def(0)},methods:{changeActiveProduct:function(t,e){this.$emit("changeActiveProduct",t,e)}}},R=n("367ea");var T=Object(x.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("OzCarousel",{ref:"carousel",attrs:{theme:"rectMaterial","slide-index":t.activeProductIndex-1,"sliding-count":8}},t._l(t.products,(function(e,o){var r;return n("OzCarouselItem",{key:"rate-bought-item-image-"+o,class:[t.$style.slide,(r={},r[t.$style.active]=o===t.activeProductIndex,r)]},[n("div",{class:t.$style.imageWrapper,on:{click:function(n){return t.changeActiveProduct(e,o)}}},[e.isAdultContent&&!t.showAdult?[n("AdultImage",{class:t.$style.image,attrs:{size:64,src:e.image.url}})]:[n("OzImage",{class:t.$style.image,attrs:{src:e.image.url,size:64,"use-cdn":!0}})]],2)])})),1)}),[],!1,(function(t){this.$style=R.default.locals||R.default}),null,null).exports,V=n("edffb"),L=n("58164"),j=n("9a072"),M={name:"RateBoughtItemsDesktopCreate",components:{PreviewCarousel:T,MultiTextarea:O.a,UploadImages:C.a,Product:P.a,Processing:c.a,AdultCard:f.a,OzTransition:o.OzTransition,OzNotification:o.OzNotification,ContextualQuestion:$.a,FormFooter:A.a,TrashBin:I.a,Promo:z.a,Rating:S.a},mixins:[V.a,L.a,j.a],computed:{isPreviewCarouselVisible:function(){return this.totalProductCount>1}},methods:{prevProduct:function(){if(!this.created)if(0!==this.activeProductIndex){var t=this.activeProductIndex-1,e=this.products[t];this.changeActiveProduct(e,t)}else{var n=this.products.length-1,o=this.products[n];this.changeActiveProduct(o,n)}},nextProduct:function(){if(!this.created)if(this.activeProductIndex!==this.products.length-1){var t=this.activeProductIndex+1,e=this.products[t];this.changeActiveProduct(e,t)}else{var n=this.products[0];this.changeActiveProduct(n,0)}},setRating:function(t){this.rating=t,this.errors.comment=""}}},F=n("1bb91");var N=Object(x.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",class:t.$style.container,attrs:{novalidate:"",tabindex:"-1"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),e.preventDefault(),t.prevProduct(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:(e.stopPropagation(),e.preventDefault(),t.nextProduct(e))}],submit:function(e){return e.preventDefault(),t.createReview(e)}}},[n("div",{class:t.$style.title},[t._v("\n    Напишите отзыв о товаре\n  ")]),t._v(" "),t.isPreviewCarouselVisible?n("div",{class:t.$style.description},[t._v("\n    "+t._s(t.countProductText)+" "+t._s(t.countProductAdditionalText)+" вашей оценки\n  ")]):t._e(),t._v(" "),t.isPreviewCarouselVisible?n("PreviewCarousel",{attrs:{products:t.products,"show-adult":t.showAdult,"active-product-index":t.activeProductIndex},on:{changeActiveProduct:t.changeActiveProduct}}):t._e(),t._v(" "),n("OzTransition",[n("div",{class:t.$style.contentWrapper},[t.activeProduct.isAdultContent&&!t.showAdult?n("div",{class:t.$style.adultContentContainer},[n("AdultCard",{class:t.$style.adultCard,attrs:{"display-type":"displayColumn",product:t.activeProduct,"image-size":188,count:t.adultProductsCount,"is-lazy-image":!1},on:{show:function(e){return t.$emit("showAdult")}}})],1):n("div",[t.promo?n("Promo",{class:t.$style.promo,attrs:{promo:t.promo}}):t._e(),t._v(" "),n("Product",{class:t.$style.product,attrs:{size:"middle","display-type":"default",product:t.activeProduct,"show-image":!t.isPreviewCarouselVisible}}),t._v(" "),t.additionalNotification?n("OzNotification",{class:t.$style.notification,attrs:{icon:t.InfoIcon}},[t._v("\n          "+t._s(t.additionalNotification)+"\n        ")]):t._e(),t._v(" "),n("div",{class:t.$style.controls},[n("div",{class:t.$style.ratingWrapper},[n("Rating",{attrs:{size:"l","theme-label":"row",rating:t.rating,"rating-error":t.errors.rating},on:{input:t.setRating}})],1),t._v(" "),n("button",{class:t.$style.notRate,attrs:{type:"button"},on:{click:t.notRate}},[n("TrashBin",{class:t.$style.notRateIcon}),t._v(" "),n("span",[t._v("Не оценивать этот товар")])],1)]),t._v(" "),n("MultiTextarea",{class:t.$style.commentField,attrs:{"error-message":t.errors.comment,"display-type":"separated","parts-of-comment":t.partsOfComment,error:Boolean(t.errors.comment),"min-height":32,"max-height":250,autosize:!0,"show-notice":!0},on:{focus:t.onFocus},model:{value:t.commentModel,callback:function(e){t.commentModel=e},expression:"commentModel"}}),t._v(" "),n("UploadImages",{class:t.$style.photos,attrs:{"display-type":"narrow"},on:{loading:function(e){t.isPhotosLoading=e}},model:{value:t.photos,callback:function(e){t.photos=e},expression:"photos"}}),t._v(" "),t.videoSettings?n("UploadVideos",t._b({class:t.$style.videos,on:{loading:function(e){t.isVideosLoading=e}},model:{value:t.videos,callback:function(e){t.videos=e},expression:"videos"}},"UploadVideos",t.videoSettings,!1)):t._e(),t._v(" "),t.contextQuestions.length?n("div",{class:t.$style.contextQuestions},t._l(t.contextQuestions,(function(e){return n("ContextualQuestion",t._b({key:e.id,class:t.$style.contextualQuestion,model:{value:t.ctxAnswers[e.id],callback:function(n){t.$set(t.ctxAnswers,e.id,n)},expression:"ctxAnswers[question.id]"}},"ContextualQuestion",e,!1))})),1):t._e(),t._v(" "),n("FormFooter",{class:t.$style.footer,attrs:{"display-type":"narrow",user:t.author,"is-anonymous":t.isAnonymous,"is-created":t.created,"is-creating":t.creating,"is-photos-loading":t.isPhotosLoading||t.isVideosLoading,"has-error":t.serverError,"publishing-policy":t.publishingPolicy},on:{changeAnonymous:function(e){return t.changeAnonymous(e)}}})],1)])]),t._v(" "),t.processing||t.creating?n("Processing"):t._e()],1)}),[],!1,(function(t){this.$style=F.default.locals||F.default}),null,null).exports,U=n("1ffde"),D=r.a.extend({name:"RateBoughtItemsDesktopWidget",mixins:[U.a,L.a],components:{Carousel:w,Create:N,OzModal:o.OzModal},methods:{onModalClose:function(){this.activeChoice=null}}}),B=n("835ab");var W=Object(x.a)(D,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return e.totalProductCount?o("section",{directives:[{name:"qa",rawName:"v-qa:id",value:"rateBoughtItems",expression:"'rateBoughtItems'",arg:"id"}],class:e.$style.rateBoughtItemsWrapper},[o("div",{class:[e.$style.container,(t={},t[e.$style.containerNarrow]=2==e.slidesCount,t)]},[o("h1",{class:e.$style.title},[e._v("\n      "+e._s(e.countProductText)+" "+e._s(e.countProductAdditionalText)+" оценки\n    ")]),e._v(" "),o("p",{class:e.$style.description},[e._v("\n      Оставьте отзыв, чтобы помочь другим покупателям сделать выбор\n    ")]),e._v(" "),e.products.length?o("Carousel",{attrs:{products:e.products,"show-adult":e.showAdult,"adult-products-count":e.adultProductsCount,"simple-products-count":e.simpleProductsCount,"processing-index":e.processingIndex,"not-rate-error-index":e.notRateErrorIndex,"slides-count":e.slidesCount},on:{setShowAdult:e.doSetShowAdult,setRating:e.setRating,notRate:e.notRateCarousel}}):e._e()],1),e._v(" "),e.activeChoice?o("OzModal",{attrs:{theme:"wide","auto-focus":!1},on:{close:e.onModalClose}},[o("Create",{attrs:{"active-choice":e.activeChoice,products:e.products,"adult-products-count":e.adultProductsCount,"simple-products-count":e.simpleProductsCount,processing:-1!==e.processingIndex,"processing-index":e.processingIndex,"not-rate-error-index":e.notRateErrorIndex,"not-rate-error":e.showNotRateError,"show-adult":e.showAdult,"total-product-count":e.totalProductCount,user:e.user,"publishing-policy":e.publishingPolicy,"create-action":e.widgetState.createReviewAction,"fields-settings":e.widgetState.validationRulesByRating,"additional-notification":e.widgetState.additionalNotification,"video-settings":e.widgetState.videoSettings},on:{changeActiveProduct:e.changeActiveProduct,notRate:function(t){return e.notRatePopup(t,!0)},showAdult:function(t){return e.setShowAdult(!0)},created:e.reviewCreated,setShowAdult:function(t){return e.setShowAdult(!0)},changeAnonymous:function(t){return e.changeAnonymous(t)}}})],1):e._e()],1):e._e()}),[],!1,(function(t){this.$style=B.default.locals||B.default}),null,null);e.default=W.exports},d48b3:function(t,e,n){t.exports={displayCard:"g0u1",content:"g0u2",imageWrapper:"g0u3",text:"g0u4",infoText:"g0u5",actions:"g0u6",adult:"g0u7",mobile:"g0u8",inPopup:"g0u9",":hover":"g0v",actionsError:"g0v0",action:"g0v1"}},d6fd6:function(t,e,n){"use strict";var o=n("0ba6f"),r=["block","row"],l={name:"ToggleAnonymousUser",functional:!0,inheritAttrs:!1,props:{isAnonymous:o.default.bool.def(!1),userName:o.default.string.def(""),label:o.default.string.def("Вы оставляете отзыв как:"),type:o.default.oneOf(r).def(r[0])},render:function(t,e){var n=e.$style,o=e.props,data=e.data,r=e._v,l=o.isAnonymous,c=o.userName,label=o.label,d=o.type;return t("div",{class:data.class||""},[r(label),t("div",{class:[n.name,n[d]]},[r(l?"Анонимный покупатель":c)].concat())])}},c=n("54bb5"),d=n("b429c");var component=Object(d.a)(l,void 0,void 0,!1,(function(t){this.$style=c.default.locals||c.default}),null,null);e.a=component.exports},d75c5:function(t,e,n){"use strict";var o=n("2436e"),r=n.n(o);e.default=r.a},d9a44:function(t,e,n){t.exports={exBackgroundColor:"#090089",badge:"g0n0",badgeIcon:"g0n1",badgeText:"g0n2",popoverText:"g0n3",popoverLink:"g0n4"}},dbc34:function(t,e,n){t.exports={slide:"gz5",rateBoughtItemsCarousel:"gz6",rateBoughtItems3:"gz7",rateBoughtItems2:"gz8",processing:"gz9"}},dd64d:function(t,e,n){"use strict";var o=n("3fe1b"),r=n.n(o);e.default=r.a},dfd96:function(t,e,n){"use strict";var o=n("80c83"),r=n.n(o);e.default=r.a},e5e21:function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++)for(var s in a=arguments[e])Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(e[n[s]]=t[n[s]])}return e};t.exports={functional:!0,render:function(t,a){var e=a._c,r=(a._v,a.data),s=a.children,l=void 0===s?[]:s,c=r.class,i=r.staticClass,d=r.style,f=r.staticStyle,h=r.attrs,v=void 0===h?{}:h,p=o(r,["class","staticClass","style","staticStyle","attrs"]);return e("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v)},p),l.concat([e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 5h-3.126a4.002 4.002 0 00-7.748 0H5a1 1 0 000 2h5V6a2 2 0 114 0v1h5a1 1 0 100-2zm0 5h-2v9a1 1 0 01-1 1H8a1 1 0 01-1-1v-9H5v9a3 3 0 003 3h8a3 3 0 003-3v-9zm-9 0a1 1 0 00-1 1v6a1 1 0 102 0v-6a1 1 0 00-1-1zm3 1a1 1 0 112 0v6a1 1 0 11-2 0v-6z",fill:"currentColor"}})]))}}},e6c07:function(t,e,n){"use strict";var o=n("d9a44"),r=n.n(o);e.default=r.a},e9cbb:function(t,e,n){t.exports={videoWrapper:"g1h5",video:"g1h6",delete:"g1h7",reloadBtn:"g1h8",reload:"g1h9",crossIcon:"g1i",loading:"g1i0",mobile:"g1i1"}},ececd:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return y}));var o=n("824ee"),r=function(){return(r=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},l=function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function c(t){try{f(o.next(t))}catch(t){l(t)}}function d(t){try{f(o.throw(t))}catch(t){l(t)}}function f(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}f((o=o.apply(t,e||[])).next())}))},c=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=body.call(t,r)}catch(t){l=[6,t],n=0}finally{e=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},d=Object(o.b)(),f=d.wsdUrl,h=d.requestUrl,v={video_type:"review"},m="https://cdn1.ozone.ru/graphics/ozon/reviews/icons/video_preview_icon.svg",y=function(){function t(t,e){this.name="",this.size=0,this.uploadId="",this.loading=!0,this.valid=!1,this.finished=!1,this.reload=!1,this.restartCount=20,this.percentLoaded=0,this.pos=0,this.src="",this.error="",this.blob={},this.ffprobe={},this.ozApi={},this.name=t.name,this.size=t.size,this.src=URL.createObjectURL(t),this.blob=t,this.ozApi=e}return t.prototype.checkServerValidation=function(){var t=this;return new Promise((function(e){var n=t.size;t.socket=new WebSocket(f+"?size="+encodeURIComponent(n)),t.socket.onopen=function(){t.socket.send(JSON.stringify(v))},t.socket.onmessage=function(o){var data=o.data,r=JSON.parse(data),l=r.From,c=r.Size,d=r.Valid,f=r.UserMessage,h=r.FFProbe;void 0!==d?(t.valid=d,!d&&f&&(t.error=f),h&&(t.ffprobe=h),e(t),t.socket.close()):![2,3].includes(t.socket.readyState)&&l+c<=n&&t.socket.send(t.blob.slice(l,l+c))},t.socket.onerror=function(){t.valid=void 0,t.error="Ошибка проверки видео, попробуйте позже",e(t)}}))},t.prototype.uploadVideoToServer=function(){return l(this,void 0,void 0,(function(){var t=this;return c(this,(function(e){return[2,new Promise((function(e){var n=t.blob.slice(0),o=t,r=o.uploadId,l=o.size,c=o.pos,d=void 0===c?0:c,f=new XMLHttpRequest,v="Ошибка соединения с сервером, попробуйте повторить позже";try{f.open("POST",h+"?id="+encodeURIComponent(r)+"&size="+encodeURIComponent(l)+"&pos="+encodeURIComponent(d),!0),f.onload=function(){var n=JSON.parse(f.response),o=n.finished,r=n.error,l=void 0===r?"":r,c=n.position,d=void 0===c?0:c;200!==f.status?e({error:l||v,file:t,position:d}):(t.loading=!1,t.finished=o,e({file:t}))},f.upload.onprogress=function(e){if(e.lengthComputable){var n=d+e.loaded;t.percentLoaded=Math.round(100*(n/t.size||0))}},f.onerror=function(){e({error:v,file:t})},f.send(n)}catch(n){e({error:v,file:t})}}))]}))}))},t.prototype.getVideoWithUploadId=function(){return l(this,void 0,void 0,(function(){var t,e,n,o=this;return c(this,(function(l){switch(l.label){case 0:t="",l.label=1;case 1:return l.trys.push([1,3,,4]),e=this.ffprobe,[4,this.ozApi.composer.action.post({name:"newUpload",data:r(r({},v),{ffprobe:e})})];case 2:return n=l.sent().UploadID,this.uploadId=n,[3,4];case 3:return l.sent(),t="Не удалось загрузить файл "+this.name+". ",[3,4];case 4:return[2,new Promise((function(e){e({file:o,error:t})}))]}}))}))},t}()},ecfc3:function(t,e,n){t.exports={product:"b9i1",imageWrapper:"b9i2",title:"b9i3",variant:"b9i4",active:"b9i5",large:"b9i6",middle:"b9i7",small:"b9i8",card:"b9i9",mobile:"b9j"}},ed000:function(t,e,n){"use strict";var o=n("0ba6f"),r=n("a1cf5"),l=n.n(r),c=n("c7aac"),d=n("5e33f"),f=n("676c9"),h=n("cba5f"),v=n("39fac"),m=n("6b668"),y=n("8bbbb"),x=n("d68e9"),w=n("bcb05"),_=n.n(w),I=n("6b74f"),O=n.n(I),C=n("1c310"),$={name:"UploadImage",components:{Loader:n.n(C).a,OzImage:x.OzImage,CrossIcon:O.a,RotateIcon:_.a},mixins:[m.a],props:{image:o.default.shape({file:o.default.any,name:o.default.string.def(""),dataURL:o.default.string.def(""),url:o.default.string.def(""),isLoading:o.default.bool,hasError:o.default.bool}).loose.isRequired},computed:{isLoading:function(){return this.image.isLoading||!1},hasError:function(){return this.image.hasError||!1}}},P=n("c1f8f"),A=n("b429c");var z=Object(A.a)($,(function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{class:[e.$style.imageWrapper,(t={},t[e.$style.mobile]=e.isMobile,t)]},[e.image.dataURL?o("img",{class:e.$style.image,attrs:{src:e.image.dataURL}}):o("OzImage",{class:[e.$style.image,e.$style.imageCdn],attrs:{size:128,src:e.image.url,"use-cdn":!0}}),e._v(" "),e.hasError?o("div",{class:e.$style.error,on:{click:function(t){return e.$emit("reload")}}},[o("RotateIcon",{class:e.$style.icon})],1):e._e(),e._v(" "),e.isLoading?o("div",{class:e.$style.overlay},[o("Loader",{class:e.$style.loader})],1):e._e(),e._v(" "),o("button",{class:e.$style.delete,attrs:{type:"button"},on:{click:function(t){return e.$emit("delete")}}},[o("CrossIcon",{class:e.$style.icon})],1)],1)}),[],!1,(function(t){this.$style=P.default.locals||P.default}),null,null).exports,S=n("d0f58"),E=["product","delivery"],k=["default","narrow"],R=function(){return(R=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},T=function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function c(t){try{f(o.next(t))}catch(t){l(t)}}function d(t){try{f(o.throw(t))}catch(t){l(t)}}function f(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}f((o=o.apply(t,e||[])).next())}))},V=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=body.call(t,r)}catch(t){l=[6,t],n=0}finally{e=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},L=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return l},j=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(L(arguments[i]));return t},M={name:"UploadImages",components:{DragAndDrop:S.a,UploadButton:y.a,UploadImage:z,Notification:h.a},mixins:[m.a],props:{displayType:o.default.oneOf(k).def(k[0]),value:o.default.arrayOf(o.default.shape({url:o.default.string.def(""),hash:o.default.string.def("")}).loose).def((function(){return[]})),limit:o.default.number.def(10),titleVisible:o.default.bool.def(!0),uploadType:o.default.oneOf(E).def(E[0])},data:function(){return{images:[],invalidTypesFiles:[],serverErrorFiles:[],excessCount:0,MAX_IMAGE_COUNT:10,UPLOAD_TYPE_PRODUCT:"product",UPLOAD_TYPE_DELIVERY:"delivery"}},computed:{imagesCount:function(){return this.images.length},title:function(){return this.value&&this.value.length?"Загружены фотографии":"Добавьте фотографии"},hasError:function(){return this.serverErrorFiles.length||this.invalidTypesFiles.length||this.excessCount},notificationError:function(){var t=[],e=this.invalidTypesFiles.length,n=this.serverErrorFiles.length;if(e){var o=this.invalidTypesFiles.map((function(t){return t.name})).join(", ");e>1?t.push("Файлы "+o+" не были загружены — неправильный формат изображения."):t.push("Файл "+o+" не был загружен — неправильный формат изображения.")}if(n){var r=this.serverErrorFiles.map((function(t){return t.name})).join(", ");t.push("Не удалось загрузить "+(n>1?"файлы":"файл")+" "+r+" - произошла ошибка.")}return this.excessCount&&t.push(Object(c.f)(this.excessCount,["файл не загружен","файла не загружено","файлов не загружено"])+" - превышен лимит."),{type:"error",text:t.join(" ")}}},watch:{value:{handler:function(t){var e=this;if(l()(t))this.images=[];else{var n=t.filter((function(image){return image.hash})).filter((function(image){return!e.isRepetitiveImage(image)}));this.images=j(this.images,n)}},immediate:!0},images:{handler:function(t){var e=t.filter((function(image){return image.isLoading})).length;this.$emit("loading",e>0)},deep:!0}},methods:{onUpload:function(t){var e=this,n=Array.from(t),o=(n=n.filter((function(t){return!e.isRepetitiveFile(t)}))).filter((function(t){return e.isValidTypeFile(t)}));this.invalidTypesFiles=n.filter((function(t){return!e.isValidTypeFile(t)}));var r=this.images.length,l=r+o.length;if(l>this.limit){var c=this.limit-r;this.excessCount=l-this.limit,o=j(o.slice(0,c))}o.forEach((function(t){return T(e,void 0,void 0,(function(){var image,e,n;return V(this,(function(o){switch(o.label){case 0:return[4,this.processFile(t)];case 1:image=o.sent(),this.images=j(this.images,[R(R({},image),{isLoading:!0})]),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.loadImage(image)];case 3:return e=o.sent().url,-1!==(n=this.images.findIndex((function(t){return t.name===image.name})))&&this.updateImages(n,R(R({},image),{url:e,hasError:!1,isLoading:!1})),[3,5];case 4:return o.sent(),-1!==(n=this.images.findIndex((function(t){return t.name===image.name})))&&(this.updateImages(n,R(R({},image),{url:null,hasError:!0,isLoading:!1})),this.serverErrorFiles.push(image)),[3,5];case 5:return[2]}}))}))}))},processFile:function(t){return T(this,void 0,void 0,(function(){var e,n,o,r,l;return V(this,(function(c){switch(c.label){case 0:return e=t.name,n=t.size,o=[e,n].join(),[4,Object(d.a)(t)];case 1:return r=c.sent().dataURL,l=Object(f.a)(r),[2,{hash:o,file:l,name:e,dataURL:r}]}}))}))},loadImage:function(t){var e=t.file,n=t.name;return T(this,void 0,void 0,(function(){var t,o;return V(this,(function(r){switch(r.label){case 0:return t=new FormData,o=null,t.append("file",e,n),"product"!==this.uploadType?[3,2]:[4,this.$api.composer.action.post({name:v.r,data:t})];case 1:o=r.sent(),r.label=2;case 2:return"delivery"!==this.uploadType?[3,4]:[4,this.$api.composer.action.post({name:v.s,data:t})];case 3:o=r.sent(),r.label=4;case 4:return[2,o]}}))}))},onDeleteImage:function(t){this.images=j(this.images.slice(0,t),this.images.slice(t+1)),this.updateValue(),this.resetErrorState()},updateImages:function(t,image){this.images=j(this.images.slice(0,t),[image],this.images.slice(t+1)),this.updateValue()},updateValue:function(){var t=this.images.filter((function(image){return image.url})).map((function(image){return{url:image.url,hash:image.hash}}));this.$emit("input",t)},resetErrorState:function(){this.invalidTypesFiles=[],this.serverErrorFiles=[],this.excessCount=0},onReloadImage:function(image){return T(this,void 0,void 0,(function(){var t,e;return V(this,(function(n){switch(n.label){case 0:t=this.images.findIndex((function(t){return t.name===image.name})),this.updateImages(t,R(R({},image),{hasError:!1,isLoading:!0})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.loadImage(image)];case 2:return e=n.sent().url,this.updateImages(t,R(R({},image),{url:e,hasError:!1,isLoading:!1})),[3,4];case 3:return n.sent(),this.updateImages(t,R(R({},image),{url:null,hasError:!0,isLoading:!1})),[3,4];case 4:return this.resetErrorState(),[2]}}))}))},isValidTypeFile:function(t){return"image/jpeg"===t.type||"image/png"===t.type},isRepetitiveFile:function(t){var e=[t.name,t.size].join();return this.images.find((function(image){return image.hash===e}))},isRepetitiveImage:function(img){return this.images.find((function(image){return image.hash===img.hash}))}}},F=n("dfd96");var N=Object(A.a)(M,(function(){var t,e,n,o=this,r=o.$createElement,l=o._self._c||r;return l("DragAndDrop",{class:[o.$style.uploadImages,o.$style[o.displayType],(t={},t[o.$style.mobile]=o.isMobile,t)],attrs:{"drag-zone-type":"block"},on:{drop:o.onUpload}},[o.titleVisible?l("div",{class:o.$style.title},[o._v("\n    "+o._s(o.title)+"\n    "),o.value&&o.value.length?l("span",{directives:[{name:"qa",rawName:"v-qa:id",value:"photo-counter",expression:"'photo-counter'",arg:"id"}],class:o.$style.count},[o._v(o._s(o.value.length)+"/"+o._s(o.limit))]):o._e()]):o._e(),o._v(" "),l("div",{class:[o.$style.container,(e={},e[o.$style.containerHasImage]=o.imagesCount,e)]},[o.imagesCount?o._l(o.images,(function(image,t){return l("UploadImage",{key:image.hash,class:o.$style.uploadImage,attrs:{image:image},on:{delete:function(e){return o.onDeleteImage(t)},reload:function(t){return o.onReloadImage(image)}}})})):o._e(),o._v(" "),o.imagesCount<o.limit?l("UploadButton",{class:[o.$style.uploadButton,(n={},n[o.$style.buttonHasImage]=o.imagesCount,n)],on:{upload:o.onUpload}}):o._e(),o._v(" "),o.imagesCount?o._e():l("div",{class:o.$style.info},[o.isMobile?o._e():l("div",{class:o.$style.text},[o._v("\n        Нажмите на кнопку или перетащите фото в эту область\n      ")]),o._v(" "),l("div",{class:o.$style.note},[o._v("\n        до "+o._s(o.limit)+" изображений в формате PNG, JPEG.\n      ")])])],2),o._v(" "),o.hasError?l("div",{class:o.$style.error},[l("Notification",{attrs:{notification:o.notificationError}})],1):o._e()])}),[],!1,(function(t){this.$style=F.default.locals||F.default}),null,null);e.a=N.exports},edffb:function(t,e,n){"use strict";var o=n("ff287"),r=n.n(o),l=n("0ba6f"),c=n("bbfe9"),d=n("01ff4"),f=n.n(d),h=n("8d0b0"),v=n("b175e"),m=function(){return(m=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},y=function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function c(t){try{f(o.next(t))}catch(t){l(t)}}function d(t){try{f(o.throw(t))}catch(t){l(t)}}function f(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}f((o=o.apply(t,e||[])).next())}))},x=function(t,body){var e,n,o,g,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=body.call(t,r)}catch(t){l=[6,t],n=0}finally{e=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};e.a={components:{UploadVideos:h.a},props:{products:l.default.arrayOf(v.a).isRequired,totalProductCount:l.default.number.def(0),activeChoice:{type:Object,required:!0},showAdult:l.default.bool.def(!1),user:l.default.string.def(""),publishingPolicy:{type:Object,default:null},processing:l.default.bool.def(!1),adultProductsCount:l.default.number.def(0),createAction:l.default.string.def(""),fieldsSettings:l.default.objectOf(l.default.shape({comment:l.default.shape({errorMessage:l.default.string.def("")}),rating:l.default.shape({errorMessage:l.default.string.def("")})})).def({}),additionalNotification:l.default.string.def(""),videoSettings:l.default.oneOfType([l.default.objectOf(l.default.shape({maxVideosCount:l.default.number.def(3),title:l.default.string.def("Нажмите на кнопку или перетащите видео в эту область"),subtitle:l.default.string.def("до 3 видео длительностью не более 5 минут")})).def({}),{validator:function(t){return void 0===t}},{validator:function(t){return null===t}}])},data:function(){return{rating:r()(this.activeChoice,"rating")||0,errorsUpload:"",errors:{rating:"",comment:""},partsOfComment:[{placeholder:"Достоинства",ref:"positive"},{placeholder:"Недостатки",ref:"negative"},{placeholder:"Комментарий к отзыву",ref:"comment"}],serverError:null,commentModel:{positive:"",negative:"",comment:""},creating:!1,created:!1,isAnonymous:!1,isPhotosLoading:!1,isVideosLoading:!1,photos:[],videos:[],ctxAnswers:{},InfoIcon:f.a}},watch:{activeProduct:function(t,e){var n=t&&t.id,o=e&&e.id;n!==o&&(this.errorsUpload="",this.errors.rating="",this.errors.comment="",this.serverError=null,this.created=!1,this.updateModelContent(n,o))},model:{deep:!0,handler:function(){this.activeProductId&&this.needSetModelToSessionStorage(this.activeProductId)}}},mounted:function(){this.$refs.form&&this.$refs.form.focus(),this.activeProductId&&this.updateModelContent(this.activeProductId)},computed:{activeProduct:function(){return r()(this.activeChoice,"product")||{}},activeProductId:function(){return r()(this.activeProduct,"id")||null},activeProductIndex:function(){var t=this;return this.products.findIndex((function(e){return e.id===t.activeProductId}))},model:function(){return{opinion:{product:{itemId:this.activeProductId},content:m({score:this.rating,photos:this.photos&&this.photos.map((function(t){return{url:t.url}})),videos:this.videos.reduce((function(t,e){var n=e.finished,o=e.uploadId,r=e.id,video={url:o};return r&&(video.id=r),(n||r)&&t.push(video),t}),[]),contextQuestionsAnswers:this.ctxAnswers},this.commentModel),isAnonymous:this.isAnonymous}}},showContentWrapper:function(){return!this.isMobile||!this.activeProduct.isAdultContent||this.activeProduct.isAdultContent&&this.showAdult},contextQuestions:function(){return r()(this.activeProduct,"contextQuestions")||[]},promo:function(){return(r()(this.activeProduct,"promo.badge")||null)&&r()(this.activeProduct,"promo")},author:function(){return this.isAnonymous?"Анонимный покупатель":this.user}},methods:{notRate:function(){this.$emit("notRate",this.activeProductId)},createReview:function(){return y(this,void 0,void 0,(function(){var t,e,n,o,r,l=this;return x(this,(function(d){switch(d.label){case 0:if(t=this.model.opinion.content,e=this.model.opinion.product.itemId,n=this.fieldsSettings[this.rating],o=!t.comment&&!t.positive&&!t.negative,n&&(this.errors.rating=n.rating&&n.rating.errorMessage||"",this.errors.comment=o&&n.comment&&n.comment.errorMessage||""),this.errors.rating||this.errors.comment)return[2];this.creating=!0,this.serverError=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.$api.composer.action.post({name:this.createAction,data:this.model})];case 2:return d.sent(),this.removeModelFromSessionStorage(e),this.resetModelContent(),[3,4];case 3:return r=d.sent(),this.serverError="Ваш отзыв не был отправлен. Пожалуйста, попробуйте снова.",this.$logger.error({exception:r,message:c.j.ERROR_CREATE_REVIEW}),this.creating=!1,[2];case 4:return this.creating=!1,this.created=!0,setTimeout((function(){l.$emit("created",l.activeProduct.id)}),2e3),[2]}}))}))},changeActiveProduct:function(t,e){this.$emit("changeActiveProduct",t,e)},changeAnonymous:function(t){this.$emit("changeAnonymous",t),this.isAnonymous=t},updateModelContent:function(t,e){var n=this.getModelFromSessionStorage(t);e&&this.needSetModelToSessionStorage(e),n&&(e||(n.rating=this.rating),this.restoreModel(n)),!n&&e&&this.resetModelContent()},onFocus:function(){this.errors.comment&&(this.errors.comment="")}}}},f145f:function(t,e,n){"use strict";var o=n("ecfc3"),r=n.n(o);e.default=r.a},f2e23:function(t,e,n){t.exports={button:"e2w5",input:"e2w6",icon:"e2w7",mobile:"e2w8"}},f42ee:function(t,e,n){"use strict";var o=n("d48b3"),r=n.n(o);e.default=r.a},f50e5:function(t,e,n){t.exports={contextualQuestion:"g0o6",header:"g0o7",title:"g0o8",previewWrapper:"g0o9",previewVariant:"g0p",previewInfo:"g0p0",previewVariantActive:"g0p1",line:"g0p2",variants:"g0p3",interactiveLineZone:"g0p4",variant:"g0p5",caption:"g0p6",interactiveZone:"g0p7",input:"g0p8",circle:"g0p9",circleActive:"g0q",circleAvatar:"g0q0",circleAvatarActive:"g0q1",interactiveZoneHover:"g0q2",mobile:"g0q3"}},f86f6:function(t,e,n){"use strict";var o=n("b1404"),r=n.n(o);e.default=r.a},fa77a:function(t,e,n){t.exports={container:"gw6",title:"gw7",description:"gw8",contentWrapper:"gw9",promo:"gx",adultContentContainer:"gx0",adultCard:"gx1",commentField:"gx2",controls:"gx3",notRate:"gx4",":hover":"gx5",notRateIcon:"gx6",ratingWrapper:"gx7",product:"gx8",notification:"gx9",photos:"gy",videos:"gy0",contextQuestions:"gy1",contextualQuestion:"gy2",footer:"gy3"}},ffa91:function(t,e,n){"use strict";var o=n("f2e23"),r=n.n(o);e.default=r.a}}]);