/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[627],{"04a38":function(e,t,n){e.exports={dragAndDropArea:"e2u5",pageDropZone:"e2u6",infoMessage:"e2u7",icon:"e2u8",active:"e2u9"}},"08c19":function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var s in a=arguments[t])Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t};e.exports={functional:!0,render:function(e,a){var t=a._c,o=(a._v,a.data),s=a.children,l=void 0===s?[]:s,c=o.class,i=o.staticClass,d=o.style,f=o.staticStyle,h=o.attrs,p=void 0===h?{}:h,v=r(o,["class","staticClass","style","staticStyle","attrs"]);return t("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p)},v),l.concat([t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3v-.334l2.676.888a1 1 0 001.315-.949v-9.21a1 1 0 00-1.326-.945L18 7.37V7a3 3 0 00-3-3H5zm10 2a1 1 0 011 1v10a1 1 0 01-1 1H5a1 1 0 01-1-1V7a1 1 0 011-1h10zm3.1 8.592v-5.14l1.89-.652v6.42l-1.89-.628zm-6.97-3.753l-.89-1.692a.269.269 0 00-.48 0l-.89 1.692-1.639.258a.27.27 0 00-.141.068.284.284 0 00-.02.394l1.142 1.298-.255 1.824a.285.285 0 00.03.172.27.27 0 00.369.114L10 14.06l1.644.906c.051.028.11.039.168.03a.278.278 0 00.23-.316l-.254-1.824 1.142-1.298a.282.282 0 00-.161-.462l-1.639-.258z",fill:"currentColor"}})]))}}},"0ba6f":function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function r(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}function o(e){var t,n;return!1!==r(e)&&("function"==typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}n.r(t);var dfn=Object.defineProperty,l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(e,t,n){void 0===n&&(n=!1);var r={_vueTypes_name:{value:e},def:{value:function(e){return void 0!==e||this.default?(l(e)?this.default=function(){return[].concat(e)}:o(e)?this.default=function(){return Object.assign({},e)}:this.default=e,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return n&&(r.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},r),t)}var d,f,h=(d={utils:{toType:c,validate:function(){return!0}}},f={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(d,"sensibleDefaults",{enumerable:!1,set:function(e){f=!1===e?{}:!0===e?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:e},get:function(){return f}})),v={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function m(e,t,n,r,o){var l;void 0===r&&(r=!1),void 0===o&&(o=!1);var d=((l={})[r?"get":"value"]=function(){return c(t,n,o).def(r?h.sensibleDefaults[t]:void 0)},l);return dfn(e,t,d)}function y(e,t,n){return function(r){return m(e,r,{type:v[r]||null},t,n)}}["any","func","bool","string","number","array","object","symbol"].forEach(y(h,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(y(h,!1)),m(h,"integer",{type:Number},!0),dfn(h,"shape",{value:function(){return dfn(c("shape",{type:Object}),"loose",{get:function(){return this}})}}),h.extend=function(e){var t=e.name,n=e.validate,r=e.getter,l=void 0!==r&&r,c=e.type,d=void 0===c?null:c,f=o(d)&&d.type?null:d;return m(h,t,{type:f},l,!!n)};t.default=h},"11e7e":function(e,t,n){"use strict";var r=n("96294"),o=n.n(r);t.default=o.a},"15b78":function(e,t,n){"use strict";var r=n("0ba6f"),o=n("d68e9"),l={name:"ProductList",components:{OzImage:o.OzImage},props:{productPhotos:r.default.arrayOf(r.default.string).def([])},computed:{productPhotosVisible:function(){return this.productPhotos.slice(0,4)},isProductLabel:function(){return this.productPhotos.length>4},productLabelCount:function(){if(this.isProductLabel)return this.productPhotos.length-4}}},c=n("92fcb"),d=n("b429c");var component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.productWrapper},[e._l(e.productPhotosVisible,(function(img,t){return n("div",{key:t,class:e.$style.image},[n("OzImage",{attrs:{src:img,size:40}})],1)})),e._v(" "),e.isProductLabel?n("div",{class:e.$style.label},[e._v("\n    +"+e._s(e.productLabelCount)+"\n  ")]):e._e()],2)}),[],!1,(function(e){this.$style=c.default.locals||c.default}),null,null);t.a=component.exports},"16e80":function(e,t,n){"use strict";var r=n("6ef88"),o=n.n(r);t.default=o.a},"1a6ab":function(e,t,n){e.exports={deliveryForm:"g0h8",default:"g0h9",ratingWrapper:"g0i",rating:"g0i0",ratingLabel:"g0i1",ratingTitle:"g0i2",title:"g0i3",main:"g0i4",textarea:"g0i5",photosList:"g0i6",notification:"g0i7",error:"g0i8",footer:"g0i9",mobile:"g0j",callCheckbox:"g0j0",formButton:"g0j1"}},"24a4b":function(e,t,n){"use strict";var r=n("6d0af"),o=n.n(r);t.default=o.a},"2d4e5":function(e,t,n){"use strict";var r=n("46190"),o=n.n(r);t.default=o.a},"2f462":function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var s,t=1,n=arguments.length;t<n;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,s){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)s.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]])}return t};e.exports={functional:!0,render:function(e,s){var t=s._c,o=(s._v,s.data),l=s.children,a=void 0===l?[]:l,c=o.class,i=o.staticClass,d=o.style,f=o.staticStyle,p=o.attrs,h=void 0===p?{}:p,v=r(o,["class","staticClass","style","staticStyle","attrs"]);return t("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),a.concat([t("path",{attrs:{d:"M17.293 7.293L10 14.586l-3.293-3.293a1 1 0 00-1.414 1.414L10 17.414l8.707-8.707a1 1 0 00-1.414-1.414z",fill:"currentColor"}})]))}}},32286:function(e,t,n){e.exports={photoListWrapper:"g1e3",photoWrapper:"g1e4",photo:"g1e5"}},"394df":function(e,t,n){"use strict";var r=n("0ba6f"),o=n("a1cf5"),l=n.n(o),c=n("ff287"),d=n.n(c),f={name:"Header",components:{ProductList:n("15b78").a},inject:{isMobile:{default:!1}},props:{header:r.default.shape({title:r.default.string.def(""),info:r.default.arrayOf(r.default.string).def([]),productPhotos:r.default.arrayOf(r.default.string).def([])})},computed:{headerInfo:function(){return d()(this.header,"info")||[]},isHeaderInfo:function(){return!l()(this.headerInfo)},productPhotos:function(){return d()(this.header,"productPhotos")||[]},isProductPhotos:function(){return!l()(this.productPhotos)},headerInfoCount:function(){return this.headerInfo.length-1}}},h=n("24a4b"),v=n("b429c");var component=Object(v.a)(f,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.header,(e={},e[t.$style.mobile]=t.isMobile,e)]},[r("div",{class:t.$style.headerInfoWrapper},[t.isHeaderInfo?t._l(t.headerInfo,(function(e,n){return r("div",{key:n,class:t.$style.headerInfo},[t._v("\n        "+t._s(e)+"\n        "),n<t.headerInfoCount?r("span",[t._v("• ")]):t._e()])})):t._e(),t._v(" "),r("div",{class:t.$style.headerTitle},[t._v(t._s(t.header.title))])],2),t._v(" "),t.isProductPhotos?r("ProductList",{attrs:{"product-photos":t.productPhotos}}):t._e()],1)}),[],!1,(function(e){this.$style=h.default.locals||h.default}),null,null);t.a=component.exports},"39fac":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"m",(function(){return o})),n.d(t,"t",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"r",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"u",(function(){return v})),n.d(t,"v",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return O})),n.d(t,"s",(function(){return E})),n.d(t,"o",(function(){return w})),n.d(t,"q",(function(){return $})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return T})),n.d(t,"n",(function(){return I})),n.d(t,"p",(function(){return S})),n.d(t,"l",(function(){return C})),n.d(t,"h",(function(){return M}));var r="createComment",o="rpReportAbuse",l="rpSetOpinionUsefulness",c="rpDeleteMyReview",d="rpImageUpload",f="rpGetCommentsByReviewId",h="rpIgnoreItem",v="UNUSEFUL",m="USEFUL",y="usefulness_desc",_="Пользователь OZON",O="П",E="rdImageUpload",w="reviewsSubscribeV1",$="reviewsUnsubscribeV1",x="reviews/CHANGE_SORTING_REVIEWS",P="reviews/CHANGE_FILTERS_REVIEWS",T="reviews/CHANGE_REVIEW_VARIANT_MODE",I="createReviewForm",S="3000",C="Этот пользователь может предоставлять разъяснения, официальную информацию и консультировать по вопросам, касающимся товаров.",M="Оцените покупку"},"3af50":function(e,t,n){e.exports={imageWrapper:"e2v7",delete:"e2v8",icon:"e2v9",image:"e2w",imageCdn:"e2w0",overlay:"e2w1",loader:"e2w2",error:"e2w3",mobile:"e2w4"}},"3b9de":function(e,t,n){e.exports={header:"g1l7",pointer:"g1l8",title:"g1l9",validIcon:"g1m",accordionIcon:"g1m0",collapseIn:"g1m1",required:"g1m2"}},46190:function(e,t,n){e.exports={modalWrapper:"gh2",body:"gh3",message:"gh4",formActive:"gh5",loader:"gh6",header:"gh7",mobile:"gh8"}},"48e32":function(e,t,n){"use strict";var r=n("4cc4e"),o=n.n(r);t.default=o.a},"4cc4e":function(e,t,n){e.exports={wrapper:"g1l4",checkbox:"g1l5",mobile:"g1l6"}},56527:function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),a=t.children,l=void 0===a?[]:a,c=s.class,i=s.staticClass,d=s.style,f=s.staticStyle,h=s.attrs,v=void 0===h?{}:h,p=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v)},p),l.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 17V4h13v3a1 1 0 102 0V2H2v17h5a1 1 0 100-2H4zm8 1a1 1 0 10-2 0v4h4a1 1 0 100-2h-2v-2zm9-1a1 1 0 00-1 1v2h-2a1 1 0 100 2h4v-4a1 1 0 00-1-1zm-1-5v2a1 1 0 102 0v-4h-4a1 1 0 100 2h2zm-8 2v-2h2a1 1 0 100-2h-4v4a1 1 0 102 0z",fill:"currentColor"}})]))}}},"5f5c2":function(e,t,n){"use strict";var r=n("1a6ab"),o=n.n(r);t.default=o.a},"6b668":function(e,t,n){"use strict";t.a={inject:{isMobile:{default:!1}}}},"6d0af":function(e,t,n){e.exports={header:"g0f6",headerTitle:"g0f7",headerInfo:"g0f8",mobile:"g0f9",headerInfoWrapper:"g0g"}},"6ef88":function(e,t,n){e.exports={success:"e2w9",error:"e2x"}},"6f30f":function(e,t,n){e.exports={productWrapper:"g0r2",image:"g0r3",label:"g0r4"}},"6ff49":function(e,t,n){e.exports={messageWrapper:"g0h1",root:"g0h2",messageTitle:"g0h3",messageSubtitle:"g0h4",messageIcon:"g0h5",mobile:"g0h6",wrapper:"g0h7"}},78763:function(e,t,n){"use strict";var r=n("11078");t.a={inheritAttrs:!1,computed:{showWidget:function(){return!this.hasWidgetError&&(Object.keys(this.widgetState).length||this.asyncType===r.a)},hasWidgetError:function(){return this.widgetState.error}},inject:{$isMobile:{from:"isMobile",default:!1}}}},"80c83":function(e,t,n){e.exports={uploadImages:"e2m",title:"e2m0",count:"e2m1",container:"e2m2",containerHasImage:"e2m3",info:"e2m4",text:"e2m5",note:"e2m6",buttonHasImage:"e2m7",uploadImage:"e2m8",error:"e2m9",narrow:"e2n",mobile:"e2n0"}},"889e0":function(e,t,n){"use strict";var r=n("04a38"),o=n.n(r);t.default=o.a},"8bbbb":function(e,t,n){"use strict";var r,o,l=n("0ba6f"),c=n("b2560"),d=n.n(c),f=n("08c19"),h=n.n(f),v=n("6b668");!function(e){e.IMAGE="image",e.VIDEO="video"}(o||(o={}));var m=((r={})[o.IMAGE]="PhotoIcon",r[o.VIDEO]="VideoIcon",r),y={name:"UploadPhotos",components:{PhotoIcon:d.a,VideoIcon:h.a},mixins:[v.a],props:{uploadType:l.default.oneOf(Object.values(o)).def(o.IMAGE),acceptTypes:l.default.string.def(".jpg, .jpeg, .png")},data:function(){return{ICON_MAP:m}},methods:{onChange:function(e){var t=e.target.files;this.$emit("upload",t),this.$refs.uploadInput.value=""}}},_=n("ffa91"),O=n("b429c");var component=Object(O.a)(y,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.button,(e={},e[t.$style.mobile]=t.isMobile,e)]},[r("input",{directives:[{name:"qa",rawName:"v-qa:id",value:"uploaded-"+t.uploadType,expression:"`uploaded-${uploadType}`",arg:"id"}],ref:"uploadInput",class:t.$style.input,attrs:{accept:t.acceptTypes,multiple:"",type:"file"},on:{change:t.onChange}}),t._v(" "),r("span",{class:t.$style.icon},[r(t.ICON_MAP[t.uploadType],{tag:"component"})],1)])}),[],!1,(function(e){this.$style=_.default.locals||_.default}),null,null);t.a=component.exports},"8fe13":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var r="reviews/OPEN_DELIVERY_REVIEW_POPUP",o="reviews/DELIVERY_REVIEW_SUCCESS_CREATED",l="drsi"},"92fcb":function(e,t,n){"use strict";var r=n("6f30f"),o=n.n(r);t.default=o.a},96294:function(e,t,n){e.exports={groupHeaderWrapper:"g1e2"}},a0409:function(e,t,n){"use strict";var r=n("3b9de"),o=n.n(r);t.default=o.a},a2d27:function(e,t,n){"use strict";var r=n("32286"),o=n.n(r);t.default=o.a},b235c:function(e,t,n){"use strict";n.r(t);var r=n("ff287"),o=n.n(r),l=n("78763"),c=n("d3037"),d=n("9e82e"),f=n("370d9"),h=n("d68e9"),v=n("f24c5"),m=n.n(v),header=n("394df"),y=n("a1cf5"),_=n.n(y),O=n("0ba6f"),E=n("01ff4"),w=n.n(E),$=n("bd98f"),x=n.n($),P=n("ed000"),T=["comment","photos","callMe"],I=function(){return(I=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},S={values:O.default.arrayOf(O.default.shape({id:O.default.string.def(""),text:O.default.string.def(""),isSelected:O.default.bool.def(!1)}).loose).def([])},C={title:O.default.string.def(""),info:O.default.string.def(""),images:O.default.arrayOf(O.default.string).def([]),values:S.values},M={group:O.default.oneOfType([O.default.shape({title:O.default.string.def(""),isEnabled:O.default.bool.def(!1),values:S.values,groups:O.default.arrayOf(O.default.shape(I({},C)).loose).def([])}).loose,{validator:function(e){return null===e}},{validator:function(e){return void 0===e}}])},j={groups:O.default.arrayOf(M.group).def([])},A={comment:O.default.oneOfType([O.default.shape({id:O.default.oneOf(T).def("comment"),placeholder:O.default.string.def("Комментарий"),value:O.default.string.def(""),isEnabled:O.default.bool.def(!1)}).loose,{validator:function(e){return null===e}},{validator:function(e){return void 0===e}}])},D={photos:O.default.oneOfType([O.default.shape({id:O.default.oneOf(T).def("photos"),limit:O.default.number.def(10),list:O.default.arrayOf(O.default.string).def([]),isEnabled:O.default.bool.def(!1)}).loose,{validator:function(e){return null===e}},{validator:function(e){return void 0===e}}])},k={callMe:O.default.oneOfType([O.default.shape({id:O.default.oneOf(T).def("callMe"),title:O.default.string.def("Свяжитесь со мной"),isSelected:O.default.bool.def(!1),isEnabled:O.default.bool.def(!1)}).loose,{validator:function(e){return null===e}},{validator:function(e){return void 0===e}}])},L={annotation:O.default.oneOfType([O.default.shape({text:O.default.string.def(""),image:O.default.string.def("")}).loose,{validator:function(e){return null===e}},{validator:function(e){return void 0===e}}])},R=n("ef64b"),V=function(){return(V=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},F={name:"AnswersSimple",components:{OzCheckbox:h.OzCheckbox},props:V(V({},S),{disabled:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)}),methods:{onChange:function(){this.$emit("checkedValue")}}},z=n("48e32"),G=n("b429c");var H=Object(G.a)(F,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.wrapper,(e={},e[t.$style.mobile]=t.isMobile,e)]},t._l(t.values,(function(e,n){return r("div",{key:n},[r("OzCheckbox",{class:t.$style.checkbox,attrs:{"control-position":t.isMobile?"right":"left",disabled:t.disabled},on:{change:t.onChange},model:{value:e.isSelected,callback:function(n){t.$set(e,"isSelected",n)},expression:"value.isSelected"}},[t._v("\n      "+t._s(e.text)+"\n    ")])],1)})),0)}),[],!1,(function(e){this.$style=z.default.locals||z.default}),null,null).exports,U=n("15b78"),N=function(){return(N=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},W={name:"AnswersPackage",components:{AnswersSimple:H,ProductList:U.a},props:{groups:O.default.arrayOf(O.default.shape(N({},C)).loose),disabled:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)},methods:{onCheckedValue:function(){this.$emit("checkedValue")}}},B=n("edf2b");var X=Object(G.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.groups,(function(t,r){var o;return n("div",{key:r},[n("div",{class:[e.$style.header,(o={},o[e.$style.mobile]=e.isMobile,o)]},[n("div",[n("div",{class:e.$style.title},[e._v(e._s(t.title))]),e._v(" "),n("div",{class:e.$style.info},[e._v(e._s(t.info))])]),e._v(" "),n("ProductList",{attrs:{"product-photos":t.images}})],1),e._v(" "),n("AnswersSimple",{attrs:{values:t.values,disabled:e.disabled,"is-mobile":e.isMobile},on:{checkedValue:e.onCheckedValue}})],1)})),0)}),[],!1,(function(e){this.$style=B.default.locals||B.default}),null,null).exports,Z=function(){return(Z=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},Y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},Q=function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(Y(arguments[i]));return e},J={name:"GroupAnswers",components:{Header:R.a,AnswersSimple:H,AnswersPackage:X},props:Z(Z({},M),{rating:O.default.number.def(0),isDisabled:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)}),data:function(){return{isCollapsed:!0}},computed:{groupSimple:function(){return o()(this.group,"values")||[]},isGroupSimple:function(){return!_()(this.groupSimple)},groupPackage:function(){return o()(this.group,"groups")||[]},isGroupPackage:function(){return!_()(this.groupPackage)},isAnswersSimple:function(){return this.isGroupSimple&&(!this.isCollapsed&&this.group.title||!this.group.title||this.isDisabled)},isAnswersPackage:function(){return this.isGroupPackage&&this.group.title&&(!this.isCollapsed||this.isDisabled)},selectedGroupSimple:function(){if(this.isGroupSimple)return this.getSeletValues(this.groupSimple)},groupPackageValues:function(){if(this.isGroupPackage)return this.groupPackage.reduce((function(e,t){return t.values&&(e=Q(e,t.values)),e}),[])},isGroupPackageValues:function(){return!_()(this.groupPackageValues)},selectedGroupPackage:function(){if(this.isGroupPackageValues)return this.getSeletValues(this.groupPackageValues)},isSelectedCheckbox:function(){return!_()(this.selectedGroupSimple)||!_()(this.selectedGroupPackage)}},watch:{rating:function(){this.onCheckedValue()}},mounted:function(){this.onCheckedValue()},methods:{onToggle:function(e){this.isCollapsed=e},getSeletValues:function(e){return e.find((function(e){return e.isSelected}))},onCheckedValue:function(){this.isGroupSimple&&this.$emit("checkedValue",this.groupSimple),this.isGroupPackageValues&&this.$emit("checkedValue",this.groupPackageValues)}}},K=Object(G.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.group.title?n("Header",{attrs:{title:e.group.title,"is-collapsed":e.isCollapsed,"is-valid":e.isSelectedCheckbox,"is-disabled":e.isDisabled},on:{toggle:e.onToggle}}):e._e(),e._v(" "),e.isAnswersSimple?n("AnswersSimple",{attrs:{values:e.groupSimple,disabled:!e.group.isEnabled,"is-mobile":e.isMobile},on:{checkedValue:e.onCheckedValue}}):e._e(),e._v(" "),e.isAnswersPackage?n("AnswersPackage",{attrs:{groups:e.groupPackage,disabled:!e.group.isEnabled,"is-mobile":e.isMobile},on:{checkedValue:e.onCheckedValue}}):e._e()],1)}),[],!1,null,null,null).exports,ee=function(){return(ee=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},te={name:"AnswersSimple",components:{GroupAnswers:K},props:ee(ee({},j),{rating:O.default.number.def(0),isDisabled:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)}),methods:{onFindCheckedValues:function(e){this.$emit("findCheckedValues",e)}}},ne=n("11e7e");var ie=Object(G.a)(te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.groups,(function(t,r){return n("div",{key:r,class:e.$style.groupHeaderWrapper},[n("GroupAnswers",{attrs:{group:t,"is-disabled":e.isDisabled,rating:e.rating,"is-mobile":e.isMobile},on:{checkedValue:e.onFindCheckedValues}})],1)})),0)}),[],!1,(function(e){this.$style=ne.default.locals||ne.default}),null,null).exports,re={name:"GroupAnswers",components:{OzImage:h.OzImage},props:{photosList:O.default.arrayOf(O.default.string).def([])}},ae=n("a2d27");var oe=Object(G.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.photoListWrapper},e._l(e.photosList,(function(t,r){return n("div",{key:r,class:e.$style.photoWrapper},[n("OzImage",{class:e.$style.photo,attrs:{src:t,size:80}})],1)})),0)}),[],!1,(function(e){this.$style=ae.default.locals||ae.default}),null,null).exports,se="Произошла ошибка при создании отзыва, попробуйте снова.",le=function(){return(le=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},ue={name:"DeliveryForm",components:{OzRating:h.OzRating,OzTextarea:h.OzTextarea,OzNotification:h.OzNotification,OzButton:h.OzButton,OzCheckbox:h.OzCheckbox,UploadImages:P.a,GroupsList:ie,PhotosList:oe},props:{ratingData:O.default.arrayOf(O.default.shape({rating:O.default.number.def(0),text:O.default.string.def(""),isSelected:O.default.bool.def(!1),isEnabled:O.default.bool.def(!0),isFillRequired:O.default.bool.def(!1),form:O.default.shape({title:O.default.string.def(""),groups:j.groups,comment:A.comment,photos:D.photos,callMe:k.callMe,annotation:L.annotation}).loose}).loose),button:O.default.shape({text:O.default.string.def("Отправить"),action:O.default.string.def("")}).loose,shipmentData:O.default.string.def(""),isCreating:O.default.bool.def(!1),isErrorCreating:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)},data:function(){return{InfoIcon:w.a,ratingValue:0,checkedValues:new Set,checkedValuesModel:{},isPhotosLoading:!1,commentTextModel:"",uploadPhotos:[],TEXTAREA_HEIGHT:"72px",TEXTAREA_HEIGHT_MOBILE:"56px",TEXTAREA_MAX_HEIGHT:"200px",TEXTAREA_MAX_HEIGHT_MOBILE:"150px",TEXTAREA_MAX_LENGTH:"3000",ERROR_TEXT:se}},computed:{isRatingDefault:function(){return 0===this.rating||!this.isRequired&&!this.deliveryFormActive},activeRatingData:function(){var e=this;return this.ratingData.find((function(t){return t.rating===e.rating}))},ratingDisabled:function(){return!o()(this.activeRatingData,"isEnabled")||!1},isRequired:function(){return o()(this.activeRatingData,"isFillRequired")||!1},deliveryFormActive:function(){return o()(this.activeRatingData,"form")||null},rating:function(){return this.ratingValue||o()(this.ratingData,"[0].rating")},ratingSize:function(){return this.isRatingDefault?"xl":"l"},comment:function(){return o()(this.deliveryFormActive,"comment")||null},photos:function(){return o()(this.deliveryFormActive,"photos")||[]},isPhotosList:function(){return!_()(this.photos.list)},annotation:function(){return o()(this.deliveryFormActive,"annotation")||null},groups:function(){return o()(this.deliveryFormActive,"groups")||[]},isGroups:function(){return!_()(this.groups)},iconName:function(){if(this.isErrorCreating)return x.a;if(this.annotation)switch(this.annotation.image){case"info":default:return w.a}},callToggle:function(){return o()(this.deliveryFormActive,"callMe")||null},isCallToggleActive:function(){var e;if(this.callToggle)return(e={})[""+this.callToggle.id]=this.callToggle.isSelected,e},isCommentTextModelInvalid:function(){return this.commentTextModel.length>0&&this.commentTextModel.length<3},isDisabledButton:function(){return this.isRequired&&!(this.commentTextModel||!_()(this.checkedValuesModel)||!_()(this.uploadPhotosModel))||this.isCommentTextModelInvalid},uploadPhotosModel:function(){var e;return _()(this.uploadPhotos)?[]:((e={})[""+this.photos.id]=this.uploadPhotos.map((function(e){return e.url})),e)},commentModel:function(){var e;return this.commentTextModel?((e={})[""+this.comment.id]=this.commentTextModel,e):""},isNotification:function(){return this.annotation&&this.isDisabledButton||this.isErrorCreating},notificationText:function(){return this.isCommentTextModelInvalid?"Комментарий должен быть от 3 до 3000 символов":this.isErrorCreating?se:this.annotation?this.annotation.text:void 0},modelForm:function(){return le(le(le(le({data:this.shipmentData,rating:this.rating},this.commentModel),this.uploadPhotosModel),this.isCallToggleActive),this.checkedValuesModel)}},watch:{modelForm:function(e,t){!this.ratingDisabled&&this.shipmentData&&e!==t&&this.setModelToSessionStorage()}},mounted:function(){if(this.comment&&!this.comment.isEnabled&&this.comment.value&&(this.commentTextModel=this.comment.value),!this.ratingDisabled&&this.shipmentData){var e=this.getModelFromSessionStorage();e&&this.restoreModelForm(e)}},methods:{onSubmit:function(){this.$emit("submitForm",this.modelForm)},onChangeRating:function(e){this.ratingValue=e,this.checkedValues.clear()},onFindCheckedValues:function(e){var t=this;this.checkedValuesModel={},this.checkedValues.add(e),this.checkedValues.forEach((function(e){e.filter((function(e){return e.isSelected})).map((function(e){t.checkedValuesModel[""+e.id]=e.isSelected}))}))},onRemoveError:function(){this.isErrorCreating&&this.$emit("removeError")},setModelToSessionStorage:function(){f.a.setItem("createDeliveryForm_"+this.shipmentData,le({rating:this.rating,photos:this.uploadPhotos},this.commentModel))},getModelFromSessionStorage:function(){return f.a.getItem("createDeliveryForm_"+this.shipmentData)},restoreModelForm:function(e){var t=e.rating,n=e.comment,r=e.photos;t&&(this.ratingValue=t),n&&(this.commentTextModel=n),r&&(this.uploadPhotos=r)}}},ce=n("5f5c2");var de=Object(G.a)(ue,(function(){var e,t,n,r,o=this,l=o.$createElement,c=o._self._c||l;return o.activeRatingData?c("form",{class:[o.$style.deliveryForm,(e={},e[o.$style.mobile]=o.isMobile,e),(t={},t[o.$style.default]=o.isRatingDefault,t)],attrs:{novalidate:""},on:{input:o.onRemoveError,submit:function(e){return e.preventDefault(),o.onSubmit(e)}}},[c("div",{class:o.$style.ratingWrapper},[c("OzRating",{class:o.$style.rating,attrs:{size:o.ratingSize,value:o.rating,"read-only":o.ratingDisabled},on:{input:o.onChangeRating}}),o._v(" "),c("div",{class:[o.$style.ratingLabel,(n={},n[o.$style.ratingTitle]=o.isRatingDefault,n)]},[o._v("\n      "+o._s(o.activeRatingData.text)+"\n    ")])],1),o._v(" "),o.deliveryFormActive?[c("h3",{class:o.$style.title},[o._v(o._s(o.deliveryFormActive.title))]),o._v(" "),c("div",{class:o.$style.main},[o.isGroups?c("GroupsList",{attrs:{groups:o.groups,rating:o.rating,"is-disabled":o.ratingDisabled,"is-mobile":o.isMobile},on:{findCheckedValues:o.onFindCheckedValues}}):o._e(),o._v(" "),o.comment?c("OzTextarea",{class:o.$style.textarea,attrs:{size:"m",placeholder:o.comment.placeholder,"max-length":o.TEXTAREA_MAX_LENGTH,"max-height":o.isMobile?o.TEXTAREA_MAX_HEIGHT_MOBILE:o.TEXTAREA_MAX_HEIGHT,height:o.isMobile?o.TEXTAREA_HEIGHT_MOBILE:o.TEXTAREA_HEIGHT,disabled:!o.comment.isEnabled,"auto-height-by-rows":!o.comment.isEnabled},model:{value:o.commentTextModel,callback:function(e){o.commentTextModel=e},expression:"commentTextModel"}}):o._e(),o._v(" "),o.photos.isEnabled?c("UploadImages",{attrs:{"upload-type":"delivery",limit:o.photos.limit,"title-visible":!1},on:{loading:function(e){o.isPhotosLoading=e}},model:{value:o.uploadPhotos,callback:function(e){o.uploadPhotos=e},expression:"uploadPhotos"}}):o._e(),o._v(" "),!o.photos.isEnabled&&o.isPhotosList?c("PhotosList",{class:o.$style.photosList,attrs:{"photos-list":o.photos.list}}):o._e()],1),o._v(" "),o.isNotification?c("OzNotification",{class:[o.$style.notification,(r={},r[o.$style.error]=o.isErrorCreating||o.isCommentTextModelInvalid,r)],attrs:{theme:"light",icon:o.iconName}},[o._v("\n      "+o._s(o.notificationText)+"\n    ")]):o._e(),o._v(" "),c("div",{class:o.$style.footer},[o.button?c("OzButton",{class:o.$style.formButton,attrs:{type:"submit",size:"xl",fill:o.isMobile,text:o.button.text,loading:o.isCreating||o.isPhotosLoading,disabled:o.isDisabledButton}}):o._e(),o._v(" "),o.callToggle?c("OzCheckbox",{class:o.$style.callCheckbox,attrs:{theme:"toggle",disabled:!o.callToggle.isEnabled,"control-position":o.isMobile?"right":"left"},model:{value:o.callToggle.isSelected,callback:function(e){o.$set(o.callToggle,"isSelected",e)},expression:"callToggle.isSelected"}},[o._v("\n        "+o._s(o.callToggle.title)+"\n      ")]):o._e()],1)]:o._e()],2):o._e()}),[],!1,(function(e){this.$style=ce.default.locals||ce.default}),null,null).exports,fe=n("fca9b"),pe=n.n(fe),he={name:"SuccessMessage",components:{OzButton:h.OzButton,SuccessIcon:pe.a},props:{title:O.default.string.def("Спасибо, что поделились мнением"),subtitle:O.default.string.def(""),withoutButton:O.default.bool.def(!1),isMobile:O.default.bool.def(!1)}},ge=n("de89b");var ve=Object(G.a)(he,(function(e,t){var n,r,o=t._c;return o("div",{class:[t.$style.messageWrapper,t.$style.root,t.data.class,(n={},n[t.$style.mobile]=t.props.isMobile,n)]},[o("div",[t.props.title?o("h3",{class:[t.$style.messageTitle,(r={},r[t.$style.wrapper]=t.props.withoutButton,r)]},[t.props.withoutButton?o(t.$options.components.SuccessIcon,{tag:"component",class:t.$style.messageIcon}):t._e(),t._v("\n      "+t._s(t.props.title)+"\n    ")],1):t._e(),t._v(" "),t.props.subtitle?o("div",{class:t.$style.messageSubtitle},[t._v(t._s(t.props.subtitle))]):t._e()]),t._v(" "),t.props.withoutButton?t._e():o(t.$options.components.OzButton,{tag:"component",attrs:{size:"xl",text:"Закрыть",theme:"secondary",fill:t.props.isMobile},on:{click:t.listeners.closePopup}})],1)}),[],!0,(function(e){this.$style=ge.default.locals||ge.default}),null,null).exports,me=n("8fe13"),be=n("6b668"),ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,l){function c(e){try{f(r.next(e))}catch(e){l(e)}}function d(e){try{f(r.throw(e))}catch(e){l(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,d)}f((r=r.apply(e,t||[])).next())}))},_e=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=body.call(e,o)}catch(e){l=[6,e],n=0}finally{t=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Oe=c.a.extend({name:"WebDeliveryRating",components:{OzModal:h.OzModal,OzTransition:h.OzTransition,Header:header.a,DeliveryForm:de,SuccessMessage:ve,Loader:m.a},mixins:[l.a,be.a],data:function(){return{isSuccessCreating:!1,isReviewCreating:!1,isErrorCreating:!1,loading:!1,SUCCESS_TEXT_SUBTITLE:"Ваш отзыв будет отправлен в отдел контроля качества доставки",shipmentIdFromLocation:null,isModalVisible:!1}},computed:{buttonForm:function(){return o()(this,"widgetState.button")||null}},created:function(){this.preventAsyncFetch()},mounted:function(){var e=this;this.$when(me.c,this.openPopupFromEvent),this.openPopupFromLocation(),this.afterRouteEnter((function(){e.openPopupFromLocation()}))},beforeDestroy:function(){this.$when.unsubscribe(me.c,this.openPopupFromEvent)},methods:{openPopup:function(e){return ye(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:if(this.loading)return[2];this.loading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchAsyncState({shipmentId:Number(e)})];case 2:return t.sent(),this.isModalVisible=!0,[3,4];case 3:return t.sent(),this.loading=!1,[2];case 4:return this.loading=!1,[2]}}))}))},openPopupFromEvent:function(e){var t=e.payload.shipmentId;this.openPopup(t)},openPopupFromLocation:function(){var e=this.$composerRouter.getParams().query[me.a];e&&(this.shipmentIdFromLocation=e,this.openPopup(this.shipmentIdFromLocation))},resetFlags:function(){this.isModalVisible=!1,this.isErrorCreating=!1,this.isSuccessCreating=!1},closePopup:function(){return ye(this,void 0,void 0,(function(){return _e(this,(function(e){switch(e.label){case 0:return this.isSuccessCreating?this.shipmentIdFromLocation?[4,this.removeQueryParam()]:[3,2]:[3,3];case 1:e.sent(),e.label=2;case 2:this.$store.dispatch(me.b),e.label=3;case 3:return this.resetFlags(),[2]}}))}))},redirectToNextModal:function(e){return ye(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:return this.shipmentIdFromLocation?[4,this.removeQueryParam()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.resetFlags(),[4,this.$store.dispatch("composer/GET_MODAL",{url:e,options:{theme:"empty",closeButtonPosition:this.isMobile?"inside":"outside"}})];case 3:return t.sent(),[2]}}))}))},removeQueryParam:function(){return ye(this,void 0,void 0,(function(){var e;return _e(this,(function(t){switch(t.label){case 0:return e=this.getPathWithoutQueryParam(me.a),[4,this.$composerRouter.replace(e,{silent:!0})];case 1:return t.sent(),[2]}}))}))},getPathWithoutQueryParam:function(param){var e=this.$composerRouter.getParams(),t=e.query,path=e.path;return t[param]&&delete t[param],Object.keys(t).reduce((function(e,n,r){return e+(r>0?"&":"?")+n+"="+t[n]}),path)},onRemoveError:function(){this.isErrorCreating=!1},onSubmitForm:function(e){return ye(this,void 0,void 0,(function(){var t,n,r;return _e(this,(function(o){switch(o.label){case 0:if(this.isReviewCreating)return[2];this.isReviewCreating=!0,o.label=1;case 1:return o.trys.push([1,5,,6]),t=this.buttonForm.action||"",[4,this.$api.composer.action.post({name:t,data:e})];case 2:return n=o.sent(),this.isReviewCreating=!1,this.isErrorCreating=!1,this.isSuccessCreating=!0,n.nextPageLink?[4,this.redirectToNextModal(n.nextPageLink)]:[3,4];case 3:o.sent(),o.label=4;case 4:return f.a.removeItem("createDeliveryForm_"+this.widgetState.data),[3,6];case 5:return r=o.sent(),this.isErrorCreating=!0,this.isReviewCreating=!1,this.$logger.error({exception:r,message:d.d.ERROR_CREATE_REVIEW}),[3,6];case 6:return[2]}}))}))}}}),Ee=n("2d4e5");var we=Object(G.a)(Oe,(function(){var e,t,n,r=this,o=r.$createElement,l=r._self._c||o;return l("div",[r.showWidget&&r.isModalVisible?l("OzModal",{attrs:{theme:"empty","close-button-position":r.isMobile?"inside":"outside","is-mobile-theme":r.isMobile},on:{close:r.closePopup}},[l("div",{class:[r.$style.modalWrapper,(e={},e[r.$style.mobile]=r.isMobile,e)]},[r.loading?l("div",{class:[r.$style.body,r.$style.message]},[l("Loader",{class:r.$style.loader})],1):[l("Header",{class:r.$style.header,attrs:{header:r.widgetState.header,"is-mobile":r.isMobile}}),r._v(" "),l("OzTransition",[r.isSuccessCreating?l("SuccessMessage",{class:[r.$style.body,(t={},t[r.$style.message]=r.isSuccessCreating,t)],attrs:{subtitle:r.SUCCESS_TEXT_SUBTITLE,"is-mobile":r.isMobile},on:{closePopup:r.closePopup}}):r._e()],1),r._v(" "),!r.isSuccessCreating&&r.widgetState.rating&&r.widgetState.rating.length?l("div",{class:[r.$style.body,(n={},n[r.$style.formActive]=!r.isSuccessCreating,n)]},[l("DeliveryForm",{attrs:{"rating-data":r.widgetState.rating,button:r.buttonForm,"shipment-data":r.widgetState.data,"is-creating":r.isReviewCreating,"is-error-creating":r.isErrorCreating,"is-mobile":r.isMobile},on:{removeError:r.onRemoveError,submitForm:r.onSubmitForm}})],1):r._e()]],2)]):r._e()],1)}),[],!1,(function(e){this.$style=Ee.default.locals||Ee.default}),null,null);t.default=we.exports},b2560:function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),a=t.children,l=void 0===a?[]:a,c=s.class,i=s.staticClass,d=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,v=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 6H7v14H1V7a3 3 0 013-3h16a3 3 0 013 3v10a3 3 0 01-3 3H10a1 1 0 110-2h10a1 1 0 001-1V7a1 1 0 00-1-1zm0 6a5 5 0 11-10 0 5 5 0 0110 0zm-5 3a3 3 0 110-6 3 3 0 010 6zM3 18h2V6H4a1 1 0 00-1 1v11z",fill:"currentColor"}})]))}}},bcb05:function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var s,t=1,n=arguments.length;t<n;t++)for(var a in s=arguments[t])Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,s){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};e.exports={functional:!0,render:function(e,s){var t=s._c,o=(s._v,s.data),a=s.children,l=void 0===a?[]:a,c=o.class,i=o.staticClass,d=o.style,f=o.staticStyle,p=o.attrs,h=void 0===p?{}:p,v=r(o,["class","staticClass","style","staticStyle","attrs"]);return t("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),l.concat([t("path",{attrs:{d:"M14.21 1.387l.083-.094a1 1 0 011.32-.083l.094.083L19.414 5l-3.707 3.707a1 1 0 01-1.497-1.32l.083-.094L15.585 6H12a7 7 0 00-6.996 6.76L5 13a7 7 0 1014 0 1 1 0 112 0 9 9 0 11-9.265-8.996L12 4h3.585l-1.292-1.293a1 1 0 01-.083-1.32l.083-.094-.083.094z",fill:"currentColor"}})]))}}},c1f8f:function(e,t,n){"use strict";var r=n("3af50"),o=n.n(r);t.default=o.a},cba5f:function(e,t,n){"use strict";var r,o=n("a09a9"),l=n.n(o),c=n("4066f"),d=n.n(c),f=n("279f1"),h=n.n(f),v=n("0ba6f"),m=n("d68e9"),y=n("fca9b"),_=n.n(y),O=n("bd98f"),E=n.n(O),w=(r={},h()(r,"success",_.a),h()(r,"error",E.a),r),$={name:"Notification",functional:!0,props:{notification:v.default.shape({type:v.default.oneOf(["success","error"]).isRequired,text:v.default.string.isRequired,action:v.default.string}).loose},render:function(e,t){var n=t.$style,r=t.props,o=t._v,data=t.data,c=Array.isArray(data.class)?data.class:[data.class||""],f=r.notification,h=f.type,text=f.text;return e(m.OzNotification,l()([{attrs:{icon:w[h]||_.a,iconColor:"error"===h?"ozAccentAlert":"ozGreenUi"},class:[].concat(d()(c),[n[h]])},{directives:data.directives}]),[o(text)])}},x=n("16e80"),P=n("b429c");var component=Object(P.a)($,void 0,void 0,!1,(function(e){this.$style=x.default.locals||x.default}),null,null);t.a=component.exports},cfa5c:function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),l=t.children,a=void 0===l?[]:l,c=s.class,i=s.staticClass,d=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,v=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[c,i],style:[d,f],attrs:Object.assign({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),a.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 0a8 8 0 110 16A8 8 0 018 0zm2.293 6.293L8 8.586 5.707 6.293a1 1 0 00-1.414 1.414L8 11.59l3.707-3.883a1 1 0 00-1.414-1.414z",fill:"currentColor"}})]))}}},d0f58:function(e,t,n){"use strict";var r,o=n("0ba6f"),l=n("56527"),c=n.n(l);!function(e){e.PAGE="page",e.BLOCK="block"}(r||(r={}));var d={name:"DragAndDropArea",components:{DropIcon:c.a},props:{dragZoneType:o.default.oneOf(Object.values(r)).def(r.PAGE),message:o.default.string.def("Перетащите фото сюда")},data:function(){return{isDragging:!1,DRAG_ZONE_TYPES:r}},mounted:function(){if(this.dragZoneType===r.PAGE){var e=this.$refs.pageDropZone;e&&(window.addEventListener("dragenter",this.onDragEnter),e.addEventListener("dragleave",this.onDragLeave))}else{var t=this.$refs.dragEnterArea,n=this.$refs.dragLeaveArea;t&&t.addEventListener("dragenter",this.onDragEnter),n&&n.addEventListener("dragleave",this.onDragLeave)}},beforeDestroy:function(){if(this.dragZoneType===r.PAGE){var e=this.$refs.pageDropZone;e&&(window.removeEventListener("dragenter",this.onDragEnter),e.removeEventListener("dragleave",this.onDragLeave))}else{var t=this.$refs.dragEnterArea,n=this.$refs.dragLeaveArea;t&&t.removeEventListener("dragenter",this.onDragEnter),n&&n.removeEventListener("dragleave",this.onDragLeave)}},methods:{onDragEnter:function(){this.isDragging=!0},onDragLeave:function(){this.isDragging=!1},onDrop:function(e){var t=e.dataTransfer.files||e.target.files;this.$emit("drop",t),this.isDragging=!1}}},f=n("889e0"),h=n("b429c");var component=Object(h.a)(d,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{ref:"dragEnterArea",class:t.$style.dragAndDropArea},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isDragging&&t.dragZoneType===t.DRAG_ZONE_TYPES.PAGE,expression:"isDragging && dragZoneType === DRAG_ZONE_TYPES.PAGE"}],ref:"pageDropZone",class:t.$style.pageDropZone,on:{dragover:function(e){e.preventDefault()},drop:function(e){return e.preventDefault(),e.stopPropagation(),t.onDrop(e)}}}),t._v(" "),r("div",{ref:"dragLeaveArea",class:[t.$style.infoMessage,(e={},e[t.$style.active]=t.isDragging,e)],on:{dragover:function(e){e.preventDefault()},drop:function(e){return e.preventDefault(),e.stopPropagation(),t.onDrop(e)}}},[r("DropIcon",{class:t.$style.icon}),t._v("\n    "+t._s(t.message)+"\n  ")],1),t._v(" "),t._t("default")],2)}),[],!1,(function(e){this.$style=f.default.locals||f.default}),null,null);t.a=component.exports},d9ca7:function(e,t,n){e.exports={header:"g1l0",title:"g1l1",info:"g1l2",mobile:"g1l3"}},de89b:function(e,t,n){"use strict";var r=n("6ff49"),o=n.n(r);t.default=o.a},dfd96:function(e,t,n){"use strict";var r=n("80c83"),o=n.n(r);t.default=o.a},ed000:function(e,t,n){"use strict";var r=n("0ba6f"),o=n("a1cf5"),l=n.n(o),c=n("c7aac"),d=n("5e33f"),f=n("676c9"),h=n("cba5f"),v=n("39fac"),m=n("6b668"),y=n("8bbbb"),_=n("d68e9"),O=n("bcb05"),E=n.n(O),w=n("6b74f"),$=n.n(w),x=n("1c310"),P={name:"UploadImage",components:{Loader:n.n(x).a,OzImage:_.OzImage,CrossIcon:$.a,RotateIcon:E.a},mixins:[m.a],props:{image:r.default.shape({file:r.default.any,name:r.default.string.def(""),dataURL:r.default.string.def(""),url:r.default.string.def(""),isLoading:r.default.bool,hasError:r.default.bool}).loose.isRequired},computed:{isLoading:function(){return this.image.isLoading||!1},hasError:function(){return this.image.hasError||!1}}},T=n("c1f8f"),I=n("b429c");var S=Object(I.a)(P,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.imageWrapper,(e={},e[t.$style.mobile]=t.isMobile,e)]},[t.image.dataURL?r("img",{class:t.$style.image,attrs:{src:t.image.dataURL}}):r("OzImage",{class:[t.$style.image,t.$style.imageCdn],attrs:{size:128,src:t.image.url,"use-cdn":!0}}),t._v(" "),t.hasError?r("div",{class:t.$style.error,on:{click:function(e){return t.$emit("reload")}}},[r("RotateIcon",{class:t.$style.icon})],1):t._e(),t._v(" "),t.isLoading?r("div",{class:t.$style.overlay},[r("Loader",{class:t.$style.loader})],1):t._e(),t._v(" "),r("button",{class:t.$style.delete,attrs:{type:"button"},on:{click:function(e){return t.$emit("delete")}}},[r("CrossIcon",{class:t.$style.icon})],1)],1)}),[],!1,(function(e){this.$style=T.default.locals||T.default}),null,null).exports,C=n("d0f58"),M=["product","delivery"],j=["default","narrow"],A=function(){return(A=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},D=function(e,t,n,r){return new(n||(n=Promise))((function(o,l){function c(e){try{f(r.next(e))}catch(e){l(e)}}function d(e){try{f(r.throw(e))}catch(e){l(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,d)}f((r=r.apply(e,t||[])).next())}))},k=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&l[0]?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;switch(n=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=body.call(e,o)}catch(e){l=[6,e],n=0}finally{t=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},L=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},R=function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(L(arguments[i]));return e},V={name:"UploadImages",components:{DragAndDrop:C.a,UploadButton:y.a,UploadImage:S,Notification:h.a},mixins:[m.a],props:{displayType:r.default.oneOf(j).def(j[0]),value:r.default.arrayOf(r.default.shape({url:r.default.string.def(""),hash:r.default.string.def("")}).loose).def((function(){return[]})),limit:r.default.number.def(10),titleVisible:r.default.bool.def(!0),uploadType:r.default.oneOf(M).def(M[0])},data:function(){return{images:[],invalidTypesFiles:[],serverErrorFiles:[],excessCount:0,MAX_IMAGE_COUNT:10,UPLOAD_TYPE_PRODUCT:"product",UPLOAD_TYPE_DELIVERY:"delivery"}},computed:{imagesCount:function(){return this.images.length},title:function(){return this.value&&this.value.length?"Загружены фотографии":"Добавьте фотографии"},hasError:function(){return this.serverErrorFiles.length||this.invalidTypesFiles.length||this.excessCount},notificationError:function(){var e=[],t=this.invalidTypesFiles.length,n=this.serverErrorFiles.length;if(t){var r=this.invalidTypesFiles.map((function(e){return e.name})).join(", ");t>1?e.push("Файлы "+r+" не были загружены — неправильный формат изображения."):e.push("Файл "+r+" не был загружен — неправильный формат изображения.")}if(n){var o=this.serverErrorFiles.map((function(e){return e.name})).join(", ");e.push("Не удалось загрузить "+(n>1?"файлы":"файл")+" "+o+" - произошла ошибка.")}return this.excessCount&&e.push(Object(c.f)(this.excessCount,["файл не загружен","файла не загружено","файлов не загружено"])+" - превышен лимит."),{type:"error",text:e.join(" ")}}},watch:{value:{handler:function(e){var t=this;if(l()(e))this.images=[];else{var n=e.filter((function(image){return image.hash})).filter((function(image){return!t.isRepetitiveImage(image)}));this.images=R(this.images,n)}},immediate:!0},images:{handler:function(e){var t=e.filter((function(image){return image.isLoading})).length;this.$emit("loading",t>0)},deep:!0}},methods:{onUpload:function(e){var t=this,n=Array.from(e),r=(n=n.filter((function(e){return!t.isRepetitiveFile(e)}))).filter((function(e){return t.isValidTypeFile(e)}));this.invalidTypesFiles=n.filter((function(e){return!t.isValidTypeFile(e)}));var o=this.images.length,l=o+r.length;if(l>this.limit){var c=this.limit-o;this.excessCount=l-this.limit,r=R(r.slice(0,c))}r.forEach((function(e){return D(t,void 0,void 0,(function(){var image,t,n;return k(this,(function(r){switch(r.label){case 0:return[4,this.processFile(e)];case 1:image=r.sent(),this.images=R(this.images,[A(A({},image),{isLoading:!0})]),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.loadImage(image)];case 3:return t=r.sent().url,-1!==(n=this.images.findIndex((function(e){return e.name===image.name})))&&this.updateImages(n,A(A({},image),{url:t,hasError:!1,isLoading:!1})),[3,5];case 4:return r.sent(),-1!==(n=this.images.findIndex((function(e){return e.name===image.name})))&&(this.updateImages(n,A(A({},image),{url:null,hasError:!0,isLoading:!1})),this.serverErrorFiles.push(image)),[3,5];case 5:return[2]}}))}))}))},processFile:function(e){return D(this,void 0,void 0,(function(){var t,n,r,o,l;return k(this,(function(c){switch(c.label){case 0:return t=e.name,n=e.size,r=[t,n].join(),[4,Object(d.a)(e)];case 1:return o=c.sent().dataURL,l=Object(f.a)(o),[2,{hash:r,file:l,name:t,dataURL:o}]}}))}))},loadImage:function(e){var t=e.file,n=e.name;return D(this,void 0,void 0,(function(){var e,r;return k(this,(function(o){switch(o.label){case 0:return e=new FormData,r=null,e.append("file",t,n),"product"!==this.uploadType?[3,2]:[4,this.$api.composer.action.post({name:v.r,data:e})];case 1:r=o.sent(),o.label=2;case 2:return"delivery"!==this.uploadType?[3,4]:[4,this.$api.composer.action.post({name:v.s,data:e})];case 3:r=o.sent(),o.label=4;case 4:return[2,r]}}))}))},onDeleteImage:function(e){this.images=R(this.images.slice(0,e),this.images.slice(e+1)),this.updateValue(),this.resetErrorState()},updateImages:function(e,image){this.images=R(this.images.slice(0,e),[image],this.images.slice(e+1)),this.updateValue()},updateValue:function(){var e=this.images.filter((function(image){return image.url})).map((function(image){return{url:image.url,hash:image.hash}}));this.$emit("input",e)},resetErrorState:function(){this.invalidTypesFiles=[],this.serverErrorFiles=[],this.excessCount=0},onReloadImage:function(image){return D(this,void 0,void 0,(function(){var e,t;return k(this,(function(n){switch(n.label){case 0:e=this.images.findIndex((function(e){return e.name===image.name})),this.updateImages(e,A(A({},image),{hasError:!1,isLoading:!0})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.loadImage(image)];case 2:return t=n.sent().url,this.updateImages(e,A(A({},image),{url:t,hasError:!1,isLoading:!1})),[3,4];case 3:return n.sent(),this.updateImages(e,A(A({},image),{url:null,hasError:!0,isLoading:!1})),[3,4];case 4:return this.resetErrorState(),[2]}}))}))},isValidTypeFile:function(e){return"image/jpeg"===e.type||"image/png"===e.type},isRepetitiveFile:function(e){var t=[e.name,e.size].join();return this.images.find((function(image){return image.hash===t}))},isRepetitiveImage:function(img){return this.images.find((function(image){return image.hash===img.hash}))}}},F=n("dfd96");var z=Object(I.a)(V,(function(){var e,t,n,r=this,o=r.$createElement,l=r._self._c||o;return l("DragAndDrop",{class:[r.$style.uploadImages,r.$style[r.displayType],(e={},e[r.$style.mobile]=r.isMobile,e)],attrs:{"drag-zone-type":"block"},on:{drop:r.onUpload}},[r.titleVisible?l("div",{class:r.$style.title},[r._v("\n    "+r._s(r.title)+"\n    "),r.value&&r.value.length?l("span",{directives:[{name:"qa",rawName:"v-qa:id",value:"photo-counter",expression:"'photo-counter'",arg:"id"}],class:r.$style.count},[r._v(r._s(r.value.length)+"/"+r._s(r.limit))]):r._e()]):r._e(),r._v(" "),l("div",{class:[r.$style.container,(t={},t[r.$style.containerHasImage]=r.imagesCount,t)]},[r.imagesCount?r._l(r.images,(function(image,e){return l("UploadImage",{key:image.hash,class:r.$style.uploadImage,attrs:{image:image},on:{delete:function(t){return r.onDeleteImage(e)},reload:function(e){return r.onReloadImage(image)}}})})):r._e(),r._v(" "),r.imagesCount<r.limit?l("UploadButton",{class:[r.$style.uploadButton,(n={},n[r.$style.buttonHasImage]=r.imagesCount,n)],on:{upload:r.onUpload}}):r._e(),r._v(" "),r.imagesCount?r._e():l("div",{class:r.$style.info},[r.isMobile?r._e():l("div",{class:r.$style.text},[r._v("\n        Нажмите на кнопку или перетащите фото в эту область\n      ")]),r._v(" "),l("div",{class:r.$style.note},[r._v("\n        до "+r._s(r.limit)+" изображений в формате PNG, JPEG.\n      ")])])],2),r._v(" "),r.hasError?l("div",{class:r.$style.error},[l("Notification",{attrs:{notification:r.notificationError}})],1):r._e()])}),[],!1,(function(e){this.$style=F.default.locals||F.default}),null,null);t.a=z.exports},edf2b:function(e,t,n){"use strict";var r=n("d9ca7"),o=n.n(r);t.default=o.a},ef64b:function(e,t,n){"use strict";var r=n("0ba6f"),o=n("2f462"),l=n.n(o),c=n("cfa5c"),d=n.n(c),f={name:"Header",components:{OkIcon:l.a,AccordionDownIcon:d.a},props:{title:r.default.string.def(""),isValid:r.default.bool.def(!1),isCollapsed:r.default.bool.def(!0),isDisabled:r.default.oneOfType([r.default.bool.def(!1),{validator:function(e){return void 0===e}},{validator:function(e){return null===e}}]),required:r.default.oneOfType([r.default.bool.def(!1),{validator:function(e){return void 0===e}},{validator:function(e){return null===e}}]),isToggleLocked:r.default.bool.def(!1)},computed:{isClickable:function(){return!this.isDisabled&&!this.isToggleLocked}},methods:{onToggle:function(){this.isClickable&&this.$emit("toggle",!this.isCollapsed)}}},h=n("a0409"),v=n("b429c");var component=Object(v.a)(f,(function(){var e,t,n=this,r=n.$createElement,o=n._self._c||r;return o("div",{class:[n.$style.header,(e={},e[n.$style.pointer]=n.isClickable,e)],on:{click:n.onToggle}},[o("h4",{class:n.$style.title},[n._v("\n    "+n._s(n.title)+" "),n.required?o("span",{class:n.$style.required},[n._v("*")]):n._e(),n._v(" "),n.isValid?o("OkIcon",{class:n.$style.validIcon}):n._e()],1),n._v(" "),n.isClickable?o("AccordionDownIcon",{class:[n.$style.accordionIcon,(t={},t[n.$style.collapseIn]=!n.isCollapsed,t)]}):n._e()],1)}),[],!1,(function(e){this.$style=h.default.locals||h.default}),null,null);t.a=component.exports},f2e23:function(e,t,n){e.exports={button:"e2w5",input:"e2w6",icon:"e2w7",mobile:"e2w8"}},ffa91:function(e,t,n){"use strict";var r=n("f2e23"),o=n.n(r);t.default=o.a}}]);