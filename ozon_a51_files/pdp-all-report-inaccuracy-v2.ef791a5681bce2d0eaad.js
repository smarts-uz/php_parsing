/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[502],{"00896":function(e,t,r){"use strict";var n=r("a09a9"),o=r.n(n),c=r("4066f"),l=r.n(c),d=r("279f1"),f=r.n(d),m=r("d68e9"),O=r("f24c5"),y=r.n(O);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){f()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j={name:"LoadingWrapper",functional:!0,inheritAttrs:!1,props:{isLoading:r("0ba6f").default.bool.def(!1),delay:m.OzTransition.props.delay},render:function(e,t){var r=t.props,n=r.isLoading,c=r.delay,d=t.$style,f=t.listeners,O=t.scopedSlots,data=t.data,slot=(O.default||function(){return[]})(),v=(Array.isArray(data.class)?data.class:[data.class]).concat(d.root);return e("div",o()([{class:v},{on:f}]),[].concat(l()(slot),[e(m.OzTransition,{props:h({},{onlyFade:!0,delay:c})},l()(n?[e("div",o()([{class:d.loading},{directives:[{name:"qa",arg:"id",value:"loading"}]}]),[e(y.a,{class:d.preloader})])]:[]))]))}},E=r("f4cd4"),$=r("b429c");var component=Object($.a)(j,void 0,void 0,!1,(function(e){this.$style=E.default.locals||E.default}),null,null);t.a=component.exports},"0ba6f":function(e,t,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function n(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}function o(e){var t,r;return!1!==n(e)&&("function"==typeof(t=e.constructor)&&(!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}r.r(t);var dfn=Object.defineProperty,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function l(e,t,r){void 0===r&&(r=!1);var n={_vueTypes_name:{value:e},def:{value:function(e){return void 0!==e||this.default?(c(e)?this.default=function(){return[].concat(e)}:o(e)?this.default=function(){return Object.assign({},e)}:this.default=e,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return r&&(n.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},n),t)}var d,f,m=(d={utils:{toType:l,validate:function(){return!0}}},f={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(d,"sensibleDefaults",{enumerable:!1,set:function(e){f=!1===e?{}:!0===e?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:e},get:function(){return f}})),O={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function y(e,t,r,n,o){var c;void 0===n&&(n=!1),void 0===o&&(o=!1);var d=((c={})[n?"get":"value"]=function(){return l(t,r,o).def(n?m.sensibleDefaults[t]:void 0)},c);return dfn(e,t,d)}function v(e,t,r){return function(n){return y(e,n,{type:O[n]||null},t,r)}}["any","func","bool","string","number","array","object","symbol"].forEach(v(m,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(v(m,!1)),y(m,"integer",{type:Number},!0),dfn(m,"shape",{value:function(){return dfn(l("shape",{type:Object}),"loose",{get:function(){return this}})}}),m.extend=function(e){var t=e.name,r=e.validate,n=e.getter,c=void 0!==n&&n,l=e.type,d=void 0===l?null:l,f=o(d)&&d.type?null:d;return y(m,t,{type:f},c,!!r)};t.default=m},"3449e":function(e,t,r){e.exports={root:"e7d",loading:"e7d0",preloader:"e7d1"}},"3d1c7":function(e,t,r){"use strict";r.r(t);var n=r("1d967"),o=r.n(n),c=r("279f1"),l=r.n(c),d=r("0ba6f"),f=r("d3037"),m=r("d68e9"),O={DOUBLES:"doublesButton",INACCURACY:"inaccuracyButton"},y={NEW:"new",SUCCESS:"sendSuccess",ERROR:"sendError"},v=r("fca9b"),h=r.n(v),j=r("01ff4"),E=r.n(j),$=r("b0554"),S=r.n($),w=r("e0857"),D=r("6905f"),M=r("f755e"),P=/^(https?):\/\/[^\s]*ozon[^\s$.?#]?.[^\s]*$/m,R=function(e){return!!e&&P.test(e)},z=r("3883b"),A=r("00896");function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){l()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var T={},I={name:"Modal",components:{OzModal:m.OzModal,OzInput:m.OzInput,OzField:m.OzField,OzTextarea:m.OzTextarea,OzButton:m.OzButton,LoadingWrapper:A.a,IconSuccess:h.a,OzNotification:m.OzNotification},mixins:[w.validationMixin],validations:function(){var e={required:D.required,minLength:Object(D.minLength)(10)};return this.mode===O.DOUBLES&&(e=x(x({},e),{},{isUrlValid:R})),{formData:{message:e,userEmail:{required:D.required,isEmailValid:M.a}}}},props:{textHeader:d.default.string.def(""),widgetStatus:d.default.oneOf(Object.values(y)).def(y.NEW),userEmail:d.default.string.def(""),isLoading:d.default.bool.def(!1),description:d.default.string.def(""),mode:d.default.string.def(""),errorMessage:d.default.string.def(""),isMobile:d.default.bool.def(!1)},data:function(){return{formData:{message:"",userEmail:this.userEmail},ERROR_MESSAGE:"Произошла ошибка при отправке сообщения! Пожалуйста, попробуйте снова.",REPORT_MODE:O,WIDGET_STATUS:y,info24:E.a}},computed:{errorMessagesForEmail:function(){return this.$v.formData.userEmail.$dirty?this.$v.formData.userEmail.required?this.$v.formData.userEmail.isEmailValid?[]:["Введите корректный email"]:["Введите email"]:[]},errorMessagesForMessage:function(){if(!this.$v.formData.message.$dirty)return[];if(this.mode===O.DOUBLES){if(!this.$v.formData.message.required)return["Введите ссылку на похожий товар"];if(!this.$v.formData.message.isUrlValid)return["Введите корректную ссылку на товар"]}if(this.mode===O.INACCURACY){if(!this.$v.formData.message.required)return["Введите сообщение"];if(!this.$v.formData.message.minLength)return["Комментарий должен содержать не менее 10 символов"]}return[]}},beforeDestroy:function(){T={}},methods:{onSubmit:function(){var e=this;this.$v.$invalid?Object.keys(this.formData).forEach((function(t){e.$v.formData[t].$touch()})):this.$emit("submit",this.formData)},delayTouch:function(e){var t=this.$v.formData[e];t.$reset(),S()(T,e)&&clearTimeout(T[e]),T[e]=setTimeout(t.$touch,1e3)},getQaId:z.a}},C=r("b0dd9"),L=r("b429c");var N=Object(L.a)(I,(function(){var e,t,r=this,n=r.$createElement,o=r._self._c||n;return o("OzModal",{attrs:{"is-mobile-theme":r.isMobile},on:{close:function(e){return r.$emit("close")}}},[r.widgetStatus===r.WIDGET_STATUS.SUCCESS?o("div",{class:r.$style.stateMess},[o("IconSuccess",{class:r.$style.iconSuccess}),r._v("\n    Спасибо, Ваше сообщение отправлено.\n  ")],1):o("LoadingWrapper",{attrs:{"is-loading":r.isLoading}},[o("form",{class:[r.$style.form,(e={},e[r.$style.mobile]=r.isMobile,e)],on:{submit:function(e){return e.preventDefault(),r.onSubmit(e)}}},[o("h3",{class:r.$style.heading},[r._v(r._s(r.textHeader))]),r._v(" "),r.mode!==r.REPORT_MODE.INACCURACY&&r.description?o("p",{class:r.$style.description},[r._v("\n        "+r._s(r.description)+"\n      ")]):r._e(),r._v(" "),o("div",{class:r.$style.fieldsGroup},[o("OzField",{directives:[{name:"qa",rawName:"v-qa:id",value:"report-inaccuracy-field",expression:"'report-inaccuracy-field'",arg:"id"}],attrs:{"qa-id-errors":r.getQaId("report-inaccuracy-error-message"),label:r.mode===r.REPORT_MODE.INACCURACY?"Комментарий":"Ссылки на похожие товары",errors:r.errorMessagesForMessage}},[o("OzTextarea",{attrs:{"has-error":!!r.errorMessagesForMessage.length,placeholder:r.mode===r.REPORT_MODE.INACCURACY?"Опишите, какие неточности в описании вы нашли":"",rows:"5"},on:{input:function(e){return r.delayTouch("message")}},model:{value:r.$v.formData.message.$model,callback:function(e){r.$set(r.$v.formData.message,"$model",e)},expression:"$v.formData.message.$model"}})],1),r._v(" "),o("OzField",{directives:[{name:"qa",rawName:"v-qa:id",value:"report-inaccuracy-field",expression:"'report-inaccuracy-field'",arg:"id"}],class:r.$style.emailField,attrs:{"qa-id-errors":r.getQaId("report-inaccuracy-error-message"),errors:r.errorMessagesForEmail,label:"Email"}},[o("OzInput",{attrs:{"has-error":!!r.errorMessagesForEmail.length},on:{input:function(e){return r.delayTouch("userEmail")}},model:{value:r.$v.formData.userEmail.$model,callback:function(e){r.$set(r.$v.formData.userEmail,"$model",e)},expression:"$v.formData.userEmail.$model"}})],1)],1),r._v(" "),o("div",{class:[r.$style.serverError,(t={},t[r.$style.serverErrorFull]=r.widgetStatus===r.WIDGET_STATUS.ERROR,t)]},[o("OzNotification",{attrs:{icon:r.info24,"icon-color":"ozAccentAlert"}},[o("p",{class:r.$style.serverErrorMsg},[r._v("\n            "+r._s(r.errorMessage?r.errorMessage:r.ERROR_MESSAGE)+"\n          ")])])],1),r._v(" "),o("div",{class:r.$style.controls},[o("OzButton",{attrs:{"qa-id":r.getQaId("report-inaccuracy-submit"),size:"l",type:"submit",text:"Отправить",disabled:r.$v.$invalid}})],1)])])],1)}),[],!1,(function(e){this.$style=C.default.locals||C.default}),null,null).exports;function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){l()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var W={name:"ReportInaccuracy",components:{OzButton:m.OzButton,Modal:N},inheritAttrs:!1,props:F(F({textHeader:d.default.string.def(""),btnText:d.default.string.def(""),isEmployee:d.default.bool.def(!1)},N.props),{},{isMobile:d.default.bool.def(!1)}),data:function(){return{isOpenModal:!1}},methods:{onClose:function(e){this.isOpenModal=!1,this.$emit("close",e)},getQaIdByMode:function(){return Object(z.a)(this.mode===O.INACCURACY?"report-inaccuracy-button":"report-doubles-button")},getQaId:z.a}},B=Object(L.a)(W,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("OzButton",{attrs:{"qa-id":e.getQaIdByMode(),theme:e.isEmployee?"secondary":"inline",text:e.btnText},on:{click:function(t){e.isOpenModal=!e.isOpenModal}}}),e._v(" "),e.isOpenModal?r("Modal",e._b({attrs:{"qa-id":e.getQaId("report-inaccuracy-modal"),"is-mobile":e.isMobile},on:{close:e.onClose,submit:function(t){return e.$emit("submit",t)}}},"Modal",e.$props,!1)):e._e()],1)}),[],!1,null,null,null).exports,k=r("78763");function Q(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Q(Object(source),!0).forEach((function(t){l()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Q(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var Y=f.a.extend({name:"WidgetReportInaccuracy",components:{ReportInaccuracy:B},mixins:[k.a],props:{btnText:d.default.string.def(""),textHeader:d.default.string.def("Сообщить о неточности в описании"),description:d.default.string.def(""),employee:d.default.bool.def(!1),mode:d.default.oneOf(Object.values(O)).def(O.INACCURACY)},data:function(){return{isLoading:!1}},computed:{validWidgetState:function(){return G(G(G({},this.widgetState),this.$props),{},{isLoading:this.isLoading,isEmployee:this.employee})}},methods:{reset:function(){this.widgetState.widgetStatus=y.NEW},onSubmit:function(data){var e=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.fetchAsyncState({action:e.widgetState.action,data:{email:data.userEmail||e.widgetState.userEmail,message:data.message}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.widgetState.widgetStatus=y.ERROR;case 9:return t.prev=9,e.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})))()}}}),H=Object(L.a)(Y,(function(){var e=this.$createElement;return(this._self._c||e)("ReportInaccuracy",this._b({attrs:{"is-mobile":this.$isMobile},on:{submit:this.onSubmit,close:this.reset}},"ReportInaccuracy",this.validWidgetState,!1))}),[],!1,null,null,null);t.default=H.exports},78763:function(e,t,r){"use strict";var n=r("11078");t.a={inheritAttrs:!1,computed:{showWidget:function(){return!this.hasWidgetError&&(Object.keys(this.widgetState).length||this.asyncType===n.a)},hasWidgetError:function(){return this.widgetState.error}},inject:{$isMobile:{from:"isMobile",default:!1}}}},b0746:function(e,t,r){e.exports={mobile:"e8y6",form:"e8y7",heading:"e8y8",emailField:"e8y9",controls:"e8z",description:"e8z0",fieldsGroup:"e8z1",serverError:"e8z2",serverErrorFull:"e8z3",serverErrorMsg:"e8z4",stateMess:"e8z5",iconSuccess:"e8z6"}},b0dd9:function(e,t,r){"use strict";var n=r("b0746"),o=r.n(n);t.default=o.a},f4cd4:function(e,t,r){"use strict";var n=r("3449e"),o=r.n(n);t.default=o.a}}]);