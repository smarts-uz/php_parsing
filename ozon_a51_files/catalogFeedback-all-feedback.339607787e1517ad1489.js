(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"03246":function(e,t,r){"use strict";r.r(t);var o=r("d3037"),n=r("ff287"),c=r.n(n),l=r("1d967"),d=r.n(l),f=r("d68e9"),m=r("62f0b"),h=r.n(m),v=r("97ef1"),y=r.n(v),S=r("a63b0"),x=r("77d77"),w={item:1,brand:2},k={name:"CatalogFeedbackNotFoundForm",components:{IClose:h.a,OzButton:f.OzButton,OzField:f.OzField,OzInput:f.OzInput,IOk:y.a,OzRadio:f.OzRadio},mixins:[x.a],inject:{isMobile:{default:!1}},props:{title:{type:String,default:"Не нашли что искали?"},bgColor:{type:String,default:"#f2f2f2"},text:{type:String,default:"Оставьте ссылку на товар или бренд, который вы не нашли."},submitButtonText:{type:String,default:"Отправить"},radio:{type:Array,default:function(){return[]}},static:{type:Boolean,default:!1},successText:{type:String,default:"Ссылка получена!"}},data:function(){return{link:"",activeRadioKey:this.radio[0].key,loading:!1,hasSuccess:!1,hasError:!1,hasValidateError:!1,hasServerError:!1}},computed:{options:function(){return this.radio.map((function(e){return{label:e.name,value:e.key}}))},errors:function(){return[this.hasServerError?"Ошибка сервера. Попробуйте еще раз.":"",this.hasValidateError?"Введите ссылку":""].filter((function(e){return e}))},activeRadio:function(){var e=this;return this.radio.find((function(t){return t.key===e.activeRadioKey}))||{}}},methods:{submit:function(){var e=this;return d()(regeneratorRuntime.mark((function t(){var r,o,n,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=w[e.activeRadioKey]||0,o=Object(S.parse)(location.search.replace(/^\?/,"")).text,n={abGroup:e.siteAbGroup,currentUrl:location.href,feedbackType:r,query:o,userInput:e.link},e.hasValidateError=!1,e.hasServerError=!1,e.hasSuccess=!1,t.prev=6,e.loading=!0,t.next=10,e.$api.composer.action.post({name:"feedbackSaveFeedbackForm",data:n});case 10:l=t.sent,d=c()(l,"validationError",""),c()(l,"error","")?e.hasServerError=!0:d?e.hasValidateError=!0:(e.hasSuccess=!0,e.closeForm()),e.$emit("submit",e.hasSuccess),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(6),e.hasServerError=!0,e.$emit("submit",e.hasSuccess),e.$logger.error({exception:t.t0});case 22:return t.prev=22,e.loading=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[6,17,22,25]])})))()},closeForm:function(){this.$emit("close")}}},F=r("9c099"),$=r("b429c");var O=Object($.a)(k,(function(){var e,t=this,r=t.$createElement,o=t._self._c||r;return o("form",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback",expression:"'feedback'",arg:"id"}],class:[t.$style.form,(e={},e[t.$style["m-static"]]=t.static,e[t.$style.mobile]=t.isMobile,e)],on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[o("h3",{class:t.$style.title},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),o("p",{class:t.$style.text},[t._v("\n    "+t._s(t.text)+"\n  ")]),t._v(" "),t.hasSuccess&&t.static?o("div",{class:t.$style["has-success"]},[o("IOk",{class:t.$style["success-icon"]}),t._v("\n    "+t._s(t.successText)+"\n  ")],1):o("div",{class:t.$style["form-content"]},[t.radio.length>1?o("fieldset",{class:t.$style["radio-group"]},t._l(t.radio,(function(input){return o("OzRadio",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-radio-"+input.key,expression:"`feedback-radio-${input.key}`",arg:"id"}],key:input.key,class:t.$style.radio,attrs:{value:input.key,name:"feedback-radio"},model:{value:t.activeRadioKey,callback:function(e){t.activeRadioKey=e},expression:"activeRadioKey"}},[t._v("\n        "+t._s(input.name)+"\n      ")])})),1):t._e(),t._v(" "),o("OzField",{attrs:{errors:t.errors}},[o("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:t.$style["feedback-input"],expression:"$style['feedback-input']",arg:"id"}],class:t.$style.input,attrs:{"has-error":t.hasValidateError||t.hasServerError,placeholder:t.activeRadio.inputPlaceholder},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}})],1),t._v(" "),o("div",{class:t.$style["submit-button-container"]},[o("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-send",expression:"'feedback-send'",arg:"id"}],class:t.$style["submit-button"],attrs:{text:t.submitButtonText,size:t.isMobile?"l":"m",fill:t.isMobile,loading:t.loading,type:"submit"}}),t._v(" "),t.hasServerError&&!t.isMobile?o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-error",expression:"'feedback-error'",arg:"id"}],class:[t.$style["error-text"],t.$style["m-server"]]},[t._v("\n        Ошибка сервера.\n        "),o("br"),t._v("\n        Попробуйте еще раз.\n      ")]):t._e()],1)],1),t._v(" "),t.static?t._e():o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-close",expression:"'feedback-close'",arg:"id"}],class:t.$style.close,on:{click:t.closeForm}},[o("IClose")],1)])}),[],!1,(function(e){this.$style=F.default.locals||F.default}),null,null).exports,_=r("4047f"),N=r("cb4c2"),z=r.n(N),C=r("3034d"),E=o.a.extend({name:"CatalogFeedbackNotFound",mixins:[Object(C.a)()],components:{IOk:y.a,CatalogNotFoundFeedbackForm:O},inject:{isMobile:{default:!1}},data:function(){return{onScroll:z()(this.handleViewportChange,50),isFormOpened:!1,hasSuccess:!1,overrideShowAsStaticForm:!0}},created:function(){this.overrideShowAsStaticForm=this.showAsStaticForm},mounted:function(){var e=this,t=this.showAsStaticForm,r=this.timeout,o=this.show,n=!!Object(_.b)()&&{passive:!0};this.$when("search/DESTROY_NOT_FOUND",this.setNotFound),t||!r||o||setTimeout((function(){e.$store.commit("deepSet",{path:"shared.catalogFeedback.show",value:!0})}),1e3*r),window.addEventListener("load",this.handleViewportChange,n),window.addEventListener("scroll",this.onScroll,n)},beforeDestroy:function(){this.$when.unsubscribe("search/DESTROY_NOT_FOUND",this.setNotFound)},destroyed:function(){window.removeEventListener("load",this.handleViewportChange),window.removeEventListener("scroll",this.onScroll)},computed:{currentBrandName:function(){var e=c()(this.$store.state,"shared.catalog.brand",null)||[];return e.length?e[0].Name:""},title:function(){return this.widgetState.title},show:function(){if(!this.timeout)return!0;var e=c()(this.$store.state,"shared.catalogFeedback",{});return Boolean(e.show)},error:function(){return this.widgetState.error},bugTitle:function(){var e=this.widgetState.bugTitle;return this.hasSuccess?this.successText:e},formBgColor:function(){return"#fff"},timeout:function(){return this.widgetState.timeout},text:function(){return this.widgetState.text.replace("[brand_name]",this.currentBrandName)},showAsStaticForm:function(){return this.widgetState.showAsStaticForm},radio:function(){return this.widgetState.radio},submitButtonText:function(){return this.widgetState.submitButtonText},successText:function(){return"Ссылка получена!"}},methods:{handleViewportChange:function(){var e=this.$refs.formPlaceholder||{};if(e&&e.parentElement){var rect=e.getBoundingClientRect();this.overrideShowAsStaticForm=rect.top<=window.innerHeight}},setNotFound:function(){this.setWidgetState({error:"widget was skiped (from client)"})},toggleForm:function(e){this.isFormOpened=void 0!==e?e:!this.isFormOpened},onSubmit:function(e){this.hasSuccess=e}},watch:{timeout:function(e,t){!t&&e>0&&this.$store.commit("deepSet",{path:"shared.catalogFeedback.show",value:!0})}}}),I=r("1780a");var T=Object($.a)(E,(function(){var e,t,r,o=this,n=o.$createElement,c=o._self._c||n;return!o.error&&o.defer(3)?c("div",{class:(e={},e[o.$style.mobile]=o.isMobile,e)},[o.showAsStaticForm?o._e():c("div",{ref:"formPlaceholder"}),o._v(" "),o.overrideShowAsStaticForm?c("div",{class:o.$style["static-container"]},[c("CatalogNotFoundFeedbackForm",{attrs:{"bg-color":o.formBgColor,radio:o.radio,static:o.overrideShowAsStaticForm,"submit-button-text":o.submitButtonText,text:o.text,title:o.title},on:{submit:o.onSubmit}})],1):c("div",{class:[o.$style["absolute-container"],(t={},t[o.$style["m-opened-form"]]=o.isFormOpened,t)]},[!o.isFormOpened&&o.show?c("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-open",expression:"'feedback-open'",arg:"id"}],class:[o.$style["sticky-button"],(r={},r[o.$style["has-success"]]=o.hasSuccess,r)],on:{click:o.toggleForm}},[o.hasSuccess?c("IOk"):o._e(),o._v("\n      "+o._s(o.bugTitle)+"\n    ")],1):o._e(),o._v(" "),o.isFormOpened?c("CatalogNotFoundFeedbackForm",{attrs:{"bg-color":o.formBgColor,radio:o.radio,static:o.overrideShowAsStaticForm,"submit-button-text":o.submitButtonText,text:o.text,title:o.title},on:{close:function(e){return o.toggleForm(!1)},submit:o.onSubmit}}):o._e()],1)]):o._e()}),[],!1,(function(e){this.$style=I.default.locals||I.default}),null,null);t.default=T.exports},"1780a":function(e,t,r){"use strict";var o=r("556b1"),n=r.n(o);t.default=n.a},"28bb1":function(e,t,r){"use strict";r.r(t);var o=r("d3037"),n=r("1d967"),c=r.n(n),l=r("d68e9"),d=r("62f0b"),f=r.n(d),m=r("ff287"),h=r.n(m),v={name:"CatalogFeedbackNotFoundForm",inject:{isMobile:{default:!1}},components:{Close:f.a,OzInput:l.OzInput,OzButton:l.OzButton,OzField:l.OzField},props:{title:{type:String,default:"Не нашли что искали?"},bgColor:{type:String,default:"#f2f2f2"},text:{type:String,default:""},submitButtonText:{type:String,default:"Отправить"},successText:{type:String,default:"Отправлено!"},placeholder:{type:String,default:""}},data:function(){return{filterName:"",loading:!1,hasSuccess:!1,hasError:!1,hasServerError:!1}},computed:{errors:function(){return[this.hasServerError?"Ошибка сервера. Попробуйте еще раз.":""]},categoryId:function(){return h()(this.$store.state,"shared.catalog.category.id")}},methods:{submit:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={userInput:e.filterName,categoryId:e.categoryId},e.hasServerError=!1,e.hasSuccess=!1,t.prev=3,e.loading=!0,t.next=7,e.$api.composer.action.post({name:"favoriteSaveFiltersSuggest",data:r});case 7:t.sent.ok?(e.hasSuccess=!0,e.closeForm()):e.hasServerError=!0,e.$emit("submit",e.hasSuccess),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(3),e.hasServerError=!0,e.$emit("submit",e.hasSuccess),e.$logger.error({exception:t.t0});case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[3,12,17,20]])})))()},closeForm:function(){this.$emit("close")},onInput:function(e){this.$emit("onInput",e)}}},y=r("29732"),S=r("b429c");var x=Object(S.a)(v,(function(){var e,t=this,r=t.$createElement,o=t._self._c||r;return o("form",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-filter",expression:"'feedback-filter'",arg:"id"}],class:[t.$style.form,(e={},e[t.$style.mobile]=t.isMobile,e)],on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[o("h3",{class:t.$style.title},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),o("p",{class:t.$style.text},[t._v("\n    "+t._s(t.text)+"\n  ")]),t._v(" "),o("div",{class:t.$style["form-content"]},[o("OzField",{attrs:{errors:t.errors}},[o("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:t.$style["feedback-input"],expression:"$style['feedback-input']",arg:"id"}],class:t.$style.input,attrs:{"has-error":t.hasServerError,placeholder:t.placeholder},on:{input:t.onInput},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),t._v(" "),o("div",{class:t.$style["submit-button-container"]},[o("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-filter-send",expression:"'feedback-filter-send'",arg:"id"}],class:t.$style["submit-button"],attrs:{text:t.submitButtonText,size:"l",type:"submit"}})],1)],1),t._v(" "),o("Close",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-filter-close",expression:"'feedback-filter-close'",arg:"id"}],class:t.$style.close,on:{click:t.closeForm}})],1)}),[],!1,(function(e){this.$style=y.default.locals||y.default}),null,null).exports,w=r("97ef1"),k=r.n(w),F=r("a71f0"),$=o.a.extend({name:"CatalogFeedbackNotFound",components:{IOk:k.a,CatalogNotFoundFeedbackForm:x},inject:{isMobile:{default:!1}},data:function(){return{isFormOpened:!1,hasSuccess:!1,filterValue:""}},computed:{title:function(){return this.widgetState.title},error:function(){return this.widgetState.error},bugTitle:function(){var title=this.widgetState.title;return this.hasSuccess?this.successText:title},formBgColor:function(){return"#fff"},text:function(){return this.widgetState.text||""},submitButtonText:function(){return this.widgetState.submitButtonText},successText:function(){return"Отправлено!"},placeholder:function(){return this.widgetState.formPlaceholder||""}},methods:{toggleForm:function(e){this.isFormOpened||F.a.send(F.b.CLICK_ACTION,{widget:this.trackingInfo,cell:{type:"ui",elementType:"button",title:"Не нашли нужный фильтр"}}),this.isFormOpened=void 0!==e?e:!this.isFormOpened},onSubmit:function(e){F.a.send(F.b.CLICK_ACTION,{widget:this.trackingInfo,cell:{type:"popup",title:this.filterValue}}),this.hasSuccess=e},onInput:function(e){this.filterValue=e}}}),O=r("51aec");var _=Object(S.a)($,(function(){var e,t,r,o=this,n=o.$createElement,c=o._self._c||n;return o.error?o._e():c("div",{class:(e={},e[o.$style.mobile]=o.isMobile,e)},[c("div",{ref:"formPlaceholder"}),o._v(" "),c("div",{class:[o.$style["absolute-container"],(t={},t[o.$style["m-opened-form"]]=o.isFormOpened,t)]},[o.isFormOpened?o._e():c("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"feedback-open",expression:"'feedback-open'",arg:"id"}],class:[o.$style["sticky-button"],(r={},r[o.$style["has-success"]]=o.hasSuccess,r)],on:{click:o.toggleForm}},[o.hasSuccess?c("IOk",{class:o.$style.icon}):o._e(),o._v("\n      "+o._s(o.bugTitle)+"\n    ")],1),o._v(" "),o.isFormOpened?c("CatalogNotFoundFeedbackForm",{attrs:{"bg-color":o.formBgColor,"submit-button-text":o.submitButtonText,text:o.text,title:o.title,placeholder:o.placeholder},on:{close:function(e){return o.toggleForm(!1)},onInput:o.onInput,submit:o.onSubmit}}):o._e()],1)])}),[],!1,(function(e){this.$style=O.default.locals||O.default}),null,null);t.default=_.exports},29732:function(e,t,r){"use strict";var o=r("74c1e"),n=r.n(o);t.default=n.a},"30cf4":function(e,t,r){e.exports={"absolute-container":"b6e8","m-opened-form":"b6e9","success-icon":"b6f","sticky-button":"b6f0",":hover":"b6f1",mobile:"c0f9",icon:"b6f2"}},"51aec":function(e,t,r){"use strict";var o=r("30cf4"),n=r.n(o);t.default=n.a},"556b1":function(e,t,r){e.exports={"absolute-container":"f8r3","m-opened-form":"f8r4","success-icon":"f8r5","static-container":"f8r6","sticky-button":"f8r7",":hover":"f8r8",mobile:"f8r9"}},"74c1e":function(e,t,r){e.exports={form:"b9q9",input:"b9r","form-content":"b9r0",title:"b9r1",text:"b9r2","submit-button-container":"b9r3","submit-button":"b9r4",close:"b9r5",":hover":"b9r6","success-icon":"b9r7","has-success":"b9r8",mobile:"c0g0"}},"77d77":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o=r("ff287"),n=r.n(o),c={computed:{siteAbGroup:function(){return n()(this.$store.state,"experiments.abGroup")||-1},siteExperiments:function(){return n()(this.$store.state,"experiments.experiments")||{}},siteABConfig:function(){return n()(this.$store.state,"experiments.config",{})||{}}}}},"7fa8a":function(e,t,r){e.exports={form:"f8z1",input:"f8z2","form-content":"f8z3",title:"f8z4",text:"f8z5","radio-group":"f8z6",radio:"f8z7","m-error":"f8z8","submit-button-container":"f8z9","submit-button":"f9a",close:"f9a0",":hover":"f9a1","success-icon":"f9a2","has-success":"f9a3",mobile:"f9a4","m-static":"f9a5"}},"97ef1":function(e,t){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s};e.exports={functional:!0,render:function(e,t){var s=t._c,n=(t._v,t.data),a=t.children,c=void 0===a?[]:a,l=n.class,d=n.staticClass,i=n.style,f=n.staticStyle,p=n.attrs,m=void 0===p?{}:p,h=o(n,["class","staticClass","style","staticStyle","attrs"]);return s("svg",r({class:[l,d],style:[i,f],attrs:Object.assign({width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},m)},h),c.concat([s("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[s("path",{attrs:{d:"M0 0h16v16H0z"}}),s("path",{attrs:{d:"M13.293 3.293L6 10.586 2.707 7.293a1 1 0 10-1.414 1.414l4 4a.997.997 0 001.414 0l8-8a1 1 0 10-1.414-1.414z",fill:"currentColor","fill-rule":"nonzero"}})])]))}}},"9c099":function(e,t,r){"use strict";var o=r("7fa8a"),n=r.n(o);t.default=n.a}}]);