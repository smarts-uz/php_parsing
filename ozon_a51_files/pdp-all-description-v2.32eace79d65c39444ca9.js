(window.webpackJsonp=window.webpackJsonp||[]).push([[486],{"00263":function(t,e,n){"use strict";var r=n("2d153"),o=n.n(r);e.default=o.a},"1c179":function(t,e,n){"use strict";n.r(e);var r=n("d3037"),o=n("a71f0"),c=n("0ba6f"),l=n("78763"),d=n("d0cfe"),h=n("a9711"),f=n("d68e9"),m=n("f0c47"),v=n.n(m),y={name:"RichAnnotation",components:{OzButton:f.OzButton,Cont:v.a},inheritAttrs:!1,props:{type:c.default.string.def("HTML"),content:c.default.any,contentJson:c.default.any,maxHeight:c.default.number.def(512),isMobile:c.default.bool.def(!1)},data:function(){return{showFullText:!1}},computed:{overflowStyle:function(){return this.maxHeight?this.showFullText?{}:{maxHeight:"".concat(this.maxHeight,"px")}:{}}},mounted:function(){this.$nextTick((function(){this.$refs.container.clientHeight>=this.$refs.container.scrollHeight&&this.showDescription()}))},methods:{showDescription:function(){this.showFullText=!0}}},T=n("d2456"),w=(n("77458"),n("b429c"));var O=Object(w.a)(y,(function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:[e.$style.description,(t={},t[e.$style.hideDescription]=!e.showFullText,t[e.$style.mobile]=e.isMobile,t)]},[r("div",{ref:"container",class:e.$style.overflow,style:e.overflowStyle},[r("Cont",{ref:"text",attrs:{"is-mobile-theme":e.isMobile,type:e.type,"content-html":e.content,"content-json":e.contentJson}})],1),e._v(" "),e.showFullText?e._e():r("div",{class:e.$style.gradient}),e._v(" "),e.showFullText?e._e():r("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"detail-description-or-rich-expand-all-description",expression:"'detail-description-or-rich-expand-all-description'",arg:"id"}],attrs:{fill:"",text:"Показать полностью",theme:"inline"},on:{click:e.showDescription}})],1)}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null).exports,x=n("f24c5"),C=function(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},I={name:"RichContent",components:{Preloader:n.n(x).a},inheritAttrs:!1,props:{content:c.default.string.isRequired,isMobile:c.default.bool.def(!1)},data:function(){return{isLoading:!0,isErrorLoading:!1,iframeDocument:void 0,resizeObserverAssigment:void 0}},mounted:function(){var t=this;this.$nextTick((function(){t.content.length&&t.createIframe()}))},beforeDestroy:function(){this.resizeObserverAssigment&&this.resizeObserverAssigment.disconnect()},methods:{createIframe:function(){this.isLoading=!0,this.isErrorLoading=!1,this.$refs.iframe.onload=this.onIFrameLoaded,this.iframeDocument=this.$refs.iframe.contentDocument,this.iframeDocument.open(),this.iframeDocument.write(this.content),this.iframeDocument.close()},onIFrameLoaded:function(){var t=this;this.iframeDocument.body?(this.iframeDocument.body.style.display="inline-block",this.iframeDocument.body.style.width="100%",this.iframeDocument.body.style.margin="0",this.iframeDocument.body.style.overflow="hidden",this.iframeDocument.querySelector("html").style.overflow="hidden",this.resizeObserverAssigment=new ResizeObserver((function(e){var n,r;try{for(var o=C(e),c=o.next();!c.done;c=o.next()){var l=c.value.target.offsetHeight;t.$refs.iframe.style.height=l+"px",t.isLoading&&(t.$emit("load"),t.isLoading=!1)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}})),this.resizeObserverAssigment.observe(this.iframeDocument.body)):this.isErrorLoading=!0}}},A=n("eee9c");var S=Object(w.a)(I,(function(){var t,e,n=this,r=n.$createElement,o=n._self._c||r;return o("div",{class:[n.$style.richContainer,(t={},t[n.$style.mobile]=n.isMobile,t)]},[n.isLoading&&!n.isErrorLoading?o("Preloader",{class:n.$style.richPreloader}):n._e(),n._v(" "),n.isErrorLoading?o("div",{class:n.$style.richErrorLoading},[n._v("\n    Не удалось загрузить статью.\n  ")]):n._e(),n._v(" "),o("iframe",{ref:"iframe",class:[n.$style.richIframe,(e={},e[n.$style.hide]=n.isLoading||n.isErrorLoading,e)],attrs:{frameborder:"0"}})],1)}),[],!1,(function(t){this.$style=A.default.locals||A.default}),null,null).exports,R=n("279f1"),_=n.n(R);function N(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(e){_()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function $(t){var e=t.length,n="",i=0;for(i=0;i<e;i++)n+="<h3>".concat(t[i].title,"</h3><p>").concat(t[i].content,"</p>");return n}var H={functional:!0,inheritAttrs:!1,props:D(D({},O.props),{},{content:c.default.array.def([])}),render:function(t,e){var n=e.props,content=n.content,r=n.maxHeight,o=n.isMobile;return t(O,{attrs:{content:$(content),maxHeight:r,isMobile:o}})}},L=Object(w.a)(H,void 0,void 0,!1,null,null,null).exports,M=n("a09a9"),k=n.n(M),E=n("3ced6"),j=n("bcab8"),z={name:"ShortDescription",functional:!0,inheritAttrs:!1,props:{content:c.default.string.isRequired,externalDescriptionText:c.default.string.isRequired,externalDescriptionLink:c.default.string.isRequired,isMobile:c.default.bool.def(!1)},render:function(t,e){var n=e.props,r=n.externalDescriptionText,o=n.externalDescriptionLink,content=n.content,c=n.isMobile,l=e.$style,d=e._v;function h(t){return t?{directives:[{name:"qa",arg:"id",value:t}]}:{}}var f=o;return"#"!==f[0]||c||(f+="--offset-".concat(j.a)),t("div",{class:l.shortDescription},[t("div",k()([{},h("short-description-text"),{class:l.shortDescriptionText}]),[d(content)]),t("div",{class:l.moreLink},[t(E.a,k()([{},h("short-description-read-more"),{class:l.control,attrs:{href:f}}]),[d(r)])])])}},P=n("00263");var F,J,W=Object(w.a)(z,void 0,void 0,!1,(function(t){this.$style=P.default.locals||P.default}),null,null).exports;!function(t){t.RICH_CONTENT="rich-content",t.RICH_ANNOTATION="rich-annotation"}(F||(F={})),function(t){t.SHORT="short",t.FULL="full",t.CHARACTERISTICS="characteristics"}(J||(J={}));var V=n("d336c"),B=n.n(V),U=n("6876d"),K=function(){return(K=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},G=r.a.extend({name:"WidgetPdpWebDescription",computed:K({},Object(U.e)({isTest:function(t){return(t.o3Params||{})["x-o3-ui-tests"]}})),components:{RichAnnotation:O,RichContent:S,ShortDescription:W,OzButton:f.OzButton,OzTabs:f.OzTabs,Characteristics:L,RootLazyHydrate:h.a},props:{descriptionMode:c.default.string.def(J.FULL),title:c.default.string.def(""),anchor:c.default.string.def("section-description"),externalDescriptionLink:c.default.string.def("#section-description"),externalDescriptionText:c.default.string.def("Читать далее"),tabTitleRichAnnotation:c.default.string.def(""),tabTitleRichContent:c.default.string.def(""),maxHeight:c.default.number.def(0)},created:function(){this.sendAnalyticsTimeoutId=null},data:function(){return{active:F.RICH_ANNOTATION,descriptionIsInViewportSettings:{callback:this.sendAnalyticsInView},descriptionModes:J,tabTypes:F,tabs:[{value:F.RICH_ANNOTATION,title:this.tabTitleRichAnnotation,qaId:this.isTest?"detail-description-or-rich-switch-to-description":void 0},{value:F.RICH_CONTENT,title:this.tabTitleRichContent,qaId:this.isTest?"detail-description-or-rich-switch-to-review":void 0}],richContentOpened:!1}},methods:{onChangeTab:function(t){var e;this.richContentOpened||t!==F.RICH_CONTENT||(this.richContentOpened=!0),this.active=t;var n=new B.a(this.$composerRouter.current,!0);n.set("query",K(K({},n.query),((e={})["description-tab"]=t,e))),this.$composerRouter.replace(n.toString(),{silent:!0})},sendAnalyticsInView:function(t){var e=this;clearTimeout(this.sendAnalyticsTimeoutId),t&&(this.sendAnalyticsTimeoutId=setTimeout((function(){e.sendAnalytics(o.b.VIEW_ACTION,"uiMap."+e.active),e.active===F.RICH_ANNOTATION&&e.sendAnalytics(o.b.REPORT_ACTION,"uiMap."+F.RICH_CONTENT)}),5e3))}},mounted:function(){var t=this.$composerRouter.getParams().query,e=this.widgetState.richContent&&t["description-tab"]===F.RICH_CONTENT,n=this.widgetState.richContent&&!this.widgetState.richAnnotation;(e||n)&&(this.richContentOpened=!0,this.active=F.RICH_CONTENT)},mixins:[l.a,d.a]}),Q=n("d45b9");var X=Object(w.a)(G,(function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return e.showWidget?r("RootLazyHydrate",{attrs:{display:"block"}},[r("div",{attrs:{id:e.anchor||void 0}},[e.title?r("h2",{directives:[{name:"qa",rawName:"v-qa:id",value:e.descriptionMode===e.descriptionModes.SHORT?"short-description-header":"full-description-header",expression:"descriptionMode === descriptionModes.SHORT ? 'short-description-header' : 'full-description-header'",arg:"id"}],class:[e.$style.title,(t={},t[e.$style.shortTitle]=e.descriptionMode===e.descriptionModes.SHORT,t)]},[e._v(e._s(e.title))]):e._e(),e._v(" "),e.descriptionMode===e.descriptionModes.SHORT?r("ShortDescription",{attrs:{content:e.widgetState.shortDescription,"external-description-text":e.externalDescriptionText,"external-description-link":e.externalDescriptionLink,"is-mobile":e.$isMobile}}):e.descriptionMode===e.descriptionModes.FULL&&(e.widgetState.richAnnotation||e.widgetState.richContent||e.widgetState.richAnnotationJson)?r("div",{directives:[{name:"detect-viewport",rawName:"v-detect-viewport.once",value:e.descriptionIsInViewportSettings,expression:"descriptionIsInViewportSettings",modifiers:{once:!0}},{name:"qa",rawName:"v-qa:id",value:"detail-description-or-rich",expression:"'detail-description-or-rich'",arg:"id"}]},[(e.widgetState.richAnnotation||e.widgetState.richAnnotationJson)&&e.widgetState.richContent?r("OzTabs",{class:e.$style.tabs,attrs:{theme:"tab",tabs:e.tabs,value:e.active},on:{change:e.onChangeTab}}):e._e(),e._v(" "),e.widgetState.richAnnotation||e.widgetState.richAnnotationJson?r("RichAnnotation",{directives:[{name:"show",rawName:"v-show",value:e.active===e.tabTypes.RICH_ANNOTATION,expression:"active === tabTypes.RICH_ANNOTATION"}],attrs:{content:e.widgetState.richAnnotation,"content-json":e.widgetState.richAnnotationJson,type:e.widgetState.richAnnotationType,"max-height":e.maxHeight,"is-mobile":e.$isMobile}}):e._e(),e._v(" "),e.widgetState.richContent&&e.richContentOpened?r("RichContent",{directives:[{name:"show",rawName:"v-show",value:e.active===e.tabTypes.RICH_CONTENT,expression:"active === tabTypes.RICH_CONTENT"}],attrs:{content:e.widgetState.richContent,"is-mobile":e.$isMobile}}):e._e()],1):e.descriptionMode===e.descriptionModes.CHARACTERISTICS&&e.widgetState.characteristics?r("Characteristics",{attrs:{content:e.widgetState.characteristics,"max-height":e.maxHeight,"is-mobile":e.$isMobile}}):e._e()],1)]):e._e()}),[],!1,(function(t){this.$style=Q.default.locals||Q.default}),null,null);e.default=X.exports},"2d153":function(t,e,n){t.exports={shortDescription:"e8l7",shortDescriptionText:"e8l8",moreLink:"e8l9",control:"e8m"}},"3a929":function(t,e,n){t.exports={description:"e8l",overflow:"e8l0",gradient:"e8l1",hideDescription:"e8l2"}},"4024d":function(t,e,n){t.exports={richContainer:"e8k5",richPreloader:"e8k6",richErrorLoading:"e8k7",richIframe:"e8k8",hide:"e8k9"}},"6fe1b":function(t,e,n){"use strict";var r=n("8bd15"),o=n.n(r);e.default=o.a},78763:function(t,e,n){"use strict";var r=n("11078");e.a={inheritAttrs:!1,computed:{showWidget:function(){return!this.hasWidgetError&&(Object.keys(this.widgetState).length||this.asyncType===r.a)},hasWidgetError:function(){return this.widgetState.error}},inject:{$isMobile:{from:"isMobile",default:!1}}}},"8bd15":function(t,e,n){t.exports={flexInline:"e7r7",block:"e7r8"}},a9711:function(t,e,n){"use strict";var r=n("4066f"),o=n.n(r),c=n("2ee9e"),l={name:"RootLazyHydrate",functional:!0,inheritAttrs:!1,props:{display:n("0ba6f").default.oneOf(["flexInline","block"]).def("flexInline")},render:function(t,e){var n=e.$style,r=e.scopedSlots,l=e.props.display,slot=(r.default||function(){})(),d=n.flexInline;return"block"===l&&(d=n.block),t("div",{class:d},[t(c.a,{attrs:{"when-idle":!0}},o()(slot))])}},d=n("6fe1b"),h=n("b429c");var component=Object(h.a)(l,void 0,void 0,!1,(function(t){this.$style=d.default.locals||d.default}),null,null);e.a=component.exports},bcab8:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=80},d0cfe:function(t,e,n){"use strict";var r=n("ff287"),o=n.n(r),c=n("a71f0");e.a={methods:{sendAnalytics:function(t,e,n){void 0===n&&(n={});var r=this.getCell(e);"string"!=typeof r?c.a.send(t,{widget:this.trackingInfo,slice:this.sliceTrackingInfo||{},cell:r,custom:n}):this.sendAEvent({actionType:t,key:r,sliceKey:this.sliceTrackingInfo},n)},getCell:function(t){return o()(this,"widgetState.cellTrackingInfo."+t)}}}},d2456:function(t,e,n){"use strict";var r=n("3a929"),o=n.n(r);e.default=o.a},d45b9:function(t,e,n){"use strict";var r=n("ed5bb"),o=n.n(r);e.default=o.a},ed5bb:function(t,e,n){t.exports={title:"b0g9",shortTitle:"b0h",tabs:"b0h0",mobile:"b0h1"}},eee9c:function(t,e,n){"use strict";var r=n("4024d"),o=n.n(r);e.default=o.a}}]);