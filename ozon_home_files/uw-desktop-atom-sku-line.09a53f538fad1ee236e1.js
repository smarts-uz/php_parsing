/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[822],{"0ba6f":function(t,e,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function n(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var e}function o(t){var e,r;return!1!==n(t)&&("function"==typeof(e=t.constructor)&&(!1!==n(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}r.r(e);var dfn=Object.defineProperty,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function l(t,e,r){void 0===r&&(r=!1);var n={_vueTypes_name:{value:t},def:{value:function(t){return void 0!==t||this.default?(c(t)?this.default=function(){return[].concat(t)}:o(t)?this.default=function(){return Object.assign({},t)}:this.default=t,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return r&&(n.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},n),e)}var d,f,h=(d={utils:{toType:l,validate:function(){return!0}}},f={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(d,"sensibleDefaults",{enumerable:!1,set:function(t){f=!1===t?{}:!0===t?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:t},get:function(){return f}})),v={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function m(t,e,r,n,o){var c;void 0===n&&(n=!1),void 0===o&&(o=!1);var d=((c={})[n?"get":"value"]=function(){return l(e,r,o).def(n?h.sensibleDefaults[e]:void 0)},c);return dfn(t,e,d)}function y(t,e,r){return function(n){return m(t,n,{type:v[n]||null},e,r)}}["any","func","bool","string","number","array","object","symbol"].forEach(y(h,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(y(h,!1)),m(h,"integer",{type:Number},!0),dfn(h,"shape",{value:function(){return dfn(l("shape",{type:Object}),"loose",{get:function(){return this}})}}),h.extend=function(t){var e=t.name,r=t.validate,n=t.getter,c=void 0!==n&&n,l=t.type,d=void 0===l?null:l,f=o(d)&&d.type?null:d;return m(h,e,{type:f},c,!!r)};e.default=h},18578:function(t,e,r){"use strict";var n=r("71125"),o=r("e0072"),c=r("5cad3"),l=r("6b183"),d=r("986d7");e.a={components:{Footer:o.a,Header:c.a,Product:n.a},mixins:[l.a,d.a],computed:{header:function(){return this.widgetState.header||{}},footer:function(){return this.widgetState.footer||{}},productContainer:function(){return this.widgetState.productContainer||{}},products:function(){var t=this,e=this.productContainer.products||[];return e.map((function(e,r){return e.defer=t.deferIndex(r,t.deferGroupSize),e}))},productOptions:function(){return this.productContainer.options||{}},slidesPerGroup:function(){var t=this.productOptions.ItemsGroupSize||6;return t>6?6:t},widgetOptions:function(){return this.widgetState.widgetOptions||{}},openItemLinkInNewTab:function(){return this.productOptions.openItemLinkInNewTab||!1}},methods:{createDetectViewportSettings:function(t){return{once:!0,callback:this.sendCustomAnalyticsByKey.bind(this,t.trackingInfo,"view",{})}}}}},"1c5ab":function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"j",(function(){return l})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return f})),r.d(e,"i",(function(){return h})),r.d(e,"e",(function(){return v})),r.d(e,"h",(function(){return m})),r.d(e,"b",(function(){return y}));var n={TYPES:{BOOL:"RESPONSE_FILTER_TYPE_BOOL",MULTI:"RESPONSE_FILTER_TYPE_MULTI",RANGE:"RESPONSE_FILTER_TYPE_RANGE",COLOR:"RESPONSE_FILTER_TYPE_COLOR",RADIO:"RESPONSE_FILTER_TYPE_RADIO",RATING:"RESPONSE_FILTER_TYPE_RATING",INVALID:"RESPONSE_FILTER_TYPE_INVALID"},URL_PREFIX:"f_",SEPARATORS:{RANGE:";",MULTI:","}},o={LIST_ALREADY_EXISTS:"ListAlreadyExists",MAX_LISTS_QUANTITY:"ListsTooMuch",WRONG_LIST_TITLE:"WrongListTitle"},c=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},l={favoriteShareVK:{width:550,height:335,shareURL:function(t,title,e,image){return"https://vk.com/share.php?url="+t+"&title="+title+"&description="+e+"&image="+image}},favoriteShareFacebook:{width:600,height:500,shareURL:function(t,title,e){return"https://www.facebook.com/sharer/sharer.php?s=100&p[url]="+t+"&p[title]="+title+"&p[description]="+e}},favoriteShareTwitter:{width:600,height:450,shareURL:function(t){return"https://twitter.com/intent/tweet?url="+t}},favoriteShareOK:{width:640,height:400,shareURL:function(t,title,e,image){return"https://connect.ok.ru/offer?url="+t+"&title="+title+"&description="+e+"&imageUrl="+image}}},d=["favoriteListPin","favoriteListUnpin"],f=["favoriteSellerAdd","favoriteSellerRemove"],h=["favoriteShareVK","favoriteShareFacebook","favoriteShareTwitter","favoriteShareOK"],v=["favoriteCopyLink","favoriteCopySharingLink","favoriteShareList"],m=["favoriteCopySharingLink","favoriteShareList"],y=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(c(arguments[i]));return t}(["addToCart","favoriteEntityRemove","favoriteDeleteListAllLists"],d)},"4b082":function(t,e,r){"use strict";var n=r("a71f0"),o=r("d68e9"),c=r("d697b"),l=r("1c5ab"),d=function(){return(d=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},f=function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{f(n.next(t))}catch(t){c(t)}}function d(t){try{f(n.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(l,d)}f((n=n.apply(t,e||[])).next())}))},h=function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},v="Отмена",m="Сохранить",y={name:"NewListModal",components:{OzButton:o.OzButton,OzModal:o.OzModal,OzField:o.OzField,OzInput:o.OzInput},props:{value:{type:String,default:""},title:{type:String,default:"Создать новый список"},rejectButtonText:{type:String,default:v},resolveButtonText:{type:String,default:m},listId:{type:Number,default:0},listHash:{type:String,default:""},widgetInfo:{type:Object,default:function(){return{}}}},inject:{isMobile:{default:!1}},data:function(){return{lists:[],hasError:!1,errors:[],suggests:[],listName:this.value,MAX_LIST_NAME_LENGTH:35}},computed:{saveButtonDisabled:function(){return this.hasError||""===this.listName.trim()},size:function(){return this.isMobile?"xl":"l"}},mounted:function(){return f(this,void 0,void 0,(function(){var t,e,r;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,this.$api.favorites.getLists.get()];case 1:return t=n.sent().items,[4,this.$api.favorites.getListTitleSuggest.get()];case 2:return e=n.sent().suggests,this.lists=t||[],this.suggests=e||[],[3,5];case 3:return r=n.sent(),this.$logger.error({exception:r}),[3,5];case 4:return!this.listId&&this.showErrorText(),[7];case 5:return[2]}}))}))},methods:{close:function(){this.$emit("close")},onClick:function(){return f(this,void 0,void 0,(function(){var t,title,e,r,o,content;return h(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),t=this.listName.trim(),title=t.substr(0,1).toUpperCase()+t.substr(1),e=d(d({title:title},this.listId?{id:this.listId}:{}),this.listHash?{hash:this.listHash}:{}),[4,this.$api.favorites[this.listId?"renameList":"createList"].post(e)];case 1:return r=f.sent().id,!this.listId&&n.a.send(n.b.SAVE_ACTION,{widget:this.widgetInfo,slice:{},cell:{type:"ui",elementType:"button",id:"createNewList"}}),this.$emit("resolve",{id:r,title:title}),[3,3];case 2:return!(o=f.sent()).data||o.data.errorType!==l.d.LIST_ALREADY_EXISTS&&o.data.errorType!==l.d.WRONG_LIST_TITLE?(content=o.data&&o.data.errorType===l.d.MAX_LISTS_QUANTITY?o.data.errorForUser:"Извините, произошла ошибка. Попробуйте позже",this.$store.dispatch("notifications/CREATE_NEW_NOTIFICATION",{type:c.b.ERROR,content:content})):(this.hasError=!0,this.errors.push(o.data.errorForUser)),[3,3];case 3:return[2]}}))}))},showErrorText:function(){var t=this,e=this.lists.some((function(e){return e.id!==t.listId&&e.title.toLowerCase()===t.listName.toLowerCase()}));this.hasError=e||this.listName&&!this.listName.trim()||this.listName.length>35,this.errors=[],e&&this.errors.push("Список с таким названием уже есть"),this.listName&&!this.listName.trim()&&this.errors.push("Введите еще символ, кроме пробела"),this.listName.length>=35&&this.errors.push("Название не должно превышать 35 символов")},applySuggest:function(t){this.errors=[],this.hasError=!1,this.listName=t}}},O=r("d4b76"),w=r("b429c");var component=Object(w.a)(y,(function(){var t,e,r=this,n=r.$createElement,o=r._self._c||n;return o("OzModal",{directives:[{name:"qa",rawName:"v-qa:id",value:"edit-list-modal",expression:"'edit-list-modal'",arg:"id"}],class:[(t={},t[r.$style.mobile]=r.isMobile,t)],attrs:{"is-mobile-theme":r.isMobile},on:{close:r.close}},[o("form",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-form",expression:"'add-to-list-form'",arg:"id"}],class:r.$style.form,attrs:{novalidate:"true"},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),r.onClick(t)}}},[o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"new-list-modal",expression:"'new-list-modal'",arg:"id"}],class:r.$style.modal},[o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-title",expression:"'add-to-list-title'",arg:"id"}],class:r.$style.title},[r._v("\n        "+r._s(r.title)+"\n      ")]),r._v(" "),o("OzField",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-field",expression:"'add-to-list-field'",arg:"id"}],class:r.$style.errors,attrs:{errors:r.errors}},[o("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-input",expression:"'add-to-list-input'",arg:"id"}],class:r.$style.input,attrs:{"has-error":r.hasError,"max-length":String(r.MAX_LIST_NAME_LENGTH),placeholder:"Название списка",size:"xl"},on:{input:r.showErrorText},model:{value:r.listName,callback:function(t){r.listName=t},expression:"listName"}})],1)],1),r._v(" "),r.suggests.length?o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"new-list-suggests",expression:"'new-list-suggests'",arg:"id"}],class:r.$style.suggestsContainer},[o("p",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-suggest-title",expression:"'add-to-list-suggest-title'",arg:"id"}],class:r.$style.listsHeader},[r._v("Предлагаемые названия")]),r._v(" "),r._l(r.suggests,(function(t,e){return o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"new-list-suggest",expression:"'new-list-suggest'",arg:"id"}],key:e,class:r.$style.suggest,on:{click:function(e){return r.applySuggest(t)}}},[r._v("\n        "+r._s(t)+"\n      ")])}))],2):r._e(),r._v(" "),o("div",{class:[r.$style.actions,(e={},e[r.$style.mobButton]=r.isMobile,e)]},[o("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"new-list-modal-confirm",expression:"'new-list-modal-confirm'",arg:"id"}],class:r.$style.button,attrs:{theme:"primary",size:r.size,text:r.resolveButtonText,disabled:r.saveButtonDisabled,type:"submit"}}),r._v(" "),o("OzButton",{directives:[{name:"show",rawName:"v-show",value:!r.isMobile,expression:"!isMobile"},{name:"qa",rawName:"v-qa:id",value:"new-list-modal-cancel",expression:"'new-list-modal-cancel'",arg:"id"}],class:r.$style.button,attrs:{theme:"secondary",size:"l",text:r.rejectButtonText,type:"button"},on:{click:r.close}})],1)])])}),[],!1,(function(t){this.$style=O.default.locals||O.default}),null,null);e.a=component.exports},"570e5":function(t,e,r){"use strict";var n=r("c868e"),o=r.n(n);e.default=o.a},"571f9":function(t,e,r){"use strict";var n=r("1d967"),o=r.n(n),c=r("279f1"),l=r.n(c),d=r("6876d"),f=r("ff287"),h=r.n(f),v=r("d68e9"),m=r("82231"),y=r.n(m),O=r("621ce"),w=r.n(O),_={name:"TileFavButton",components:{OzButton:v.OzButton},props:{productId:{type:[String,Number],required:!0},isActive:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},theme:{type:String,default:"secondary"},hintMessage:{type:String,required:!0}},inject:{isMobile:{default:!1}},data:function(){return{showHint:!1}},computed:{favoriteIconColor:function(){return this.isActive||this.showHint?"ozAccentAlert":"ozTextPrimary"},buttonProps:function(){return{icon:this.isActive?y.a:w.a,iconColor:this.favoriteIconColor,theme:this.theme,loading:this.loading,class:this.$style.button}},popoverProps:function(){return{placement:"right",paddingSize:"m",minWidth:"0"}}}},S=r("83f65"),T=r("b429c");function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function E(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(e){l()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x={name:"FavoriteButton",components:{FavButton:Object(T.a)(_,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("OzButton",t._b({directives:[{name:"qa",rawName:"v-qa:id",value:"favorite-button",expression:"'favorite-button'",arg:"id"}],on:{mouseenter:function(e){t.showHint=!0},mouseleave:function(e){t.showHint=!1},click:function(e){return e.preventDefault(),t.$emit("click")}}},"OzButton",t.buttonProps,!1))}),[],!1,(function(t){this.$style=S.default.locals||S.default}),null,null).exports},props:{id:{type:[String,Number],required:!0},isActive:{type:Boolean,default:!1},theme:{type:String,default:"inline"}},computed:E(E({},Object(d.e)({favoritesHash:function(t){return h()(t,"favorites.itemsHash",{})}})),{},{isInFavorite:function(){return void 0!==this.favoritesHash[this.id]?this.favoritesHash[this.id]:this.isActive},hint:function(){return this.isInFavorite?"Удалить из избранного":"Добавить в избранное"}}),methods:{onClick:function(){var t=this;return o()(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isInFavorite?"REMOVE":"ADD",e.next=3,t.$store.dispatch("favorites/".concat(r),{itemId:t.id});case 3:t.$emit("ADD"===r?"favorite":"unfavorite");case 4:case"end":return e.stop()}}),e)})))()}}},k=Object(T.a)(x,(function(){var t=this.$createElement;return(this._self._c||t)("FavButton",{attrs:{"product-id":this.id,"is-active":this.isInFavorite,loading:!1,"hint-message":this.hint,theme:this.theme},on:{click:this.onClick}})}),[],!1,null,null,null);e.a=k.exports},75600:function(t,e,r){"use strict";r.r(e);var n=r("18578"),o=r("d3037").a.extend({name:"SkuLineShelf",mixins:[n.a],data:function(){return{deferGroupSize:2}}}),c=r("570e5"),l=r("b429c");var component=Object(l.a)(o,(function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return e.widgetState.productContainer?n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:e.groupStatePath,expression:"groupStatePath",arg:"id"}],class:[e.$style.shelf,(t={},t[e.$style.async]=e.isAsyncLoading,t)]},[Object.keys(e.header).length?n("div",{class:e.$style.rowContainer},[n("Header",e._b({attrs:{theme:"dark"},on:{click:e.onAtomAction}},"Header",e.header,!1),[Object.keys(e.footer).length&&e.footer.button?n("Footer",e._b({class:e.$style.footer,on:{click:e.onAtomAction}},"Footer",e.footer.button,!1)):e._e()],1)],1):e._e(),e._v(" "),e.products&&e.products.length?n("div",{class:e.$style.productsWrapper},[e._l(e.products,(function(t,r){return[e.defer(t.defer)||t.isBiggest?n("Product",e._b({directives:[{name:"qa",rawName:"v-qa:withBtn",value:void 0!==t.button,expression:"product.button !== undefined",arg:"withBtn"}],key:r,class:e.$style.productTile,attrs:{"open-item-link-in-new-tab":e.openItemLinkInNewTab,"show-favorites-heart":void 0!==t.isFavorite,options:e.productOptions,"widget-tracking-info":e.trackingInfo,"image-size":250}},"Product",t,!1)):n("OzSkeleton",{key:r,class:e.$style.productTile,attrs:{square:""}})]}))],2):e._e()]):e._e()}),[],!1,(function(t){this.$style=c.default.locals||c.default}),null,null);e.default=component.exports},"77d77":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("ff287"),o=r.n(n),c={computed:{siteAbGroup:function(){return o()(this.$store.state,"experiments.abGroup")||-1},siteExperiments:function(){return o()(this.$store.state,"experiments.experiments")||{}},siteABConfig:function(){return o()(this.$store.state,"experiments.config",{})||{}}}}},"83f65":function(t,e,r){"use strict";var n=r("bef1e"),o=r.n(n);e.default=o.a},"8ff66":function(t,e,r){"use strict";var n=r("cf922"),o=r.n(n);e.default=o.a},"986d7":function(t,e,r){"use strict";var n=r("3034d"),o=r("d68e9");e.a={components:{OzSkeleton:o.OzSkeleton},mixins:[Object(n.a)()],methods:{deferIndex:function(t,e){return void 0===e&&(e=3),Math.ceil(t/e)}}}},a1cf2:function(t,e){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var s,e=1,r=arguments.length;e<r;e++)for(var n in s=arguments[e])Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);return t}).apply(this,arguments)},n=this&&this.__rest||function(t,s){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(e[r[n]]=t[r[n]])}return e};t.exports={functional:!0,render:function(t,s){var e=s._c,o=(s._v,s.data),c=s.children,a=void 0===c?[]:c,i=o.class,l=o.staticClass,d=o.style,f=o.staticStyle,p=o.attrs,h=void 0===p?{}:p,v=n(o,["class","staticClass","style","staticStyle","attrs"]);return e("svg",r({class:[i,l],style:[d,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},v),a.concat([e("path",{attrs:{d:"M20 11a1 1 0 110 2H4a1 1 0 110-2h16z",fill:"currentColor"}})]))}}},ad9fc:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r("d697b"),o=r("6cf2a"),c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},l=function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{f(n.next(t))}catch(t){c(t)}}function d(t){try{f(n.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(l,d)}f((n=n.apply(t,e||[])).next())}))},d=function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},f=null,h={methods:{addWithModal:function(t){return l(this,void 0,void 0,(function(){var e,r,h,v,m,y,O=this;return d(this,(function(w){switch(w.label){case 0:return w.trys.push([0,2,,3]),[4,this.$api.action.addToCart.post(t)];case 1:return e=w.sent(),r=e.success,h=e.link,v=e.notification,m=e.cart,y=(m||{cartItems:[]}).cartItems.reduce((function(t,e){return t[e.id]=c(c({},e),{quantity:e.qty}),t}),{}),setTimeout((function(){return l(O,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return h&&"string"==typeof h?[4,this.$store.dispatch("modalSupermarket/SET_ADD_TO_CART_DATA",t)]:[3,2];case 1:return e.sent(),this.$store.dispatch("composer/GET_MODAL",{url:h}),this.$when("composer/CLOSE_MODAL",this.handleSupermarketModalClose),[2,new Promise((function(t){f=t}))];case 2:return r&&(this.$store.dispatch("cartGlobal/SET_CART_ITEMS_IDS",y),this.$store.dispatch("cartGlobal/ADD_TO_CART_NOOP"),this.$store.dispatch("modalSupermarket/SET_ADD_TO_CART_DATA",[]),f&&(f(r),f=null)),v?this.$store.dispatch("composer/GET_NOTIFY",{options:{atoms:v.elements}}):r&&t.length>1&&this.$store.dispatch("notifications/CREATE_NEW_NOTIFICATION",{type:n.b.SUCCESS,content:"Товары добавлены в корзину",button:{text:"Перейти",action:function(){return o.b.getInstance().push("/cart")}}}),[2]}}))}))}),20),[2,{success:r,cartItems:y}];case 2:return w.sent(),this.$store.dispatch("notifications/CREATE_NEW_NOTIFICATION",{type:n.b.ERROR,content:"Произошла ошибка"}),[2,!1];case 3:return[2]}}))}))},handleSupermarketModalClose:function(){f&&f(!1),this.$when.unsubscribe("composer/CLOSE_MODAL",this.handleSupermarketModalClose)},addToCartWithAction:function(t,e,r){return void 0===e&&(e=1),l(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.addWithModal([{id:parseInt(t),quantity:e,selectedDeliverySchema:r}])]}))}))},multipleAddToCartWithAction:function(t){return l(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.addWithModal(t)]}))}))}},beforeDestroy:function(){this.$when.unsubscribe("composer/CLOSE_MODAL",this.handleSupermarketModalClose)}}},b0f4b:function(t,e,r){t.exports={form:"a2x2",title:"a2x3",content:"a2x4",errors:"a2x5",nameError:"a2x6",suggestsContainer:"a2x7",listsHeader:"a2x8",suggest:"a2x9",":hover":"a2y",actions:"a2y0",button:"a2y1",modal:"a2y2",mobile:"a2y3",input:"a2y4",mobButton:"a2y5"}},bde21:function(t,e,r){"use strict";var n=r("cbc35"),o=r.n(n);e.default=o.a},bef1e:function(t,e,r){t.exports={button:"e3j6"}},c868e:function(t,e,r){t.exports={shelf:"e5b0",async:"e5b1",rowContainer:"e5b2",productsWrapper:"e5b3",productTile:"e5b4",footer:"e5b5"}},cbc35:function(t,e,r){t.exports={link:"e2j9",dark:"e2k",":hover":"e2k0",light:"e2k1"}},cf922:function(t,e,r){t.exports={headerTitle:"a2z4",product:"a2z5",productImage:"a2z6",productTitle:"a2z7",noImageTitle:"a2z8",listItem:"a2z9",create:"a3a",disabled:"a3a0",listWarning:"a3a1",icon:"a3a2",inactive:"a3a3",listModal:"a3a4",listModalMob:"a3a5",headerTitleMob:"a3a6",mobile:"a3a7",overlay:"a3a8"}},d4b76:function(t,e,r){"use strict";var n=r("b0f4b"),o=r.n(n);e.default=o.a},d959b:function(t,e,r){"use strict";var n=r("279f1"),o=r.n(n),c=r("1d967"),l=r.n(c),d=r("3ced6"),f=r("6cf2a");function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){o()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function m(t,e,r){return y.apply(this,arguments)}function y(){return(y=l()(regeneratorRuntime.mark((function t(e,r,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.href||!r.click||e.target||e.withAtomAction){t.next=3;break}return r.click(n),t.abrupt("return");case 3:if(o=f.b.getInstance(),r.click&&r.click(n),!e.withAtomAction){t.next=9;break}return n.preventDefault(),n.stopPropagation(),t.abrupt("return");case 9:if(!e.target){t.next=13;break}return o.redirect(e.href,"_blank"),n.preventDefault(),t.abrupt("return");case 13:if(!e.fakeLink){t.next=19;break}if(!e.target){t.next=17;break}return o.redirect(e.href,"_blank"),t.abrupt("return");case 17:!!n&&(n.ctrlKey||n.metaKey||2===n.which)?o.redirect(e.href,"_blank"):o.push(e.href);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O={name:"LinksStub",functional:!0,props:{type:{type:String,default:"div"},href:{type:[String,Boolean],default:""},target:{type:Boolean,default:!1},fakeLink:{type:Boolean,default:!1},theme:{type:String,default:""},withAtomAction:{type:Boolean,default:!1}},render:function(t,e){var data=e.data,r=e.$style,n=e.props,c=e.listeners,l=e.children;data.attrs=data.attrs||{};var f=n.type,h=n.href,y=n.theme,O=n.target;return O=O?"_blank":"_self",t(h?d.a:f,v(v({},data),{},{class:[r.link,o()({},r[y],y),data.class],attrs:v({},data.attrs),props:{href:h,target:O},on:v(v({},c),{},{click:m.bind(this,n,c)})}),l)}},w=r("bde21"),_=r("b429c");var S=Object(_.a)(O,void 0,void 0,!1,(function(t){this.$style=w.default.locals||w.default}),null,null);e.a=S.exports},dc478:function(t,e,r){"use strict";var n=r("a71f0"),o=r("d68e9"),c=r("febf2"),l=r.n(c),d=r("d697b"),f=function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{f(n.next(t))}catch(t){c(t)}}function d(t){try{f(n.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(l,d)}f((n=n.apply(t,e||[])).next())}))},h=function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},v=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},m=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(v(arguments[i]));return t},y={name:"AddToListModal",components:{OzModal:o.OzModal,OzImage:o.OzImage,IconPlus:l.a},props:{modalData:{type:Object,default:function(){return{}}},lists:{type:Array,default:function(){return[]}},widgetInfo:{type:Object,default:function(){return{}}}},inject:{isMobile:{default:!1}},data:function(){return{localLists:[]}},computed:{listsLengthExceed:function(){return this.lists.length>=20}},mounted:function(){return f(this,void 0,void 0,(function(){var t,e,r;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),t=this,this.lists.length?(e=this.lists,[3,3]):[3,1];case 1:return[4,this.$api.composer.action.get({name:"favoriteLists?onlyEdit=t"})];case 2:e=(n.sent()||{}).items||[],n.label=3;case 3:return t.localLists=e,[3,5];case 4:return r=n.sent(),this.$logger.error({exception:r}),[3,5];case 5:return[2]}}))}))},methods:{createNewList:function(){this.listsLengthExceed||this.$emit("createNewList")},addItemToList:function(t){return f(this,void 0,void 0,(function(){var e,r=this;return h(this,(function(o){switch(o.label){case 0:if(t.inactive)return[3,5];e={},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.$api.favorites.addItemsToList.post({skus:m(this.modalData.skus.map(parseInt)),id:t.id})];case 2:return o.sent(),n.a.send(n.b.ADD_ACTION,{widget:this.widgetInfo,slice:{},cell:{type:"ui",elementType:"button",id:"addToList",countItems:this.modalData.skus.length}}),e={type:d.b.SUCCESS,content:(this.modalData.skus.length>1?"Товары добавлены":"Товар добавлен")+" в список "+t.title,button:{text:"Перейти",action:function(){return r.$composerRouter.redirect("/my/favorites/list?list="+t.id)}}},[3,4];case 3:return o.sent(),e={type:d.b.ERROR,content:"Ошибка сервера"},[3,4];case 4:this.$store.dispatch("favorites/REFRESH_FAVORITES_LISTS"),this.$store.dispatch("notifications/CREATE_NEW_NOTIFICATION",e),this.$emit("resolve"),o.label=5;case 5:return[2]}}))}))}}},O=r("8ff66"),w=r("b429c");var component=Object(w.a)(y,(function(){var t,e,r,n,o=this,c=o.$createElement,l=o._self._c||c;return l("OzModal",{directives:[{name:"qa",rawName:"v-qa:id",value:"add-to-list-modal",expression:"'add-to-list-modal'",arg:"id"}],attrs:{"with-portal":"","is-mobile-theme":o.isMobile},on:{close:function(t){return o.$emit("close")}}},[l("div",{class:[o.$style.listModal,(t={},t[o.$style.listModalMob]=o.isMobile,t)]},[l("div",{class:o.$style.header},[l("h2",{class:[o.$style.headerTitle,(e={},e[o.$style.headerTitleMob]=o.isMobile,e)]},[o._v("\n        Добавить в список товаров\n      ")]),o._v(" "),l("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"list-product-info",expression:"'list-product-info'",arg:"id"}],class:o.$style.product},[o.modalData.image?l("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"list-product-image",expression:"'list-product-image'",arg:"id"}],class:o.$style.productImage},[l("OzImage",{attrs:{src:o.modalData.image,"use-cdn":""}})],1):o._e(),o._v(" "),l("div",{class:[o.$style.productTitle,(r={},r[o.$style.noImageTitle]=!o.modalData.image,r)]},[o._v("\n          "+o._s(o.modalData.title)+"\n        ")])])]),o._v(" "),l("ul",{class:o.$style.list},[l("li",{directives:[{name:"qa",rawName:"v-qa:id",value:"create-new-list",expression:"'create-new-list'",arg:"id"}],key:"a",class:[o.$style.listItem,o.$style.create,(n={},n[o.$style.disabled]=o.listsLengthExceed,n)],on:{click:o.createNewList}},[l("IconPlus",{class:o.$style.icon}),o._v("\n        Создать новый список\n      ")],1),o._v(" "),o.listsLengthExceed?l("li",{directives:[{name:"qa",rawName:"v-qa:id",value:"create-new-list-error",expression:"'create-new-list-error'",arg:"id"}],class:o.$style.listWarning},[o._v("\n        Превышено количество списков. Чтобы создать новый, удалите существующий список\n      ")]):o._e(),o._v(" "),o._l(o.localLists,(function(t){var e;return l("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"created-lists",expression:"'created-lists'",arg:"id"}],key:t.id,class:o.$style.listItem,on:{click:function(e){return o.addItemToList(t)}}},[l("span",{class:[(e={},e[o.$style.inactive]=t.isSkuInList,e)]},[o._v("\n          "+o._s(t.title)+"\n        ")])])}))],2)])])}),[],!1,(function(t){this.$style=O.default.locals||O.default}),null,null);e.a=component.exports}}]);