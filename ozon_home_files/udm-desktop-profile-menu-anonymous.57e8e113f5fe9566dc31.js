/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[814],{"02443":function(e,t,n){e.exports={checkbox:"a4h",subscriptionCheckbox:"a4h2"}},"060c2":function(e,t,n){e.exports={submitButton:"c5a4",mobile:"c5a5"}},"060eb":function(e,t,n){"use strict";var r={name:"ErrorMessage",props:{error:{type:String,required:!0}}},o=n("27231"),c=n("b429c");var component=Object(c.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return this.error?t("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"errorMessage",expression:"'errorMessage'",arg:"id"}],class:this.$style.errorMessage},[t("span",{domProps:{innerHTML:this._s(this.error)}})]):this._e()}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.a=component.exports},"07653":function(e,t,n){"use strict";var r={name:"SubmitButton",components:{OzButton:n("d68e9").OzButton},inject:{isMobile:{default:!1}},props:{text:{type:String,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},testId:{type:String,default:""},size:{type:String,default:"xl"},theme:{type:String,default:"primary"}}},o=n("2e6bf"),c=n("b429c");var component=Object(c.a)(r,(function(){var e,t=this,n=t.$createElement;return(t._self._c||n)("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:t.testId,expression:"testId",arg:"id"}],class:[t.$style.submitButton,(e={},e[t.$style.mobile]=t.isMobile,e)],attrs:{type:"submit",size:t.size,theme:t.theme,fill:!0,text:t.text,loading:t.loading,disabled:t.disabled},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$emit("submit")}}})}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.a=component.exports},"0a023":function(e,t,n){e.exports={checkbox:"a4n6",agreementCheckbox:"a4n9"}},"0ba6f":function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function r(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}function o(e){var t,n;return!1!==r(e)&&("function"==typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}n.r(t);var dfn=Object.defineProperty,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function l(e,t,n){void 0===n&&(n=!1);var r={_vueTypes_name:{value:e},def:{value:function(e){return void 0!==e||this.default?(c(e)?this.default=function(){return[].concat(e)}:o(e)?this.default=function(){return Object.assign({},e)}:this.default=e,this):this}},isRequired:{get:function(){return this.required=!0,this}}};return n&&(r.validate={value:function(){}}),Object.assign(Object.defineProperties({validator:function(){return!0}},r),t)}var d,f,h=(d={utils:{toType:l,validate:function(){return!0}}},f={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0},Object.defineProperty(d,"sensibleDefaults",{enumerable:!1,set:function(e){f=!1===e?{}:!0===e?{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}:e},get:function(){return f}})),m={func:Function,bool:Boolean,string:String,number:Number,array:Array,object:Object,arrayOf:Array,objectOf:Object,shape:Object};function v(e,t,n,r,o){var c;void 0===r&&(r=!1),void 0===o&&(o=!1);var d=((c={})[r?"get":"value"]=function(){return l(t,n,o).def(r?h.sensibleDefaults[t]:void 0)},c);return dfn(e,t,d)}function y(e,t,n){return function(r){return v(e,r,{type:m[r]||null},t,n)}}["any","func","bool","string","number","array","object","symbol"].forEach(y(h,!0,!0)),["oneOf","custom","instanceOf","oneOfType","arrayOf","objectOf"].forEach(y(h,!1)),v(h,"integer",{type:Number},!0),dfn(h,"shape",{value:function(){return dfn(l("shape",{type:Object}),"loose",{get:function(){return this}})}}),h.extend=function(e){var t=e.name,n=e.validate,r=e.getter,c=void 0!==r&&r,l=e.type,d=void 0===l?null:l,f=o(d)&&d.type?null:d;return v(h,t,{type:f},c,!!n)};t.default=h},"0bdda":function(e,t,n){e.exports={icon:"e2i7",":hover":"e2i8",counter:"e2i9",pic:"e2j",title:"e2j0",hidden:"e2j1"}},"0e855":function(e,t,n){e.exports={loading:"e3e3",modInvisible:"e3e4",preloader:"e3e5"}},12639:function(e,t,n){"use strict";var r=n("c48c6"),o=n.n(r);t.default=o.a},"17a67":function(e,t,n){e.exports={"user-profile":"b2x4",":focus":"b2x5","focus-none":"b2x6",icon:"b2x7",pic:"b2x8"}},"194f7":function(e,t,n){"use strict";var r=n("d3378"),o=n.n(r);t.default=o.a},21736:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var r,o=n("ba78a"),c={NOT_VALID:o.a.OTP_INCORRECT,EXPIRED:o.a.OTP_IS_EXPIRED,TOO_MANY_CHECK_REQUESTS:o.a.OTP_IS_EXPIRED};!function(e){e.NUMERIC_KEYBOARD="numeric",e.ALFANUMERIC_KEYBOARD="text",e[e.DEFAULT_OTP_LENGTH=6]="DEFAULT_OTP_LENGTH"}(r||(r={}))},"2332b":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.PHONE="phone",e.CONTACT_PHONE="contactPhone",e.EMAIL="email",e.CONTACT_EMAIL="contactEmail",e.FULL_NAME="fullName",e.USER_NAME="userName",e.BIRTHDAY="birthday",e.BIRTHDATE="birthDate",e.PASSWORD="password",e.NEW_PASSWORD="newPassword",e.OLD_PASSWORD="oldPassword",e.DISCOUNT_CODE="discountCode",e.PATRONYMIC="patronymic",e.PASSPORT="passport",e.RELEASE_DATE="releaseDate",e.DEPARTMENT_CODE="departmentCode",e.RECEIVING_ADDRESS="receivingAddress",e.BIRTHPLACE="birthplace",e.REGISTRAQTION_ADDRESS="registrationAddress",e.FIRST_NAME="firstName",e.LAST_NAME="lastName",e.MIDDLE_NAME="middleName",e.OTP="otp",e.TEXT="text",e.SEX="sex",e.CHECKBOX="checkbox",e.INFO="info",e.NAME="name",e.INN="inn",e.KPP="kpp",e.ADDRESS="address",e.FACT_ADDRESS="factAddress",e.ACCOUNT_NUMBER="accountNumber",e.BANK_NAME="bankName",e.CORRESP_NUMBER="correspNumber",e.BIC="bic",e.CITY="city",e.OKPO="okpo",e.OKVED="okved",e.FAX="fax"}(r||(r={}))},"270ea":function(e,t,n){e.exports={authorizationService:"b9c",verificationService:"b9c0",loginOrRegistration:"b9c1",mobile:"b9v3",loginOrRegistrationWrapper:"c3f6",crossVerificationService:"b9c3",title:"b9c6",titleH2:"b9c7",titleSetPassword:"b9c8",note:"b9h4",enterOtp:"b9h5",blockWithLinks:"b9h6",linkBase:"b9h7",linkGray:"b9h8",forgotEmailLink:"b9u9",message:"b9v",resendAfter:"b9v0",phoneSpan:"b9v1",setPassword:"b9v2",setPasswordWrapper:"b9v4",additionalInfo:"b9v5",buttonOk:"cp6",errorBlock:"cp7",successIcon:"cp8",errorMessage:"c0a7",preRegistration:"c0a8",preloader:"c0a9",checkbox:"c0b0",error:"c0b1",subfieldText:"a3j6"}},27231:function(e,t,n){"use strict";var r=n("f46b3"),o=n.n(r);t.default=o.a},"2e6bf":function(e,t,n){"use strict";var r=n("060c2"),o=n.n(r);t.default=o.a},"33a7f":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("67d4b"),o="Некорректный формат",c={isEmpty:{phone:"Заполните телефон",contactPhone:"Заполните телефон",email:"Заполните почту",contactEmail:"Заполните почту",fullName:"Заполните имя и фамилию",password:"Заполните пароль",newPassword:"Заполните новый пароль",oldPassword:"Заполните старый пароль",birthday:"Заполните день рождения",birthDate:"Заполните дату рождения",releaseDate:"Заполните дату выдачи",discountCode:"Укажите кодовое слово или сертификат",name:"Заполните наименование организации",inn:"Заполните ИНН",address:"Заполните юридический адрес",factAddress:"Заполните фактический адрес",accountNumber:"Заполните расчетный счет",correspNumber:"Заполните расчетный счет",bankName:"Заполните наименование банка",bic:"Заполните БИК",city:"Заполните город",okpo:"Заполните ОКПО",kpp:"Заполните КПП",passport:"Заполните паспорт",userName:"Заполните имя",lastName:"Заполните фамилию",firstName:"Заполните имя",middleName:"Заполните отчество",patronymic:"Заполните отчество",departmentCode:"Заполните код подразделения",receivingAddress:"Заполните адрес получения",birthplace:"Заполните место рождения",registrationAddress:"Заполните адрес регистрации"},isInvalid:{phone:o+" телефона",contactPhone:o+" телефона",email:o+" почты",contactEmail:o+" почты",code:"Неверный код. Попробуйте еще раз",birthday:o+" даты",birthDate:o+" даты",releaseDate:o+" даты",okpo:o+" код ОКПО"},hasSpaces:{newPassword:"Пароль не должен сожержать пробелы"},tooLong:{newPassword:"Максимальная длина пароля "+r.a.password.maxLength+" символов",address:"Максимальная длина поля адрес "+r.a.string.maxLength+" символов",factAddress:"Максимальная длина поля адрес "+r.a.string.maxLength+" символов",bankName:"Максимальная длина "+r.a.string.maxLength+" символов",city:"Максимальная длина "+r.a.string.maxLength+" символов",okved:"Максимальная длина "+r.a.string.maxLength+" символов",fax:"Максимальная длина факса "+r.a.string.maxLength+" символов",kpp:"Максимальная длина "+r.a.string.maxLength+" символов",fullName:"Максимальная длина "+r.a.string.maxLength+" символов",userName:"Максимальная длина "+r.a.string.maxLength+" символов",lastName:"Максимальная длина "+r.a.string.maxLength+" символов",firstName:"Максимальная длина "+r.a.string.maxLength+" символов",patronymic:"Максимальная длина "+r.a.string.maxLength+" символов",receivingAddress:"Максимальная длина "+r.a.string.maxLength+" символов",birthplace:"Максимальная длина "+r.a.string.maxLength+" символов",registrationAddress:"Максимальная длина "+r.a.string.maxLength+" символов"},tooShort:{newPassword:"Минимальная длина пароля "+r.a.password.minLength+" символов"},isIncorrectLength:{inn:"Некорректная длина ИНН",accountNumber:"Некорректная длина расчетного счета",correspNumber:"Некорректная длина корреспондентского счета",bic:"Некорректная длина БИК",code:"Введите 4 цифры",codeOtp:"Введите код из сообщения",passport:"Введите 10 цифр",departmentCode:"Введите 6 цифр",okpo:"Введите от 8 до 10 цифр"},hasSpecialCharacters:{fullName:"Поле ФИО содержит специсимволы",password:"Поле пароль содержит специсимволы",oldPassword:"Поле пароль содержит специсимволы",newPassword:"Поле новый пароль содержит специсимволы"}},l=Object.freeze(c)},"3b33f":function(e,t,n){"use strict";var r=n("0e855"),o=n.n(r);t.default=o.a},"40e9f":function(e,t,n){"use strict";var r=n("5d2c3"),o=n.n(r);t.default=o.a},"418a1":function(e,t,n){"use strict";var r=n("02443"),o=n.n(r);t.default=o.a},44508:function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),c=t.children,l=void 0===c?[]:c,a=s.class,d=s.staticClass,i=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,m=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[a,d],style:[i,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},m),l.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 17a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 100-4 2 2 0 000 4z",fill:"currentColor"}}),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 8a9.99 9.99 0 00-8.383 4.546 1 1 0 01-1.676-1.092A11.99 11.99 0 0112 6a11.99 11.99 0 0110.059 5.454 1 1 0 11-1.676 1.092A9.99 9.99 0 0012 8z",fill:"currentColor"}})]))}}},52919:function(e,t,n){"use strict";var r=n("0a023"),o=n.n(r);t.default=o.a},"57a23":function(e,t,n){"use strict";n.r(t);var r=n("6876d"),o=n("dbe19"),c=n("d3037"),l=n("d68e9"),d=n("8c2d3"),f=n.n(d),h=n("a43bd"),m=n("b6f5a"),v=n("e90f8"),y=n("667e8"),E=n("6cf2a"),O=n("fbf89"),_=n("c514b"),C=n("ff287"),w=n.n(C),I=n("060eb"),P=function(){return(P=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},T=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},x=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},k=E.b.getInstance(),R={name:"OfferLoginTooltip",components:{OzButton:l.OzButton,ErrorMessage:I.a},props:{data:{type:Object,required:!0}},data:function(){return{COOKIE_NAME:"guest",errorMessage:"",urlRequestInProgress:!1,legalWidgetRequestInProgress:!1,authorizationTypes:O.a}},computed:P(P({},Object(r.e)({o3params:function(e){return e.o3Params||{}}})),Object(r.e)("userInfo",{isLoggedIn:function(e){return w()(e,"user.isLoggedIn")||!1}})),mounted:function(){var e=Object(y.a)(this.COOKIE_NAME);this.isLoggedIn||e||this.o3params[v.a]||this.showTooltip()},methods:{isLoading:function(e){return e===O.a.LOGIN&&this.urlRequestInProgress||e===O.a.LEGAL&&this.legalWidgetRequestInProgress},showTooltip:function(){var e=this;Object(y.c)(this.COOKIE_NAME,"true",{expires:0}),this.$emit("toggleOfferLoginTooltip",!0),setTimeout((function(){e.hide()}),1e4)},hide:function(){this.$emit("toggleOfferLoginTooltip",!1)},onClick:function(button){return T(this,void 0,Promise,(function(){var e,t;return x(this,(function(n){switch(n.label){case 0:switch(e=button.type,t=button.url,this.errorMessage="",this.hide(),e){case O.a.LOGIN:return[3,1];case O.a.REDIRECT:return[3,3];case O.a.LEGAL:return[3,4];case O.a.MYACCOUNT:return[3,6]}return[3,7];case 1:return[4,this.showLogin()];case 2:return n.sent(),[3,8];case 3:return k.redirect(t),[3,8];case 4:return[4,this.goToCreateLegal(t)];case 5:return n.sent(),[3,8];case 6:return k.redirect(t),[3,8];case 7:return[3,8];case 8:return this.hide(),[2]}}))}))},showLogin:function(){return T(this,void 0,Promise,(function(){return x(this,(function(e){switch(e.label){case 0:this.urlRequestInProgress=!0,e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,o.a.showAuthForm()];case 2:return e.sent(),[3,5];case 3:return e.sent(),this.errorMessage=_.a.wrongRequestParams,[3,5];case 4:return this.urlRequestInProgress=!1,[7];case 5:return[2]}}))}))},goToCreateLegal:function(e){return T(this,void 0,Promise,(function(){return x(this,(function(t){switch(t.label){case 0:return this.legalWidgetRequestInProgress=!0,[4,this.$store.dispatch("composer/GET_MODAL",{url:e+"&returnUrl="+location.href,options:{notCentered:!0}})];case 1:return t.sent(),this.legalWidgetRequestInProgress=!1,[2]}}))}))}}},S=n("edf96"),L=n("b429c");var N=Object(L.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.tooltip},[e._v("\n  "+e._s(e.data.text)+"\n\n  "),e.data.notice?[n("br"),e._v("\n    "+e._s(e.data.notice)+"\n  ")]:e._e(),e._v(" "),n("ErrorMessage",{class:e.$style.errorMessage,attrs:{error:e.errorMessage}}),e._v(" "),e._l(e.data.buttons,(function(button,t){return n("OzButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"header-my-ozon-"+button.type,expression:"`header-my-ozon-${button.type}`",arg:"id"}],key:"button-"+t,class:e.$style.button,attrs:{text:button.text,loading:e.isLoading(button.type),fill:!0,theme:button.theme,type:"button"},on:{click:function(t){return e.onClick(button)}}})}))],2)}),[],!1,(function(e){this.$style=S.default.locals||S.default}),null,null).exports,A=function(){return(A=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},$=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},M=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},D=c.a.extend({name:"UdmProfileMenuAnonymous",components:{HeaderIcon:h.a,OfferLoginTooltip:N,ProfileIcon:f.a,ModalLoginComponent:m.a,OzPopover:l.OzPopover},data:function(){return{isTooltipVisible:!1,profileIcon:f.a,physicalUrlFix:"/ozonIdIframe?isRequiredFields=false&mode=OZONID_MODE_LOGIN_OR_REGISTRATION&pageType=home"}},computed:A({styles:function(){var e;return[this.$style["user-profile"],(e={},e[this.$style["focus-none"]]=this.isTooltipVisible,e)]}},Object(r.e)("modalLogin",{modalLoginIsVisible:function(e){return e.visibility}})),methods:{toggleTooltip:function(e){this.isTooltipVisible=e},hideModalLogin:function(){this.isTooltipVisible=!1,this.$store.dispatch("modalLogin/HIDE_MODAL_LOGIN")},clickOnIcon:function(){this.isTooltipVisible=!0},showAuthForm:function(){return $(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return this.isTooltipVisible=!1,[4,o.a.showAuthForm()];case 1:return e.sent(),[2]}}))}))},redirectToLk:function(){this.hideTooltipProfileMenu(),this.composerRouter.redirect("/my/main")},showTooltipProfileMenu:function(){this.isTooltipVisible=!0},hideTooltipProfileMenu:function(){this.isTooltipVisible=!1}}}),j=n("66e62");var F=Object(L.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.styles,attrs:{tabindex:"0"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.showTooltipProfileMenu(t)},mouseover:e.showTooltipProfileMenu}},[n("OzPopover",[n("HeaderIcon",{directives:[{name:"qa",rawName:"v-qa:id",value:"header-my-ozon-icon",expression:"'header-my-ozon-icon'",arg:"id"}],class:e.$style.icon,attrs:{icon:e.profileIcon,title:e.widgetState.iconTitle},on:{clickOnIcon:e.showAuthForm}},[n("ProfileIcon",{class:e.$style.pic})],1),e._v(" "),n("div",{attrs:{slot:"popover"},slot:"popover"},[n("OfferLoginTooltip",{attrs:{data:e.widgetState.tooltip}})],1)],1),e._v(" "),e.modalLoginIsVisible?n("ModalLoginComponent",{on:{close:e.hideModalLogin}}):e._e()],1)}),[],!1,(function(e){this.$style=j.default.locals||j.default}),null,null);t.default=F.exports},"5d2c3":function(e,t,n){e.exports={title:"c5n",note:"c5n0"}},"6178b":function(e,t,n){e.exports={field:"c1p8"}},"66e62":function(e,t,n){"use strict";var r=n("17a67"),o=n.n(r);t.default=o.a},"67d4b":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Object.freeze({password:{maxLength:128,minLength:10},inn:{lengths:[10,12]},bic:{lengths:[9]},passport:{lengths:[10]},departmentCode:{lengths:[6]},string:{maxLength:255},accountNumber:{lengths:[20]},okpo:{lengths:[8,9,10]}})},"6c666":function(e,t,n){e.exports={dots:"a4v1","five-dots":"a4v2","dots-white":"a4v3","dots-blue":"a4v4"}},"77d77":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ff287"),o=n.n(r),c={computed:{siteAbGroup:function(){return o()(this.$store.state,"experiments.abGroup")||-1},siteExperiments:function(){return o()(this.$store.state,"experiments.experiments")||{}},siteABConfig:function(){return o()(this.$store.state,"experiments.config",{})||{}}}}},"8c2d3":function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var s,t=1,n=arguments.length;t<n;t++)for(var a in s=arguments[t])Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,s){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};e.exports={functional:!0,render:function(e,s){var t=s._c,o=(s._v,s.data),a=s.children,c=void 0===a?[]:a,l=o.class,d=o.staticClass,i=o.style,f=o.staticStyle,p=o.attrs,h=void 0===p?{}:p,m=r(o,["class","staticClass","style","staticStyle","attrs"]);return t("svg",n({class:[l,d],style:[i,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},m),c.concat([t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.01 20.305c-5.105.586-9.51-3.37-9.51-8.442A8.507 8.507 0 018.788 3.99a5.453 5.453 0 005.288 4.123h.299a1 1 0 100-2h-.3a3.45 3.45 0 01-3.45-3.45v-1.29l-1.25.32A10.503 10.503 0 001.5 11.864c0 6.264 5.443 11.151 11.737 10.43 4.675-.537 8.503-4.26 9.156-8.913.505-3.6-.819-7.072-3.448-9.392a10.473 10.473 0 00-4.32-2.294 1 1 0 10-.5 1.937 8.473 8.473 0 013.496 1.857c2.132 1.88 3.202 4.687 2.791 7.613-.526 3.75-3.632 6.771-7.403 7.204zm-6.72-8.497c.19.181.45.292.71.292.26 0 .52-.11.71-.292.18-.191.29-.453.29-.714 0-.262-.11-.524-.29-.715a1.042 1.042 0 00-1.42 0c-.18.191-.29.453-.29.715 0 .261.11.523.29.714zm10 .002c.19.18.45.29.71.29.26 0 .52-.11.71-.29.09-.1.16-.21.21-.331.05-.12.08-.25.08-.38s-.03-.261-.08-.381-.12-.23-.21-.33c-.1-.091-.2-.161-.33-.211-.37-.16-.81-.06-1.09.21-.09.1-.16.21-.21.33-.05.12-.08.251-.08.381s.03.26.08.381c.05.12.12.23.21.33zm-7.497 4.995a1 1 0 111.414-1.415c.99.99 2.596.99 3.586 0a1 1 0 011.414 1.415 4.537 4.537 0 01-6.414 0z",fill:"currentColor"}})]))}}},"8d5d6":function(e,t,n){"use strict";var r=n("0bdda"),o=n.n(r);t.default=o.a},"949fe":function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};e.exports={functional:!0,render:function(e,t){var o=t._c,s=(t._v,t.data),c=t.children,a=void 0===c?[]:c,l=s.class,d=s.staticClass,i=s.style,f=s.staticStyle,p=s.attrs,h=void 0===p?{}:p,u=r(s,["class","staticClass","style","staticStyle","attrs"]);return o("svg",n({class:[l,d],style:[i,f],attrs:Object.assign({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h)},u),a.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.117 1.293a1 1 0 00-1.414 1.414l19 19a1 1 0 001.414-1.414l-6.253-6.254a4.003 4.003 0 00-4.903-4.903l-.94-.94A10.05 10.05 0 0112 8a9.99 9.99 0 018.383 4.546 1 1 0 001.676-1.092A11.99 11.99 0 0012 6c-1.262 0-2.478.195-3.62.556L3.117 1.293z",fill:"currentColor"}}),o("path",{attrs:{d:"M1.941 11.454c.737-1.13 1.66-2.13 2.726-2.953l1.428 1.428a10.058 10.058 0 00-2.478 2.617 1 1 0 01-1.676-1.092zM8 13c0-.357.047-.702.134-1.031l4.897 4.897A4.005 4.005 0 018 13z",fill:"currentColor"}})]))}}},96821:function(e,t,n){e.exports={tooltip:"a9a1",errorMessage:"a9a4",button:"a9a2"}},98020:function(e,t,n){"use strict";var r,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),function(e){e.NOT_VALID="NOT_VALID",e.EXPIRED="EXPIRED",e.TOO_MANY_CHECK_REQUESTS="TOO_MANY_CHECK_REQUESTS"}(r||(r={})),function(e){e.CHANNEL_PHONE="CHANNEL_PHONE",e.CHANNEL_EMAIL="CHANNEL_EMAIL"}(o||(o={}))},"9ac49":function(e,t,n){"use strict";var r=n("d68e9"),o={name:"CodeInputs",components:{Preloader:n("e4cd7").a,OzInput:r.OzInput},props:{countInput:{type:Number,default:4},requestInProgress:{type:Boolean,default:!1},errorMessage:{type:String,required:!0}},data:function(){return{code:{1:"",2:"",3:"",4:""},style:{width:"64px",display:"inline-block","text-align":"center"}}},computed:{codeStr:function(){return Object.values(this.code).join("")}},mounted:function(){var e=this;setTimeout((function(){e.focusedInput(1)}),0)},methods:{nextInput:function(e){(e<this.countInput&&""!==this.code[e]&&this.focusedInput(e+1),e===this.countInput&&""!==this.code[e])&&this.inputEl(e).blur();this.$emit("setCode",this.codeStr)},focusedInput:function(e){var element=this.inputEl(e);this.$emit("clearError"),element.focus()},inputEl:function(e){return this.$refs["input-"+e][0].$refs.inputEl},getNewCode:function(){var e=this.$refs["input-1"][0];e&&e.$refs.inputEl.focus();this.$emit("clearError"),this.$emit("getNewCode"),this.clearCode()},handlerButton:function(e,t){var n={REMOVE:"Backspace",RIGHT:"ArrowRight",LEFT:"ArrowLeft"},code=e.code,r=e.target.value;Object.values(n).includes(code)&&(t>1&&t<=this.countInput&&(code===n.REMOVE&&""===r&&this.focusedInput(t-1),code===n.LEFT&&this.focusedInput(t-1)),t>=1&&t<this.countInput&&code===n.RIGHT&&this.focusedInput(t+1))},onEnter:function(e){this.$emit("setCode",this.codeStr),e===this.countInput&&""!==this.code[e]&&this.$emit("onAutoSendRequest")},onFocus:function(){this.$emit("onFocus")},onBlur:function(){var e=this.codeStr.length;e<4&&0!==e?this.error=!0:4===e&&(this.$emit("setCode",this.codeStr),this.$emit("onAutoSendRequest"))},clearCode:function(){var e=this;Object.keys(this.code).forEach((function(t){e.code[t]=""}))}}},c=n("194f7"),l=n("b429c");var component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{class:e.$style.inputs},e._l(e.countInput,(function(t){return n("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:"verificationCodeInput"+t,expression:"`verificationCodeInput${index}`",arg:"id"}],key:t,ref:"input-"+t,refInFor:!0,style:e.style,attrs:{mask:"#",size:"xxl",value:e.code[t],type:"number",autofocus:1===t,disabled:e.requestInProgress,"has-error":Boolean(e.errorMessage)},on:{input:function(n){return e.nextInput(t)},focus:function(t){return e.$emit("onFocus")},blur:e.onBlur,keydown:function(n){return e.handlerButton(n,t)},keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onEnter(t)}},model:{value:e.code[t],callback:function(n){e.$set(e.code,t,n)},expression:"code[index]"}})})),1),e._v(" "),e.errorMessage?n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"otpErrorMessage",expression:"'otpErrorMessage'",arg:"id"}],class:e.$style.error},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),e._v(" "),e.requestInProgress?n("div",{class:e.$style.preloader},[n("Preloader",{attrs:{mod:"dots-blue"}})],1):e._e(),e._v(" "),e._t("info")],2)}),[],!1,(function(e){this.$style=c.default.locals||c.default}),null,null);t.a=component.exports},a19c3:function(e,t,n){"use strict";var r={name:"GetCodeNewMessage",props:{timeLeft:{type:Number,required:!0},renderTime:{type:String,required:!0}}},o=n("12639"),c=n("b429c");var component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.message},[e.timeLeft>0?[e._v("\n    Получить новый код можно"),n("br"),e._v("через "+e._s(e.renderTime)+"\n  ")]:n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"verificationGetNewCodeLink",expression:"'verificationGetNewCodeLink'",arg:"id"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("onGetNewCode")}}},[e._v("\n    Получить новый код\n  ")])],2)}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.a=component.exports},a29bd:function(e,t,n){"use strict";var r=n("6178b"),o=n.n(r);t.default=o.a},a43bd:function(e,t,n){"use strict";var r=n("279f1"),o=n.n(r),c=n("4066f"),l=n.n(c),d=n("d959b");function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){o()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={name:"HeaderIcon",functional:!0,props:{counter:{type:Number,default:null},link:{type:String,default:""},title:{type:String,default:""}},render:function(e,t){var n=t.props,r=t.$style,c=t.slots,f=t._v,m=t.listeners,data=t.data,v=n.counter,link=n.link,title=n.title,y=l()(c().default),E=data.directives,O=data.attrs,_=e("span",{class:["f-caption--bold",r.counter,o()({},r.hidden,!v)],directives:[{name:"qa",value:{id:"counter"}}]},[f(v||"0")]);if(y.unshift(_),title){var C=e("span",{class:r.title,directives:[{name:"qa",value:{id:"header-my-ozon-title"}}]},[f(title)]);y.push(C)}return e(d.a,{class:[r.icon,data.class],props:{href:link},on:{click:m.clickOnIcon},directives:l()(E||[]),attributes:h({},O||{})},y)}},v=n("8d5d6"),y=n("b429c");var component=Object(y.a)(m,void 0,void 0,!1,(function(e){this.$style=v.default.locals||v.default}),null,null);t.a=component.exports},b6f5a:function(e,t,n){"use strict";var r=n("6876d"),o=n("dd9e4"),c=n("80844"),l=n("d68e9"),d=function(){return(d=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},h=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},m={name:"ModalLoginComponent",components:{OzModal:l.OzModal,AuthorizationService:o.a},data:function(){return{successLoginStatus:!1}},computed:d(d({},Object(r.e)("userInfo",{isLoggedIn:function(e){return e.user.isLoggedIn}})),Object(r.e)("modalLogin",{redirectLink:function(e){return e.redirectLink}})),methods:{onClose:function(){return f(this,void 0,Promise,(function(){return h(this,(function(e){switch(e.label){case 0:return this.$store.dispatch("modalLogin/TOGGLE_MODAL_LOGIN",!1),this.$emit("close"),this.successLoginStatus?this.redirectLink?(this.$composerRouter.push(this.redirectLink),[2]):(Object(c.d)({action:"PURGE_SW_ALL_CACHE"}),[4,this.$composerRouter.refresh()]):[2];case 1:return e.sent(),[2]}}))}))},onSuccessLogin:function(){return f(this,void 0,Promise,(function(){return h(this,(function(e){switch(e.label){case 0:return this.$emit("successLogin"),this.successLoginStatus=!0,[4,this.onClose()];case 1:return e.sent(),[2]}}))}))},onSuccessLoginStatus:function(){return f(this,void 0,Promise,(function(){return h(this,(function(e){return this.successLoginStatus=!0,[2]}))}))}}},v=n("b429c"),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("OzModal",{attrs:{"is-mobile-theme":e.isMobile,"with-portal":""},on:{close:function(t){return e.onClose()}}},[n("AuthorizationService",{on:{successLogin:e.onSuccessLogin,successLoginStatus:e.onSuccessLoginStatus,close:e.onClose}})],1)}),[],!1,null,null,null);t.a=component.exports},ba78a:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={OTP_INCORRECT:"Код неверный",OTP_IS_EXPIRED:"Код просрочен",USER_BLOCKED:"Произошла ошибка. Пожалуйста, обратитесь в службу поддержки",ERROR_SENDING_SMS:"Ошибка отправки SMS на данный номер",PHONE_CANNOT_BE_USED_IN_ACCOUNT:"Этот телефон нельзя использовать в этом аккаунте",NEW_EMAIL_NOT_UNIQUE:"Пользователь с таким email уже существует",CANNOT_CREATE_NEW_ACCOUNT_ON_THIS_NUMBER:"Этот телефон нельзя использовать для создания аккаунта",PHONE_NOT_UNIQUE:"Такой телефон уже используется",NO_MAIL_IS_USED:"Пользователь с такой почтой не найден",PHONE_ENABLE:"Ошибка подтверждения входа. Пожалуйста, обратитесь в службу поддержки"}},bde21:function(e,t,n){"use strict";var r=n("cbc35"),o=n.n(r);t.default=o.a},be07c:function(e,t,n){e.exports={field:"c0j3"}},c48c6:function(e,t,n){e.exports={message:"c5e7"}},c514b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Object.freeze({emailIsExist:"Такая почта уже используется",wrongRequestParams:"Произошла ошибка. Попробуйте ещё раз",wrongRequestNeedReload:"Произошла ошибка. Перезагрузите страницу",invalidOldPassword:"Некорректный старый пароль",invalidNewPassword:"Некорректный новый пароль",passwordTooSimple:"Придумайте более сложный пароль"})},c6d56:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("2332b"),o=n("f5dcd"),c={isEmpty:function(e){return o.a.isEmpty(e)},isInvalid:function(e){return!o.a.isEmailValid(e)}},l=n("ef98a"),d=function(){return(d=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},f=d(d({},l.a),{id:r.a.EMAIL,placeholder:"Почта",value:"",mask:"",withIcon:!1,type:"text",autofocus:!0,required:!0,checkRules:{checkRulesEmail:c}})},cbc35:function(e,t,n){e.exports={link:"e2j9",dark:"e2k",":hover":"e2k0",light:"e2k1"}},cf79e:function(e,t,n){"use strict";var r={name:"BlockingLoader",components:{PreLoader:n("e4cd7").a},props:{triggerBlur:{type:Boolean,default:!1},invisible:{type:Boolean,default:!1},mod:{type:String,default:"dots-blue"}},data:function(){return{activeElement:void 0}},mounted:function(){this.triggerBlur&&document.activeElement instanceof HTMLElement&&(this.activeElement=document.activeElement,this.activeElement.blur())},beforeDestroy:function(){this.triggerBlur&&this.activeElement&&this.activeElement.focus()}},o=n("3b33f"),c=n("b429c");var component=Object(c.a)(r,(function(){var e,t,n=this.$createElement,r=this._self._c||n;return r("div",{class:[this.$style.loading,(e={},e[this.$style.modInvisible]=this.invisible,e)]},[r("div",{class:[this.$style.preloader,(t={},t[this.$style.modInvisible]=this.invisible,t)]},[r("PreLoader",{attrs:{mod:this.mod}})],1)])}),[],!1,(function(e){this.$style=o.default.locals||o.default}),null,null);t.a=component.exports},d3378:function(e,t,n){e.exports={preloader:"c5e3",inputs:"c5e4",message:"c5e5",error:"c5e6"}},d3ed7:function(e,t,n){"use strict";var r=n("be07c"),o=n.n(r);t.default=o.a},d959b:function(e,t,n){"use strict";var r=n("279f1"),o=n.n(r),c=n("1d967"),l=n.n(c),d=n("3ced6"),f=n("6cf2a");function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){o()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function v(e,t,n){return y.apply(this,arguments)}function y(){return(y=l()(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.href||!n.click||t.target||t.withAtomAction){e.next=3;break}return n.click(r),e.abrupt("return");case 3:if(o=f.b.getInstance(),n.click&&n.click(r),!t.withAtomAction){e.next=9;break}return r.preventDefault(),r.stopPropagation(),e.abrupt("return");case 9:if(!t.target){e.next=13;break}return o.redirect(t.href,"_blank"),r.preventDefault(),e.abrupt("return");case 13:if(!t.fakeLink){e.next=19;break}if(!t.target){e.next=17;break}return o.redirect(t.href,"_blank"),e.abrupt("return");case 17:!!r&&(r.ctrlKey||r.metaKey||2===r.which)?o.redirect(t.href,"_blank"):o.push(t.href);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E={name:"LinksStub",functional:!0,props:{type:{type:String,default:"div"},href:{type:[String,Boolean],default:""},target:{type:Boolean,default:!1},fakeLink:{type:Boolean,default:!1},theme:{type:String,default:""},withAtomAction:{type:Boolean,default:!1}},render:function(e,t){var data=t.data,n=t.$style,r=t.props,c=t.listeners,l=t.children;data.attrs=data.attrs||{};var f=r.type,h=r.href,y=r.theme,E=r.target;return E=E?"_blank":"_self",e(h?d.a:f,m(m({},data),{},{class:[n.link,o()({},n[y],y),data.class],attrs:m({},data.attrs),props:{href:h,target:E},on:m(m({},c),{},{click:v.bind(this,r,c)})}),l)}},O=n("bde21"),_=n("b429c");var C=Object(_.a)(E,void 0,void 0,!1,(function(e){this.$style=O.default.locals||O.default}),null,null);t.a=C.exports},dd9e4:function(e,t,n){"use strict";var r,o,c,l,d=n("6876d"),f=n("cf79e"),h=n("ff287"),m=n.n(h),v=n("ba78a"),y=n("ec543"),E=n("c514b"),O=n("33a7f");!function(e){e.FAST_ENTRY="FAST_ENTRY",e.EMAIL_OTP_ENTRY="EMAIL_OTP_ENTRY",e.REFILL_EMAIL="REFILL_EMAIL"}(r||(r={})),function(e){e.PHONE_REQUIRED="PHONE_REQUIRED",e.OTP_REQUIRED="OTP_REQUIRED",e.RECOGNIZED_EMAIL_REQUIRED="RECOGNIZED_EMAIL_REQUIRED",e.EMAIL_CONFIRMATION_REQUIRED="EMAIL_CONFIRMATION_REQUIRED",e.ENTRY_SUCCEEDED="ENTRY_SUCCEEDED"}(o||(o={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.EMAIL_REQUIRED="EMAIL_REQUIRED",e.OTP_REQUIRED="OTP_REQUIRED",e.ENTRY_SUCCEEDED="ENTRY_SUCCEEDED"}(c||(c={})),function(e){e.PHONE_EXCLUDES_REGISTRATION="phoneExcludesRegistration",e.OTP_TTL_EXCEEDED="otpTtlExceeded"}(l||(l={}));var _={userBlocked:v.a.USER_BLOCKED,phoneExcludesRegistration:v.a.CANNOT_CREATE_NEW_ACCOUNT_ON_THIS_NUMBER,phoneInvalid:O.a.isInvalid.phone,phoneNotApplicableForSpecifiedAccount:v.a.PHONE_CANNOT_BE_USED_IN_ACCOUNT,phoneNotUnique:v.a.PHONE_NOT_UNIQUE,otpTtlExceeded:"Время сессии истекло"},C=n("98020"),w=n("21736"),I=n("e7389"),P=n("f3aa0"),T=n("07653"),x={name:"InputPhone",components:{FormFieldPhone:P.a,SubmitButton:T.a},props:{requestInProgress:{type:Boolean,required:!0},isLegalEntityRegistration:{type:Boolean,required:!0},errorMessage:{type:String,required:!0},phoneHint:{type:String,default:""}},data:function(){return{byPhoneForm:I.a}},computed:{getButtonText:function(){return this.isLegalEntityRegistration?"Зарегистрироваться":"Получить код"}},created:function(){this.checkPhoneHint()},methods:{onChangePhone:function(e){var t=e.value;this.byPhoneForm.value=t},checkPhoneHint:function(){this.byPhoneForm.value=Object(y.d)(this.phoneHint)},submit:function(){this.byPhoneForm.validate(this.byPhoneForm),this.byPhoneForm.isValid(this.byPhoneForm)&&this.$emit("sendCodeRequest",Object(y.e)(this.byPhoneForm.value))},clearError:function(){this.$emit("clearError"),this.byPhoneForm.errorText=""},emitEvent:function(e){this.$emit(e),this.clearError()}}},k=n("f7e62"),R=n("b429c");var S=Object(R.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLegalEntityRegistration?n("div",{class:e.$style.title},[e._v("\n    Регистрация"),n("br"),e._v("юридического лица\n  ")]):n("div",{class:e.$style.title},[e._v("\n    Вход или регистрация\n  ")]),e._v(" "),n("FormFieldPhone",{attrs:{field:e.byPhoneForm,"test-id":e.byPhoneForm.id+"LoginField",disabled:e.requestInProgress,"error-message":e.errorMessage},on:{focus:e.clearError,phoneChanged:e.onChangePhone,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}}),e._v(" "),n("SubmitButton",{attrs:{"test-id":"getCode",text:e.getButtonText,loading:e.requestInProgress},on:{submit:e.submit}}),e._v(" "),n("div",{class:e.$style.blockWithLinks},[e.isLegalEntityRegistration?[n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToPhone",expression:"'goToPhone'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.emitEvent("goToPhone")}}},[e._v("Войти по телефону")]),e._v(" "),n("br")]:e._e(),e._v(" "),n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToEmail",expression:"'goToEmail'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goToEmail")}}},[e._v("Войти по почте")]),e._v(" "),n("br"),e._v(" "),e.isLegalEntityRegistration?e._e():n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToCreateLegal",expression:"'goToCreateLegal'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.emitEvent("goToCreateLegal")}}},[e._v("Создать аккаунт как юрлицо")])],2)],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,L=n("d68e9"),N={name:"AgreementCheckbox",components:{OzCheckbox:L.OzCheckbox},props:{hasError:{type:Boolean,required:!0}},data:function(){return{checkboxValue:!1}},methods:{toggleAgreement:function(e){this.checkboxValue=e,this.$emit("toggleAgreement",e)}}},A=n("52919");var $=Object(R.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.agreementCheckbox},[n("OzCheckbox",{directives:[{name:"qa",rawName:"v-qa:id",value:"agreementCheckbox",expression:"'agreementCheckbox'",arg:"id"}],class:e.$style.checkbox,attrs:{checked:e.checkboxValue},on:{change:e.toggleAgreement}},[e._v("\n    Согласен с "),n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"agreementLinkSale",expression:"'agreementLinkSale'",arg:"id"}],attrs:{href:"https://docs.ozon.ru/common/pravila-prodayoi-i-rekvizity/usloviya-prodayoi-tovarov-dlya-fizicheskih-lits-v-ozon-ru",target:"_blank"}},[e._v("условиями")]),e._v(" продажи товаров и\n    "),n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"agreementLinkPersonalData",expression:"'agreementLinkPersonalData'",arg:"id"}],attrs:{href:"https://docs.ozon.ru/common/pravila-prodayoi-i-rekvizity/konfidentsial-nost-personal-noj-informatsii",target:"_blank"}},[e._v("обработки")]),e._v(" персональных данных\n  ")])],1)}),[],!1,(function(e){this.$style=A.default.locals||A.default}),null,null).exports,M=n("9ac49"),D=n("a19c3"),j={name:"EnterOtp",components:{CodeInputs:M.a,GetCodeNewMessage:D.a},props:{messageSendOn:{type:String,default:""},otpStatus:{type:Object,required:!0},renderTime:{type:String,required:!0},requestInProgress:{type:Boolean,default:!1},isGetCodeHidden:{type:Boolean,default:!1},errorMessage:{type:String,default:""},isEditAllowed:{type:Boolean,default:!0}},data:function(){return{code:""}},computed:{timeLeft:function(){return this.otpStatus.resendAfter},volumeLimitExceeded:function(){return this.otpStatus.volumeLimitExceeded&&!this.otpStatus.active},isOptExpired:function(){return Boolean(this.otpStatus)&&!this.otpStatus.active}},methods:{onGetNewCode:function(){this.$emit("getNewCode"),this.$emit("clearError")},onFocus:function(){this.$emit("clearError")},onCheckCode:function(){4===this.code.length&&this.$emit("checkCode",{otp:this.code})},onSetCode:function(code){this.code=code,this.$emit("setCode",code)}}},F=n("40e9f");var B=Object(R.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.volumeLimitExceeded?n("div",[n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authHeader",expression:"'authHeader'",arg:"id"}],class:e.$style.title},[e._v("\n      "+e._s(e.errorMessage||"Упс! Превышено количество попыток")+"\n    ")]),e._v(" "),n("div",{class:e.$style.note},[e._v("\n      Получить новый код можно через "+e._s(e.renderTime)+"\n    ")])]):n("div",[n("div",{class:e.$style.title},[e._v("\n      Введите код\n    ")]),e._v(" "),n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"otpRecipient",expression:"'otpRecipient'",arg:"id"}],class:e.$style.note},[e._v("\n      Мы отправили код на "+e._s(e.messageSendOn)+"\n      "),e.isEditAllowed?n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"changeRecipient",expression:"'changeRecipient'",arg:"id"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goTo")}}},[e._v("\n        Изменить\n      ")]):e._e()]),e._v(" "),n("CodeInputs",{attrs:{"error-message":e.errorMessage,"request-in-progress":e.requestInProgress||e.isOptExpired,"is-get-code-hidden":e.isGetCodeHidden},on:{getNewCode:e.onGetNewCode,clearError:function(t){return e.$emit("clearError")},onFocus:e.onFocus,sendRequest:e.onCheckCode,onAutoSendRequest:e.onCheckCode,setCode:e.onSetCode}},[n("template",{slot:"info"},[e.requestInProgress||e.isGetCodeHidden?e._e():n("GetCodeNewMessage",{attrs:{"time-left":e.timeLeft,"render-time":e.renderTime},on:{onGetNewCode:e.onGetNewCode}})],1)],2)],1)])}),[],!1,(function(e){this.$style=F.default.locals||F.default}),null,null).exports,z=n("060eb"),G={name:"InputOtp",components:{EnterOtp:B,AgreementCheckbox:$,SubmitButton:T.a,ErrorMessage:z.a},props:{phoneToOutput:{type:String,required:!0},otpStatus:{type:Object,required:!0},renderTime:{type:String,required:!0},requestInProgress:{type:Boolean,default:!1},newAccountEntry:{type:Boolean,default:!1},isExtraOtpRequested:{type:Boolean,default:!1},isOtpTtlExceeded:{type:Boolean,default:!1},email:{type:String,default:""},errorMessage:{type:String,default:""},otpErrorMessage:{type:String,default:""}},data:function(){return{agreementErrorVisible:!1,codeInvalidErrorMessage:"",agreementConfirmed:!1,otp:""}},computed:{codeIsValid:function(){return 4===this.otp.length},messageSendOn:function(){return this.isExtraOtpRequested?"почту "+this.email:this.phoneToOutput},volumeLimitExceeded:function(){return this.otpStatus.volumeLimitExceeded&&!this.otpStatus.active}},created:function(){this.agreementConfirmed=!this.newAccountEntry},methods:{onCheckCode:function(e){var t=e.otp;this.otp=t,this.newAccountEntry||this.$emit("sendCheckCodeRequest",{otp:t})},onToggleAgreement:function(e){this.agreementConfirmed=e,this.agreementErrorVisible=!1},onGoToEmail:function(){this.$emit("goToEmail"),this.$emit("clearError"),this.agreementErrorVisible=!1},onClearError:function(){this.$emit("clearError"),this.codeInvalidErrorMessage=""},submit:function(){var e=this.otp;this.codeIsValid&&this.agreementConfirmed?(this.codeInvalidErrorMessage="",this.$emit("sendCheckCodeRequest",{otp:e})):this.codeIsValid||(this.codeInvalidErrorMessage=O.a.isIncorrectLength.code),this.agreementConfirmed||(this.agreementErrorVisible=!0)},onSetCode:function(code){this.otp=code}}};var U=Object(R.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EnterOtp",{attrs:{"message-send-on":e.messageSendOn,"render-time":e.renderTime,"request-in-progress":e.requestInProgress,"error-message":e.otpErrorMessage||e.codeInvalidErrorMessage,"otp-status":e.otpStatus,"is-edit-allowed":!e.isExtraOtpRequested,"is-get-code-hidden":e.isOtpTtlExceeded},on:{goTo:function(t){return e.$emit("goTo")},getNewCode:function(t){return e.$emit("getNewCode")},clearError:e.onClearError,checkCode:e.onCheckCode,setCode:e.onSetCode}}),e._v(" "),n("ErrorMessage",{class:e.$style.errorMessage,attrs:{error:e.errorMessage}}),e._v(" "),e.newAccountEntry&&!e.volumeLimitExceeded?n("AgreementCheckbox",{attrs:{"has-error":e.agreementErrorVisible},on:{toggleAgreement:e.onToggleAgreement}}):e._e(),e._v(" "),e.newAccountEntry&&!e.volumeLimitExceeded?n("SubmitButton",{attrs:{"test-id":"signUp",text:"Зарегистрироваться",loading:e.requestInProgress},on:{submit:e.submit}}):e._e(),e._v(" "),n("div",{class:e.$style.blockWithLinks},[e.isExtraOtpRequested?n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToEmail",expression:"'goToEmail'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goToPhone")}}},[e._v("Войти по телефону")]):n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToEmail",expression:"'goToEmail'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goToEmail")}}},[e._v("Войти по почте")]),e._v(" "),Boolean(e.phoneToOutput)?[n("br"),e._v(" "),e.isExtraOtpRequested?e._e():n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"linkDoesNotComeSms",expression:"'linkDoesNotComeSms'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"https://docs.ozon.ru/common/moj-akkaunt/#не-приходит-смс-с-кодом",target:"_blank"}},[e._v("Не приходит СМС?")])]:e._e()],2)],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,H=n("ea072"),V=n("c6d56"),Q={name:"InputEmailPassword",components:{ErrorMessage:z.a,SubmitButton:T.a,FormFieldBase:H.a},props:{requestInProgress:{type:Boolean,required:!0},errorMessage:{type:String,required:!0},phoneToOutput:{type:String,required:!0},errorName:{type:String,default:""}},data:function(){return{emailField:V.a}},computed:{phoneExcludesRegistration:function(){return this.errorName===l.PHONE_EXCLUDES_REGISTRATION&&this.errorMessage}},methods:{submit:function(){if(this.emailField.validate(this.emailField),this.emailField.isValid(this.emailField)){var data={email:this.emailField.value};this.$emit("confirmEmailRecognized",data)}},onInput:function(e){this.emailField.value=e},onFocus:function(){this.$emit("clearError"),this.emailField.errorText=""}}};var Y=Object(R.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authHeader",expression:"'authHeader'",arg:"id"}],class:e.$style.title},[e._v("\n    Кажется, мы вас узнали\n  ")]),e._v(" "),n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authText",expression:"'authText'",arg:"id"}],class:e.$style.note},[e._v("\n    Телефон "+e._s(e.phoneToOutput)+" нам знаком."),n("br"),e._v("Если у вас уже есть аккаунт на Ozon, войдите в него по почте.\n  ")]),e._v(" "),n("FormFieldBase",{attrs:{field:e.emailField,autofocus:!0,disabled:e.requestInProgress},on:{focus:e.onFocus,enter:e.submit,input:e.onInput}}),e._v(" "),e.phoneExcludesRegistration?e._e():n("ErrorMessage",{attrs:{error:e.errorMessage}}),e._v(" "),n("SubmitButton",{attrs:{"test-id":"loginButton",text:"Получить код на почту",loading:e.requestInProgress},on:{submit:e.submit}}),e._v(" "),e._e(),e._v(" "),n("div",{class:e.$style.blockWithLinks},[e.phoneExcludesRegistration?n("ErrorMessage",{attrs:{error:e.errorMessage}}):[n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"createNewAccountLink",expression:"'createNewAccountLink'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("forcePhoneRegistration")}}},[e._v("Хочу создать новый аккаунт")])]],2)],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,W={name:"ConfirmEmail",components:{ErrorMessage:z.a,SubmitButton:T.a},props:{requestInProgress:{type:Boolean,required:!0},errorMessage:{type:String,required:!0},email:{type:String,required:!0},errorName:{type:String,default:""}},computed:{phoneExcludesRegistration:function(){return this.errorName===l.PHONE_EXCLUDES_REGISTRATION&&this.errorMessage}},methods:{submit:function(){this.$emit("confirmEmail")}}};var K=Object(R.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authHeader",expression:"'authHeader'",arg:"id"}],class:e.$style.title},[e._v("\n    Вас давно не было\n  ")]),e._v(" "),n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authText",expression:"'authText'",arg:"id"}],class:e.$style.note},[e._v("\n    Помогите нам убедиться, что это вы."),n("br"),e._v("\n    Мы отправим код на вашу почту "+e._s(e.email)+"\n  ")]),e._v(" "),e.phoneExcludesRegistration?e._e():n("ErrorMessage",{attrs:{error:e.errorMessage}}),e._v(" "),n("SubmitButton",{attrs:{"test-id":"getCodeOnEmail",text:"Получить код",loading:e.requestInProgress},on:{submit:e.submit}}),e._v(" "),n("div",{class:e.$style.blockWithLinks},[e.phoneExcludesRegistration?n("ErrorMessage",{attrs:{error:e.errorMessage}}):[n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"createNewAccountLink",expression:"'createNewAccountLink'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("forcePhoneRegistration")}}},[e._v("Создать новый аккаунт")])]],2)],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,X=function(){return(X=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},J=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},ee={name:"FastEntry",components:{InputPhone:S,InputOtp:U,RecognizedEmailRequired:Y,BlockingLoader:f.a,ConfirmEmail:K},props:{forceLegalEntity:{type:Boolean,default:!1}},data:function(){return{requestInProgress:!1,errorMessage:"",otpErrorMessage:"",payload:null,stages:o,stage:o.PHONE_REQUIRED,timeout:null,secondDelay:1e3}},computed:{phoneToOutput:function(){var e=m()(this,"payload.data.phone","");return e?Object(y.d)(e):""},renderTime:function(){var e=m()(this,"otp.resendAfter",0),t=Math.floor(e/60),n=e%60;return(t?("00"+t).slice(-2):"00")+":"+(n?("00"+n).slice(-2):"00")},isLegalEntityRegistration:function(){return m()(this,"payload.data.forceLegalEntity",!1)||this.forceLegalEntity},phoneHint:function(){return m()(this,"payload.data.phoneHint")||m()(this,"payload.data.phone")||y.b},otp:function(){var e=m()(this,"payload.data.isExtraOtpRequested",!1),t=m()(this,"payload.data.extraOtpStatus",!1),n=m()(this,"payload.data.otpStatus",!1);return e?t:n},isOtpTtlExceeded:function(){return m()(this,"payload.error","")===l.OTP_TTL_EXCEEDED}},mounted:function(){return Z(this,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return[4,this.sendRequest()];case 1:return e.sent(),this.checkForceLegalEntity(),[2]}}))}))},methods:{sendRequest:function(e){return void 0===e&&(e={}),Z(this,void 0,Promise,(function(){var t,n,r,c,l;return J(this,(function(d){switch(d.label){case 0:this.requestInProgress=!0,d.label=1;case 1:return d.trys.push([1,5,6,7]),t=this,[4,this.$api.authFacade.fastEntry.post(e)];case 2:return t.payload=d.sent(),n=this.payload,r=n.statusCode,c=n.error,r!==o.ENTRY_SUCCEEDED?[3,4]:(l=this.payload.data.newAccountEntry,[4,this.$emit("login",{newAccountEntry:l})]);case 3:d.sent(),d.label=4;case 4:return this.stage=r||o.PHONE_REQUIRED,this.errorMessage=c?_[c]:"",this.parseOtpError(),this.parsePhoneEnabledError(),r===o.OTP_REQUIRED&&this.timer(),[3,7];case 5:return d.sent(),this.errorMessage=E.a.wrongRequestParams,[3,7];case 6:return this.requestInProgress=!1,[7];case 7:return[2]}}))}))},onSendCodeRequest:function(e){return Z(this,void 0,Promise,(function(){var t,n,r;return J(this,(function(o){switch(o.label){case 0:return t=m()(this,"payload.data.forceLegalEntity",!1),n=m()(this,"payload.data.otpId",0),r={phone:e,otpId:n},t&&(r.forceLegalEntity=t),[4,this.sendRequest(r)];case 1:return o.sent(),[2]}}))}))},onGetNewCode:function(){return Z(this,void 0,Promise,(function(){var e,t,n,r,o,c;return J(this,(function(l){switch(l.label){case 0:return e=m()(this,"payload.data.forceLegalEntity",!1),t=m()(this,"payload.data.isExtraOtpRequested",!1),n=m()(this,"payload.data.phone",""),r=m()(this,"payload.data.otpId",0),o=m()(this,"payload.data.email",""),c={phone:n,otpId:r},e&&(c.forceLegalEntity=e),t&&(c.otp=m()(this,"payload.data.otp",""),c.isExtraOtpRequested=!0,c.email=o),[4,this.sendRequest(c)];case 1:return l.sent(),[2]}}))}))},onSendCheckCodeRequest:function(data){return Z(this,void 0,Promise,(function(){var code,e,t,n,r,o,c;return J(this,(function(l){switch(l.label){case 0:return code=data.otp,e=m()(this,"payload.data.phone",""),t=m()(this,"payload.data.email",""),n=m()(this,"payload.data.forceLegalEntity",!1),r=m()(this,"payload.data.isExtraOtpRequested",!1),o=m()(this,"payload.data.otpId",0),c={phone:e,otpId:o},n&&(c.forceLegalEntity=n),r?(c.otp=m()(this,"payload.data.otp",""),c.extraOtp=code,c.extraOtpId=m()(this,"payload.data.extraOtpId",""),c.isExtraOtpRequested=!0,c.email=t):c.otp=code,[4,this.sendRequest(c)];case 1:return l.sent(),[2]}}))}))},onConfirmEmail:function(){return Z(this,void 0,void 0,(function(){var e,t,n,r,o,c;return J(this,(function(l){switch(l.label){case 0:return e=m()(this,"payload.data.phone",""),t=m()(this,"payload.data.forceLegalEntity",!1),n=m()(this,"payload.data.otpId",0),r=m()(this,"payload.data.otp",""),o=m()(this,"payload.data.email",""),!0,c={otp:r,phone:e,otpId:n,isExtraOtpRequested:!0,email:o},t&&(c.forceLegalEntity=t),[4,this.sendRequest(c)];case 1:return l.sent(),[2]}}))}))},onForcePhoneRegistration:function(){return Z(this,void 0,Promise,(function(){var e,t,n,r,o;return J(this,(function(c){switch(c.label){case 0:return e=m()(this,"payload.data.phone",""),t=m()(this,"payload.data.otp",""),n=m()(this,"payload.data.forceLegalEntity",!1),r=m()(this,"payload.data.otpId",0),o={forcePhoneRegistration:!0,phone:e,otpId:r,otp:t},n&&(o.forceLegalEntity=n),[4,this.sendRequest(o)];case 1:return c.sent(),[2]}}))}))},onConfirmEmailRecognized:function(e){var t=e.email;return Z(this,void 0,Promise,(function(){var e,n,r,o;return J(this,(function(c){switch(c.label){case 0:return e=m()(this,"payload.data.phone",""),n=m()(this,"payload.data.otp",""),r=m()(this,"payload.data.otpId",0),o={email:t,phone:e,otp:n,otpId:r,isExtraOtpRequested:!0},[4,this.sendRequest(o)];case 1:return c.sent(),[2]}}))}))},parseOtpError:function(){var e=m()(this,"payload.data.otpError",""),t=m()(this,"payload.data.extraOtpError",""),n=m()(this,"payload.data.isExtraOtpRequested",!1);!e||n||e!==C.b.NOT_VALID&&e!==C.b.EXPIRED&&e!==C.b.TOO_MANY_CHECK_REQUESTS?t&&n&&(t===C.b.NOT_VALID||t===C.b.EXPIRED||t===C.b.TOO_MANY_CHECK_REQUESTS)&&(this.otpErrorMessage=w.a[t]):this.otpErrorMessage=w.a[e]},parsePhoneEnabledError:function(){m()(this,"payload.data.otpStatus.enabled",!0)||(this.errorMessage=v.a.ERROR_SENDING_SMS)},timer:function(){var e=this;this.clearTimeoutForTimer();var t=m()(this,"otp",!1),n=m()(this,"payload.data.isExtraOtpRequested",!1);if(t){this.timeout=setTimeout((function(){return e.timer()}),this.secondDelay);var r=t.resendAfter,c=t.volumeLimitExceeded;r>0?n?this.payload.data.extraOtpStatus.resendAfter=r-1:this.payload.data.otpStatus.resendAfter=r-1:0===r&&c&&(this.stage=o.PHONE_REQUIRED)}},clearTimeoutForTimer:function(){this.timeout&&clearTimeout(this.timeout)},onGoToCreateLegal:function(){var data=X(X({},this.payload.data),{forceLegalEntity:!0});this.payload.data=data,this.$emit("goToCreateLegal")},onGoToPhone:function(){this.onClearError(),this.payload.data.forceLegalEntity=!1,this.stage=o.PHONE_REQUIRED,this.$emit("resetForceLegalEntity"),this.$emit("goToPhone")},onGoToEmail:function(){this.onClearError(),this.payload.data.forceLegalEntity=!1,this.$emit("goToEmail")},onClearError:function(){this.errorMessage="",this.otpErrorMessage=""},checkForceLegalEntity:function(){this.forceLegalEntity&&(this.onGoToCreateLegal(),this.$emit("resetForceLegalEntity"))}}},te=Object(R.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.payload?n("div",[e.stage===e.stages.PHONE_REQUIRED?n("InputPhone",{attrs:{"request-in-progress":e.requestInProgress,"error-message":e.errorMessage,"phone-hint":e.phoneHint,"is-legal-entity-registration":e.isLegalEntityRegistration},on:{goToEmail:e.onGoToEmail,goToPhone:e.onGoToPhone,goToCreateLegal:e.onGoToCreateLegal,sendCodeRequest:e.onSendCodeRequest,clearError:e.onClearError}}):e._e(),e._v(" "),e.stage===e.stages.OTP_REQUIRED?n("InputOtp",{attrs:{"phone-to-output":e.phoneToOutput,email:e.payload.data.email||"","new-account-entry":e.payload.data.newAccountEntry,"render-time":e.renderTime,"request-in-progress":e.requestInProgress,"error-message":e.errorMessage,"otp-error-message":e.otpErrorMessage,"otp-status":e.otp,"is-extra-otp-requested":e.payload.data.isExtraOtpRequested,"is-otp-ttl-exceeded":e.isOtpTtlExceeded},on:{goTo:e.onGoToPhone,goToEmail:e.onGoToEmail,goToPhone:e.onGoToPhone,getNewCode:e.onGetNewCode,sendCheckCodeRequest:e.onSendCheckCodeRequest,clearError:e.onClearError}}):e._e(),e._v(" "),e.stage===e.stages.RECOGNIZED_EMAIL_REQUIRED?n("RecognizedEmailRequired",{attrs:{"phone-to-output":e.phoneToOutput,"request-in-progress":e.requestInProgress,"error-message":e.errorMessage,"error-name":e.payload.error},on:{confirmEmailRecognized:e.onConfirmEmailRecognized,forcePhoneRegistration:e.onForcePhoneRegistration,clearError:e.onClearError}}):e._e(),e._v(" "),e.stage===e.stages.EMAIL_CONFIRMATION_REQUIRED?n("ConfirmEmail",{attrs:{email:e.payload.data.email,"request-in-progress":e.requestInProgress,"error-message":e.errorMessage,"error-name":e.payload.error},on:{confirmEmail:e.onConfirmEmail,forcePhoneRegistration:e.onForcePhoneRegistration}}):e._e()],1):n("BlockingLoader",{attrs:{mod:"dots-blue"}})],1)}),[],!1,null,null,null).exports,ne={name:"InputEmail",components:{SubmitButton:T.a,FormFieldBase:H.a},props:{requestInProgress:{type:Boolean,required:!0},errorMessage:{type:String,required:!0}},data:function(){return{emailField:V.a}},created:function(){this.emailField.errorText=""},methods:{onInput:function(e){this.emailField.value=e,this.$emit("setEnteredEmail",e)},submit:function(){if(this.emailField.validate(this.emailField),this.emailField.isValid(this.emailField)){var data={email:this.emailField.value};this.$emit("confirmEmail",data)}},onFocus:function(){this.$emit("clearError"),this.emailField.errorText=""}}};var re=Object(R.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{class:e.$style.title},[e._v("\n    Войти по почте\n  ")]),e._v(" "),n("FormFieldBase",{key:e.emailField.id,attrs:{field:e.emailField,autofocus:!0,disabled:e.requestInProgress,"error-message":e.errorMessage},on:{focus:e.onFocus,enter:e.submit,input:e.onInput}}),e._v(" "),n("SubmitButton",{attrs:{"test-id":"confirmEmailButton",text:"Получить код",loading:e.requestInProgress},on:{submit:e.submit}}),e._v(" "),n("div",{class:e.$style.blockWithLinks},[n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToPhone",expression:"'goToPhone'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goToPhone")}}},[e._v("Войти по телефону")])])],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,oe={name:"InputOtp",components:{EnterOtp:n("ecf08").a},props:{output:{type:String,required:!0},resendAfter:{type:Number,required:!0},isCheckAllowed:{type:Boolean,required:!0},renderTime:{type:String,required:!0},requestInProgress:{type:Boolean,default:!1},errorMessage:{type:String,default:""},otpChannel:{type:String,required:!0}},data:function(){return{otp:""}},computed:{codeIsValid:function(){return 4===this.otp.length},isPhoneChannel:function(){return this.otpChannel===C.a.CHANNEL_PHONE}},methods:{onCheckCode:function(data){this.$emit("sendCheckCodeRequest",data)},onGoToEmail:function(){this.$emit("goToEmail"),this.$emit("clearError")},onClearError:function(){this.$emit("clearError")},submit:function(){var e=this.otp;this.codeIsValid&&this.$emit("sendCheckCodeRequest",{otp:e})}}};var ie=Object(R.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EnterOtp",{attrs:{"message-send-on":e.output,"render-time":e.renderTime,"error-message":e.errorMessage,"resend-after":e.resendAfter,"check-allowed":e.isCheckAllowed,"is-edit-allowed":!e.isPhoneChannel},on:{goTo:e.onGoToEmail,getNewCode:function(t){return e.$emit("getNewCode")},clearError:function(t){return e.$emit("clearError")},checkCode:e.onCheckCode}}),e._v(" "),n("div",{class:e.$style.blockWithLinks},[e.isPhoneChannel?e._e():n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToPhone",expression:"'goToPhone'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goToPhone")}}},[e._v("Войти по телефону")]),e._v(" "),e.isPhoneChannel?[n("br"),e._v(" "),n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"linkDoesNotComeSms",expression:"'linkDoesNotComeSms'",arg:"id"}],class:e.$style.linkBase,attrs:{href:"https://docs.ozon.ru/common/moj-akkaunt/#не-приходит-смс-с-кодом",target:"_blank"}},[e._v("Не приходит СМС?")])]:e._e()],2)],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,ae=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},se=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},ue={name:"EmailOtpEntry",components:{InputEmail:re,InputOtp:ie},data:function(){return{requestInProgress:!1,errorMessage:"",payload:null,stages:c,stage:c.EMAIL_REQUIRED,timeout:null,secondDelay:1e3}},computed:{renderTime:function(){var e=m()(this,"payload.data.resendAfter",0),t=Math.floor(e/60),n=e%60;return(t?("00"+t).slice(-2):"00")+":"+(n?("00"+n).slice(-2):"00")}},mounted:function(){return ae(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,this.sendRequest()];case 1:return e.sent(),[2]}}))}))},methods:{sendRequest:function(e){return void 0===e&&(e={}),ae(this,void 0,Promise,(function(){var t,n,r,o;return se(this,(function(l){switch(l.label){case 0:this.requestInProgress=!0,l.label=1;case 1:return l.trys.push([1,5,6,7]),t=this,[4,this.$api.authFacade.emailOtpEntry.post(e)];case 2:return t.payload=l.sent(),n=this.payload,r=n.statusCode,o=n.error,r!==c.ENTRY_SUCCEEDED?[3,4]:[4,this.$emit("login",{newAccountEntry:!1})];case 3:l.sent(),l.label=4;case 4:return this.stage=r||c.EMAIL_REQUIRED,this.errorMessage=o||"",r===c.OTP_REQUIRED&&this.payload.data.resendAfter>0&&this.timer(),[3,7];case 5:return l.sent(),this.errorMessage=E.a.wrongRequestParams,[3,7];case 6:return this.requestInProgress=!1,[7];case 7:return[2]}}))}))},onGetNewCode:function(){return ae(this,void 0,Promise,(function(){var e;return se(this,(function(t){switch(t.label){case 0:return e=m()(this,"payload.data.email",""),this.onClearError(),[4,this.sendRequest({email:e})];case 1:return t.sent(),[2]}}))}))},onSendCheckCodeRequest:function(e){var t=e.otp;return ae(this,void 0,Promise,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:return e=m()(this,"payload.data.email",""),n=m()(this,"payload.data.otpId",0),[4,this.sendRequest({otp:t,email:e,otpId:n})];case 1:return r.sent(),[2]}}))}))},onConfirmEmail:function(e){var t=e.email;return ae(this,void 0,Promise,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,this.sendRequest({email:t})];case 1:return e.sent(),[2]}}))}))},timer:function(){var e=this;this.clearTimeoutForTimer();var t=m()(this,"payload.data.resendAfter",0),n=m()(this,"payload.data.isCheckAllowed",!0);t>0?(this.timeout=setTimeout((function(){return e.timer()}),this.secondDelay),this.payload.data.resendAfter=t-1):0!==t||n||(this.stage=c.EMAIL_REQUIRED,this.payload.isCheckAllowed=!0)},clearTimeoutForTimer:function(){this.timeout&&clearTimeout(this.timeout)},onGoToPhone:function(){this.errorMessage="",this.$emit("goToPhone")},onGoToEmail:function(){this.errorMessage="",this.stage=c.EMAIL_REQUIRED},onClearError:function(){this.errorMessage=""},onSetEnteredEmail:function(e){this.$emit("setEnteredEmail",e)}}},ce=Object(R.a)(ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.stage===e.stages.EMAIL_REQUIRED?n("InputEmail",{attrs:{"request-in-progress":e.requestInProgress,"error-message":e.errorMessage},on:{goToPhone:e.onGoToPhone,confirmEmail:e.onConfirmEmail,clearError:e.onClearError,setEnteredEmail:e.onSetEnteredEmail}}):e._e(),e._v(" "),e.stage===e.stages.OTP_REQUIRED?n("InputOtp",{attrs:{"resend-after":e.payload.data.resendAfter,"is-check-allowed":e.payload.data.isCheckAllowed,"otp-channel":e.payload.data.otpChannel,output:e.payload.data.otpAddress,"request-in-progress":e.requestInProgress,"error-message":e.errorMessage,"render-time":e.renderTime},on:{goToEmail:e.onGoToEmail,goToPhone:e.onGoToPhone,getNewCode:e.onGetNewCode,sendCheckCodeRequest:e.onSendCheckCodeRequest,clearError:e.onClearError}}):e._e()],1)}),[],!1,null,null,null).exports,le={name:"SubscriptionCheckbox",components:{OzCheckbox:L.OzCheckbox},data:function(){return{checkboxValue:!0}},methods:{toggleAgreement:function(e){this.checkboxValue=e,this.$emit("toggleSubscription",e)}}},de=n("418a1");var fe=Object(R.a)(le,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.$style.subscriptionCheckbox},[t("OzCheckbox",{directives:[{name:"qa",rawName:"v-qa:id",value:"subscriptionCheckbox",expression:"'subscriptionCheckbox'",arg:"id"}],class:this.$style.checkbox,attrs:{checked:this.checkboxValue},on:{change:this.toggleAgreement}},[this._v("\n    Хочу получать уведомления о скидках\n  ")])],1)}),[],!1,(function(e){this.$style=de.default.locals||de.default}),null,null).exports,pe=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},he=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},me={name:"RefillEmail",components:{ErrorMessage:z.a,SubmitButton:T.a,FormFieldBase:H.a,SubscriptionCheckbox:fe},data:function(){return{emailField:V.a,subscriptionConfirmed:!0,requestInProgress:!1,errorMessage:""}},methods:{onInput:function(e){this.emailField.value=e},submit:function(){return pe(this,void 0,Promise,(function(){var e;return he(this,(function(t){switch(t.label){case 0:return(e=this.emailField).validate(e),e.isValid(e)?[4,this.sendRequest()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},sendRequest:function(){return pe(this,void 0,Promise,(function(){var e,t;return he(this,(function(n){switch(n.label){case 0:e={email:this.emailField.value,isSubscribe:this.subscriptionConfirmed},this.requestInProgress=!0,n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.$api.userAction.setUserEmailAfterRegistration.post(e)];case 2:return(t=n.sent()).status?this.$emit("continueLogin"):this.errorMessage=t.error,[3,5];case 3:return n.sent(),this.errorMessage=E.a.wrongRequestParams,[3,5];case 4:return this.requestInProgress=!1,[7];case 5:return[2]}}))}))},onFocus:function(){this.$emit("clearError"),this.emailField.errorText=""},onToggleSubscription:function(e){this.subscriptionConfirmed=e}}};var ge=Object(R.a)(me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{class:e.$style.title},[e._v("\n    Добавьте почту в свой аккаунт\n  ")]),e._v(" "),n("FormFieldBase",{key:e.emailField.id,attrs:{field:e.emailField,autofocus:!0,disabled:e.requestInProgress},on:{focus:e.onFocus,enter:e.submit,input:e.onInput}}),e._v(" "),n("ErrorMessage",{attrs:{error:e.errorMessage}}),e._v(" "),n("SubmitButton",{attrs:{"test-id":"refillEmailButton",text:"Продолжить",loading:e.requestInProgress},on:{submit:e.submit}}),e._v(" "),n("SubscriptionCheckbox",{on:{toggleSubscription:e.onToggleSubscription}}),e._v(" "),n("div",{class:e.$style.blockWithLinks},[n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"goToPhone",expression:"'goToPhone'",arg:"id"}],class:e.$style.linkGray,attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("close")}}},[e._v("Добавить почту позже")])])],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null).exports,ve=n("77d77"),ye=function(){return(ye=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},be=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Ee=function(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},Oe={name:"AuthorizationService",components:{FastEntry:te,EmailOtpEntry:ce,RefillEmail:ge,BlockingLoader:f.a},mixins:[ve.a],props:{widgetState:{type:Object,default:function(){}}},data:function(){return{stages:r,stage:r.FAST_ENTRY,forceLegalEntity:void 0,checkoutPageType:"checkout",blockingLoaderIsVisible:!1,enteredEmail:""}},computed:ye(ye({},Object(d.e)("pageInfo",{pageType:function(e){return e.pageType}})),{isCheckout:function(){return this.pageType===this.checkoutPageType||location.href.includes(this.checkoutPageType)},isRefillEmailVisibleExperiment:function(){return 1===this.siteExperiments["web.csmaEmailRequest"]}}),methods:{onGoToPhone:function(){this.stage=r.FAST_ENTRY},onGoToCreateLegal:function(){this.stage=r.FAST_ENTRY,this.forceLegalEntity=!0},onGoToEmail:function(){this.stage=r.EMAIL_OTP_ENTRY},onResetForceLegalEntity:function(){this.forceLegalEntity=void 0},onLogin:function(e){var t=e.newAccountEntry;return be(this,void 0,void 0,(function(){return Ee(this,(function(e){switch(e.label){case 0:return this.blockingLoaderIsVisible=!0,[4,this.$store.dispatch("authorization/AUTH_SET_TOKEN")];case 1:return e.sent(),this.isRefillEmailVisibleExperiment&&t&&!this.isCheckout&&!this.isMobile?(this.blockingLoaderIsVisible=!1,this.stage=r.REFILL_EMAIL,this.$emit("successLoginStatus")):this.afterLogin(),[2]}}))}))},onContinueLogin:function(){this.afterLogin()},onCloseRefillEmail:function(){this.afterLogin()},afterLogin:function(){this.$emit("successLogin"),this.$store.dispatch("authorization/LOGIN_SUCCESS")},onSetEnteredEmail:function(e){this.enteredEmail=e}}};var _e=Object(R.a)(Oe,(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.authorizationService,(e={},e[t.$style.mobile]=t.isMobile,e)]},[t.blockingLoaderIsVisible?r("BlockingLoader",{attrs:{mod:"dots-blue"}}):t._e(),t._v(" "),t.stage===t.stages.FAST_ENTRY?r("FastEntry",{attrs:{"force-legal-entity":t.forceLegalEntity},on:{resetForceLegalEntity:t.onResetForceLegalEntity,goToEmail:t.onGoToEmail,goToPhone:t.onGoToPhone,goToCreateLegal:t.onGoToCreateLegal,login:t.onLogin,close:function(e){return t.$emit("close")}}}):t._e(),t._v(" "),t.stage===t.stages.REFILL_EMAIL?r("RefillEmail",{on:{continueLogin:t.onContinueLogin,close:t.onCloseRefillEmail}}):t._e(),t._v(" "),t.stage===t.stages.EMAIL_OTP_ENTRY?r("EmailOtpEntry",{on:{goToPhone:t.onGoToPhone,setEnteredEmail:t.onSetEnteredEmail,login:t.onLogin,close:function(e){return t.$emit("close")}}}):t._e()],1)}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null);t.a=_e.exports},e4cd7:function(e,t,n){"use strict";var r=n("a09a9"),o=n.n(r),c=n("279f1"),l=n.n(c),d=n("0ba6f"),f=n("6876d"),h=n("e90f8");function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){l()(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={FIVE_BLUE:"five-dots",DOTS_BLUE:"dots-blue",DOTS_WHITE:"dots-white"},E={name:"OzonFiveDots",props:{mod:d.default.oneOf(Object.values(y)).def(y.DOTS_BLUE),positionModel:d.default.string.def("relative"),height:d.default.number.def(10)},computed:v(v({},Object(f.e)({forceHide:function(e){return e.o3Params[h.a]}})),{},{styles:function(){return{position:this.positionModel,height:"".concat(this.height,"px")}}}),render:function(){var e=arguments[0],t=this.forceHide,n=this.styles,r=this.$data,c=this.$style,l=this.$props.mod;return t?{}:e("div",o()([{},{directives:[{name:"qa",value:{id:"five-dots-loader"}}]},{class:[c.dots,c[l],r.class],style:n}]))}},O=n("fa744"),_=n("b429c");var component=Object(_.a)(E,void 0,void 0,!1,(function(e){this.$style=O.default.locals||O.default}),null,null);t.a=component.exports},e7389:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("ec543"),o=n("2332b"),c=n("f5dcd"),l={isEmpty:function(e){return c.a.isPhoneEmpty(e)},isInvalid:function(e){return!c.a.isPhoneValid(e)}},d=n("ef98a"),f=function(){return(f=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},h=f(f({},d.a),{id:o.a.PHONE,placeholder:"Телефон",value:r.b,mask:r.a,withIcon:!1,type:"text",autofocus:!0,required:!0,checkRules:{checkRulesPhone:l}})},ea072:function(e,t,n){"use strict";var r=n("2332b"),o=n("44508"),c=n.n(o),l=n("949fe"),d=n.n(l),f=n("d68e9"),h={name:"FormFieldBase",components:{OzInput:f.OzInput,OzField:f.OzField},props:{field:{type:Object,required:!0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},markRequired:{type:Boolean,default:!1},size:{type:String,default:"xl"},errorMessage:{type:String,default:""}},computed:{placeholder:function(){return this.markRequired&&this.field.required?this.field.placeholder+"*":""+this.field.placeholder},getIcon:function(){return this.field.id===r.a.PASSWORD||this.field.id===r.a.NEW_PASSWORD||this.field.id===r.a.OLD_PASSWORD?"text"===this.field.type?c.a:d.a:{}}},methods:{onFocus:function(e){this.$emit("focus",this.field,e)},onBlur:function(e){this.$emit("blur",this.field,e)},onInput:function(e){this.$emit("input",e,this.field.id)},onInputMasked:function(e){e&&this.$emit("input",e,this.field.id)},changePasswordVisibility:function(){var e=this.field.type;this.field.type="text"===e?"password":"text"}}},m=n("d3ed7"),v=n("b429c");var component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("OzField",{class:e.$style.field,attrs:{errors:[e.field.errorText||e.errorMessage],"qa-id-errors":"errorMessage"}},[n("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:e.field.id+"Input",expression:"`${field.id}Input`",arg:"id"}],key:e.field.id,attrs:{value:e.field.value,name:e.field.id,type:e.field.type,inputmode:e.field.type,autofocus:e.autofocus,disabled:e.disabled,placeholder:e.placeholder,"has-error":Boolean(e.field.errorText||e.errorMessage),mask:e.field.mask,icon:e.getIcon,size:e.size},on:{blur:e.onBlur,focus:e.onFocus,input:e.onInput,inputMasked:e.onInputMasked,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter")},iconClick:e.changePasswordVisibility}})],1)}),[],!1,(function(e){this.$style=m.default.locals||m.default}),null,null);t.a=component.exports},ecf08:function(e,t,n){"use strict";var r=n("9ac49"),o=n("a19c3"),c={name:"EnterOtp",components:{CodeInputs:r.a,GetCodeNewMessage:o.a},props:{messageSendOn:{type:String,default:""},resendAfter:{type:Number,required:!0},checkAllowed:{type:Boolean,required:!0},renderTime:{type:String,required:!0},requestInProgress:{type:Boolean,default:!1},errorMessage:{type:String,default:""},isEditAllowed:{type:Boolean,default:!0}},data:function(){return{code:""}},methods:{onGetNewCode:function(){this.$emit("getNewCode"),this.$emit("clearError")},onFocus:function(){this.$emit("clearError")},onCheckCode:function(){4===this.code.length&&this.$emit("checkCode",{otp:this.code})},onSetCode:function(code){this.code=code}}},l=n("f7e62"),d=n("b429c");var component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.checkAllowed?n("div",[n("div",{class:e.$style.title},[e._v("\n      Введите код\n    ")]),e._v(" "),n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"otpRecipient",expression:"'otpRecipient'",arg:"id"}],class:e.$style.note},[e._v("\n      Мы отправили код на "),n("b",[e._v(e._s(e.messageSendOn))]),e._v(" "),e.isEditAllowed?n("a",{directives:[{name:"qa",rawName:"v-qa:id",value:"changeRecipient",expression:"'changeRecipient'",arg:"id"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("goTo")}}},[e._v("\n        Изменить\n      ")]):e._e()]),e._v(" "),e._t("additionalInfo"),e._v(" "),n("CodeInputs",{attrs:{"error-message":e.errorMessage,"request-in-progress":e.requestInProgress},on:{getNewCode:e.onGetNewCode,clearError:function(t){return e.$emit("clearError")},onFocus:e.onFocus,sendRequest:e.onCheckCode,onAutoSendRequest:e.onCheckCode,setCode:e.onSetCode}},[n("template",{slot:"info"},[e.requestInProgress?e._e():n("GetCodeNewMessage",{attrs:{"time-left":e.resendAfter,"render-time":e.renderTime},on:{onGetNewCode:e.onGetNewCode}})],1)],2)],2):n("div",[n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"authHeader",expression:"'authHeader'",arg:"id"}],class:e.$style.title},[e._v("\n      "+e._s(e.errorMessage||"Упс! Превышено количество попыток")+"\n    ")]),e._v(" "),n("div",{class:e.$style.note},[e._v("\n      Получить новый код можно через "+e._s(e.renderTime)+"\n    ")])])])}),[],!1,(function(e){this.$style=l.default.locals||l.default}),null,null);t.a=component.exports},edf96:function(e,t,n){"use strict";var r=n("96821"),o=n.n(r);t.default=o.a},ef98a:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("33a7f"),o=function(){return function(e){var t=e.checkRules,n=e.id;Object.keys(t).forEach((function(o){var c=Object.keys(t[o]),l=!1;c.forEach((function(c){t[o][c](e)&&!l&&(e.errorText=r.a[c][n],l=!0)}))}))}},c={disabled:!1,errorText:"",isValid:function(){return function(e){var t=e.checkRules;return Object.keys(t).every((function(n){return Object.keys(t[n]).every((function(r){return!t[n][r](e)}))}))}}(),validate:o()}},f3aa0:function(e,t,n){"use strict";var r=n("ec543"),o=n("d68e9"),c=function(){return(c=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)},l={name:"FormFieldPhone",components:{OzInput:o.OzInput,OzField:o.OzField},props:{field:{type:Object,default:function(){return{}}},testId:{type:String,default:""},disabled:{type:Boolean,default:!1},maxLength:{type:String,default:"20"},size:{type:String,default:"xl"},errorMessage:{type:String,default:""}},data:function(){return{isCtrlAction:!1}},computed:{errorText:function(){return this.field&&this.field.errorText||this.errorMessage}},methods:{onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)},onKeydown:function(e){var t=e.key;return this.isCtrlAction&&["c","v","z","с","м","я"].some((function(e){return e===t}))?(this.isCtrlAction=!1,void this.$emit("keydown",e)):(this.isCtrlAction=!1,["Meta","Control"].some((function(e){return e===t}))?(this.isCtrlAction=!0,void this.$emit("keydown",e)):void(["Tab","Backspace","Enter","ArrowLeft","ArrowRight"].some((function(e){return e===t}))||t>="0"&&t<="9"?this.$emit("keydown",e):(e.preventDefault(),e.stopPropagation())))},onKeyup:function(e){var t=e.key;this.isCtrlAction&&["Meta","Control"].some((function(e){return e===t}))&&(this.isCtrlAction=!1,e.preventDefault(),e.stopPropagation()),this.$emit("keyup",e)},onInput:function(e){if(e){var t=Object(r.c)("+"+e.replace(/[^0-9]/g,""));this.$emit("phoneChanged",c(c({},t),{id:this.field.id}))}else this.$emit("phoneChanged",{value:"",id:this.field.id,valid:!1})}}},d=n("a29bd"),f=n("b429c");var component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("OzField",{class:e.$style.field,attrs:{errors:[e.errorText],"qa-id-errors":"errorMessage"}},[n("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:e.testId,expression:"testId",arg:"id"}],attrs:{value:e.field.value,type:e.field.type,name:e.field.id||"phone",autofocus:!e.errorMessage&&e.field.autofocus,disabled:e.disabled,placeholder:e.field.placeholder,"has-error":Boolean(e.errorText),"max-length":e.maxLength,size:e.size},on:{blur:e.onBlur,focus:e.onFocus,input:e.onInput,keyup:e.onKeyup,keydown:e.onKeydown}})],1)}),[],!1,(function(e){this.$style=d.default.locals||d.default}),null,null);t.a=component.exports},f46b3:function(e,t,n){e.exports={errorMessage:"b9b9"}},f5dcd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("f755e"),o=n("ec543"),c={hasSpaces:function(e){var t=e.value;return Boolean(t.match(/([\s]+)/g))},tooLong:function(e,t){var n,r=e.value;return void 0!==t&&(n=t.maxValue),!!n&&r.length>=n},tooShort:function(e,t){var n,r=e.value;return void 0!==t&&(n=t.minValue),!!n&&r.length<n},isCorrectLength:function(e,t){var n,r=e.value,o=e.required;return void 0!==t&&(n=t.lengths),!r&&!o||!!n&&n.includes(r.length)},isEmpty:function(e){var t=e.value,n=e.required;return""===("string"==typeof t?t.replace(/\s/g,""):"")&&n},isEmailValid:function(e){var t=e.value,n=e.required;return Object(r.a)(t)||""===t&&!n},isPhoneEmpty:function(e){return(e.value===o.b||this.isEmpty(e))&&e.required},isPhoneValid:function(e){var t=e.value;return Object(o.f)(t)},isDateValid:function(e){var t=e.value,n=e.required;if(t){var r=(new Date).getTime(),o=t.split("."),c=o[0]?Number(o[0]):"",l=o[1]?Number(o[1]):"",d=o[2]?Number(o[2]):"";if(!c||!l||!d||c>31||l>13||String(d).length<4)return!1;var f=d+"/"+l+"/"+c;return r>new Date(f).getTime()&&!isNaN(new Date(f).getTime())}return""===t&&!n},isCompanyNameValid:function(e){var t=e.value;return!!t&&/^[а-яА-ЯёЁa-zA-Z]+$/.test(t)},isOKPOValid:function(e){var t=e.value,n=e.required;return!t&&!n||/^[0-9 ,]+$/.test(t)},hasSpecialCharacters:function(e){var t=e.value;return["www","http","\\","//"].reduce((function(e,n){return t.includes(n)&&(e=!0),e}),!1)}},l=Object.freeze(c)},f7e62:function(e,t,n){"use strict";var r=n("270ea"),o=n.n(r);t.default=o.a},fa744:function(e,t,n){"use strict";var r=n("6c666"),o=n.n(r);t.default=o.a},fbf89:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.LOGIN="login",e.REDIRECT="redirect",e.LEGAL="legal",e.MYACCOUNT="my-account"}(r||(r={}))}}]);